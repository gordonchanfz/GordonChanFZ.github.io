<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>hbase | 个人博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="./favicon.ico">
    <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?55943ae09e5901d7a9f5705133737eec";
              var s = document.getElementsByTagName("script")[0];
              s.parentNode.insertBefore(hm, s);
            })();
           </script>
    <script src="https://hm.baidu.com/hm.js?xxxxxxxxxxx"></script>
    <meta name="description" content="会思考的芦苇。">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="robots" content="all">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="./assets/css/0.styles.f4f644f3.css" as="style"><link rel="preload" href="./assets/js/app.764dede6.js" as="script"><link rel="preload" href="./assets/js/13.20e964b9.js" as="script"><link rel="preload" href="./assets/js/1.8757f81f.js" as="script"><link rel="preload" href="./assets/js/6.e534639a.js" as="script"><link rel="preload" href="./assets/js/34.ec572062.js" as="script"><link rel="prefetch" href="./assets/js/10.36ed4133.js"><link rel="prefetch" href="./assets/js/11.18e1c33d.js"><link rel="prefetch" href="./assets/js/12.b32071c5.js"><link rel="prefetch" href="./assets/js/14.d0932ff0.js"><link rel="prefetch" href="./assets/js/15.7747d51d.js"><link rel="prefetch" href="./assets/js/16.487f9c88.js"><link rel="prefetch" href="./assets/js/17.9ae2b89b.js"><link rel="prefetch" href="./assets/js/18.801c9b12.js"><link rel="prefetch" href="./assets/js/19.867ef46b.js"><link rel="prefetch" href="./assets/js/20.ec371d7f.js"><link rel="prefetch" href="./assets/js/21.73f810bc.js"><link rel="prefetch" href="./assets/js/22.8c016772.js"><link rel="prefetch" href="./assets/js/23.9aa3d5ef.js"><link rel="prefetch" href="./assets/js/24.a6dcda10.js"><link rel="prefetch" href="./assets/js/25.2fe13775.js"><link rel="prefetch" href="./assets/js/26.2296389e.js"><link rel="prefetch" href="./assets/js/27.21f2d66f.js"><link rel="prefetch" href="./assets/js/28.3209357f.js"><link rel="prefetch" href="./assets/js/29.c7065b7f.js"><link rel="prefetch" href="./assets/js/3.9efa3b27.js"><link rel="prefetch" href="./assets/js/30.92914cc9.js"><link rel="prefetch" href="./assets/js/31.13c12633.js"><link rel="prefetch" href="./assets/js/32.b016f60e.js"><link rel="prefetch" href="./assets/js/33.ed48a654.js"><link rel="prefetch" href="./assets/js/35.5b55607b.js"><link rel="prefetch" href="./assets/js/36.f50b6e38.js"><link rel="prefetch" href="./assets/js/37.34409ac4.js"><link rel="prefetch" href="./assets/js/38.c7073f77.js"><link rel="prefetch" href="./assets/js/39.12f063e9.js"><link rel="prefetch" href="./assets/js/4.95c562bd.js"><link rel="prefetch" href="./assets/js/40.1bbd5377.js"><link rel="prefetch" href="./assets/js/41.6331a8cf.js"><link rel="prefetch" href="./assets/js/42.28acd6f5.js"><link rel="prefetch" href="./assets/js/43.905d2114.js"><link rel="prefetch" href="./assets/js/44.041132c5.js"><link rel="prefetch" href="./assets/js/45.d1a66b92.js"><link rel="prefetch" href="./assets/js/46.1c9100fe.js"><link rel="prefetch" href="./assets/js/47.3e75f768.js"><link rel="prefetch" href="./assets/js/48.7d7248fb.js"><link rel="prefetch" href="./assets/js/49.8d465809.js"><link rel="prefetch" href="./assets/js/5.a1a0df33.js"><link rel="prefetch" href="./assets/js/50.4aa56564.js"><link rel="prefetch" href="./assets/js/51.59674bf5.js"><link rel="prefetch" href="./assets/js/52.f3990683.js"><link rel="prefetch" href="./assets/js/53.092fe0ad.js"><link rel="prefetch" href="./assets/js/54.ac62e2a7.js"><link rel="prefetch" href="./assets/js/55.3530fa5a.js"><link rel="prefetch" href="./assets/js/56.6e9bc6f3.js"><link rel="prefetch" href="./assets/js/7.bc868936.js"><link rel="prefetch" href="./assets/js/8.ce0f4f25.js"><link rel="prefetch" href="./assets/js/9.a57a9cf0.js">
    <link rel="stylesheet" href="./assets/css/0.styles.f4f644f3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Gordon</h3> <p class="description" data-v-59e6cb88>会思考的芦苇。</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>Gordon</span>
          
        <span data-v-59e6cb88>2018 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><img src="./logo.png" alt="个人博客" class="logo"> <span class="site-name">个人博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/./" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      计算引擎
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./计算引擎/flink.html" class="nav-link"><i class="undefined"></i>
  flink
</a></li><li class="dropdown-item"><!----> <a href="/./计算引擎/spark.html" class="nav-link"><i class="undefined"></i>
  spark
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      存储引擎
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./存储引擎/ElasticSearch.html" class="nav-link"><i class="undefined"></i>
  ElasticSearch
</a></li><li class="dropdown-item"><!----> <a href="/./存储引擎/hbase.html" class="nav-link"><i class="undefined"></i>
  hbase
</a></li><li class="dropdown-item"><!----> <a href="/./存储引擎/redis.html" class="nav-link"><i class="undefined"></i>
  redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      云原生
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./云原生/Docker.html" class="nav-link"><i class="undefined"></i>
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      中间件
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./中间件/kafka.html" class="nav-link"><i class="undefined"></i>
  kafka
</a></li><li class="dropdown-item"><!----> <a href="/./中间件/Sqoop基本使用.html" class="nav-link"><i class="undefined"></i>
  Sqoop基本使用
</a></li></ul></div></div><div class="nav-item"><a href="/./tool/emoji/我的常用emoji.html" class="nav-link"><i class="undefined"></i>
  工具
</a></div><div class="nav-item"><a href="/./aboutme.html" class="nav-link"><i class="iconfont reco-account"></i>
  关于我
</a></div> <a href="https://github.com/GordonChanFZ/gordonchanfz.github.io/" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="./avatar.jpeg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    Gordon
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>30</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>47</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41><li class="social-item" data-v-1fad0c41><i class="iconfont reco-github" style="color:#e15b64;" data-v-1fad0c41></i></li></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/./" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      计算引擎
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./计算引擎/flink.html" class="nav-link"><i class="undefined"></i>
  flink
</a></li><li class="dropdown-item"><!----> <a href="/./计算引擎/spark.html" class="nav-link"><i class="undefined"></i>
  spark
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      存储引擎
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./存储引擎/ElasticSearch.html" class="nav-link"><i class="undefined"></i>
  ElasticSearch
</a></li><li class="dropdown-item"><!----> <a href="/./存储引擎/hbase.html" class="nav-link"><i class="undefined"></i>
  hbase
</a></li><li class="dropdown-item"><!----> <a href="/./存储引擎/redis.html" class="nav-link"><i class="undefined"></i>
  redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      云原生
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./云原生/Docker.html" class="nav-link"><i class="undefined"></i>
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      中间件
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./中间件/kafka.html" class="nav-link"><i class="undefined"></i>
  kafka
</a></li><li class="dropdown-item"><!----> <a href="/./中间件/Sqoop基本使用.html" class="nav-link"><i class="undefined"></i>
  Sqoop基本使用
</a></li></ul></div></div><div class="nav-item"><a href="/./tool/emoji/我的常用emoji.html" class="nav-link"><i class="undefined"></i>
  工具
</a></div><div class="nav-item"><a href="/./aboutme.html" class="nav-link"><i class="iconfont reco-account"></i>
  关于我
</a></div> <a href="https://github.com/GordonChanFZ/gordonchanfz.github.io/" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>hbase</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>Gordon</span>
          
        <span data-v-59e6cb88>2018 - </span>
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">hbase</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>Gordon</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2022-8-8</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>列式存储</span><span class="tag-item" data-v-8a445198>近实时</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="hbase介绍"><a href="#hbase介绍" class="header-anchor">#</a> hbase介绍</h2> <p>HBase产生背景介绍:</p> <p>​       由于 HAOOP 不支持随机读写的操作, 仅支持顺序性读写操作, 适合于进行批量化处理操作</p> <p>HBase是采用 java 语言开发, HBase基于HDFS , 是一个 支持高效的<strong>随机读写能力的noSQL型</strong>数据库</p> <p><strong>HBase支持三种方式进行查询数据:</strong></p> <ul><li><strong>1) 支持主键查询</strong></li> <li><strong>2) 支持主键的范围查询</strong></li> <li><strong>3) 支持全表查询</strong></li></ul> <p>HBase本质上就是一个存储容器, 不支持多行事务, 仅支持单行事务, 不支持SQL语句, 数据存储格式都是一切皆字节</p> <p>HBase集群, 可以向hadoop一样, 通过横向扩展方式, 来提升HBase处理和存储的能力</p> <p>HBase的表具有以下特征:</p> <ul><li><ol><li>大: 表支持存储上十亿行数据, 上百万<strong>列</strong></li></ol></li> <li><ol start="2"><li>面向列: 数据是面向于列(<strong>列族</strong>)式的存储方案</li></ol></li> <li><ol start="3"><li>稀疏性: 在HBase的表存储数据, 如果某个字段为null, 并不会占用磁盘任何空间, 所以可以将表构建非常稀疏</li></ol></li></ul> <p>应用场景:</p> <ul><li><ol><li>数据需要进行随机读写操作</li></ol></li> <li><ol start="2"><li>数据量比较的大</li></ol></li> <li><ol start="3"><li>数据比较的稀疏</li></ol></li></ul> <p><strong>hbase和其他软件的区别</strong></p> <p>hbase和RDBMS的区别</p> <ul><li>HBase:   以表形式存储数据, 不支持SQL 不支持事务, 仅支持单行事务操作, 数据存储是分布式存储 ,<strong>存储是结构化和半结构数据</strong>,不支持join</li> <li>RDBMS:以表形式存储数据, 支持SQL 支持多行事务操作, 数据存储中心化存储, 存储主要是以结构化数据为主,支持join</li></ul> <p><strong>hbase 和 HDFS的区别</strong></p> <ul><li>HBASE:  强依赖于HDFS , 数据<strong>最终</strong>存储在HDFS之上的, 支持高效的<strong>随机读写</strong>操作</li> <li>HDFS: 分布式存储容器, 适合于批量化数据存储, 不支持随机读写能力</li></ul> <p>说明:</p> <blockquote><p>注意到 HBASE 和HDFS 既有联系 又有矛盾,  HBASE基于HDFS , 而HDFS不支持随机读写, 但是HBASE支持随机读写</p></blockquote> <p><strong>hbase和hive的区别</strong></p> <ul><li><p>HBASE: 基于hadoop的软件 , hbase是nosql存储容器, HBASE<strong>延迟型较低, 接入在线业务</strong></p></li> <li><p>HIVE:  基于hadoop的软件, 数仓分析工具 , hive延迟较高, <strong>接入离线业务</strong>, 用于 OLAP操作</p></li></ul> <h2 id="hbase部署"><a href="#hbase部署" class="header-anchor">#</a> hbase部署</h2> <p>hbase的安装操作</p> <p>安装HBase的易错点:</p> <ul><li><ol><li>修改hbase-site.xml的时候, 没有检查 zookeeper的目录位置</li></ol></li> <li><ol start="2"><li>没有将 htrace-core-3.1.0-incubating.jar 放置到hbase的lib目录下</li></ol></li> <li><ol start="3"><li>没有讲conf/regionserves中的localhost信息删除, 以及此文件存在空行</li></ol></li></ul> <p>如何启动HBase:</p> <ul><li><ol><li>先去启动 zookeeper</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  <span class="token comment">#第一步: 三台节点都要执行: </span>
  <span class="token builtin class-name">cd</span> /export/server/zookeeper-3.4.6/bin
  ./zkServer.sh start 
  
  <span class="token comment">#第二步: 通过 jps 查询 三个节点是否都出现了以下这个进程</span>
     QuorumPeerMain
  <span class="token comment">#第三步: 三台节点, 依次检查启动状态, 必须看到 两个 follower   一个 leader</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="./assets/img/image-20210309102636194.ebc44af5.png" alt="image-20210309102636194"></p> <ul><li><ol start="2"><li>启动 hadoop集群:</li></ol></li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">  1)</span> <span class="token value attr-value">在node1的任意位置下执行:</span>
     start-all.sh
<span class="token key attr-name">  2)</span> <span class="token value attr-value">检查 三个节点是否都启动</span>
<span class="token key attr-name">     node1</span><span class="token punctuation">:</span>
         namenode
         datanode
         resourceManager
         nodemanager
<span class="token key attr-name">    node2</span><span class="token punctuation">:</span>
       seconderyNamenode
       datanode
       nodemanager
<span class="token key attr-name">    node3</span><span class="token punctuation">:</span>
        datanode
        nodemanager
<span class="token key attr-name">  3)</span> <span class="token value attr-value">分别打开 50070 和  8088 的端口号 检查</span>
<span class="token key attr-name">      在50070</span> <span class="token value attr-value">检查是否退出安全模式</span>
      三个datanode是否存在
      
<span class="token key attr-name">      在8088端口号,</span> <span class="token value attr-value">检查 active node 是否为 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li><ol start="3"><li>启动 HBASE</li></ol></li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">  1)</span> <span class="token value attr-value">在node1节点上, 任意目录下执行:</span>
      start-hbase.sh
  
<span class="token key attr-name">  2)</span> <span class="token value attr-value">检查: 在三个节点依次 通过 jps查询</span>
<span class="token key attr-name">     node1</span><span class="token punctuation">:</span>
         HMaster
         HRegionServer
<span class="token key attr-name">     node2</span><span class="token punctuation">:</span>
        HRegionServer
<span class="token key attr-name">     node3</span><span class="token punctuation">:</span>
        HRegionServer
        
<span class="token key attr-name">     此检查,</span> <span class="token value attr-value">如果第三步正常, 不需要在检查, 如果第三步一直无法显示, 请在2分钟后, 在此查询, 是否有减少进程</span>
     
<span class="token key attr-name">     如果那个节点没有启动,</span> <span class="token value attr-value">请查询其日志文件:</span>
<span class="token key attr-name">         日志存储的目录</span><span class="token punctuation">:</span> <span class="token value attr-value">/export/server/hbase-2.1.0/logs</span>
<span class="token key attr-name">         查看两个文件</span><span class="token punctuation">:</span>
             hbase-root-regionserver-node[N].log
             hbase-root-regionserver-node[N].out
<span class="token key attr-name">         查看日志命令</span><span class="token punctuation">:</span>
<span class="token key attr-name">            tail</span> <span class="token value attr-value">-200f  xxx.文件</span>
  
<span class="token key attr-name">  3)</span> <span class="token value attr-value">登录 hbase的管理界面: 端口号  16010</span>
<span class="token key attr-name">      访问</span><span class="token punctuation">:</span> <span class="token value attr-value">http://node1:16010</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><img src="./assets/img/image-20210309103059604.e70ffe36.png" alt="image-20210309103059604"></p> <h2 id="hbase的表模型"><a href="#hbase的表模型" class="header-anchor">#</a> <strong>hbase的表模型</strong></h2> <p><img src="./assets/img/image-20210309105950550.6b7b84ef.png" alt="image-20210309105950550"></p> <ul><li><ol><li>Table:  hbase的表, 在hbase中, 数据也是通过表形式组织在一起, hbase可以构建多张表</li></ol></li> <li><ol start="2"><li>rowkey: 行键(主键) 类似于RDBMS中的PK , 保证唯一且非空  , rowkey仅会安装 <strong>字典序</strong>方案进行排序</li></ol></li> <li><ol start="3"><li>列:  列族 + 列限定符(列名)组成的</li></ol> <ul><li>列族:   在一个表可以构建多个列族的, 每个列族下可以有多个列名, 支持有上百万个列
<ul><li>注意:
<ul><li>在建表的时候, 必须要指定列族</li> <li>在建表的时候, 建议列族越少越好, 能用一个解决的, 坚决不使用两个的</li></ul></li></ul></li> <li>列名:  一个列名必然属于某一个列族的, 列名不需要在建表的时候指定, 在后期添加数据的时候动态指定</li></ul></li> <li><ol start="4"><li>时间戳:</li></ol> <ul><li>每一个数据都是由时间戳的概念, 默认为添加数据的时间, 当然也可以手动指定时间</li></ul></li> <li><ol start="5"><li>版本号:  是否需要保留每个数据的历史变更信息, 以及保留多少个</li></ol> <ul><li>默认值:  1  表示只保留最新的版本</li> <li>版本号是基于时间戳来记录各个历史版本的</li></ul></li> <li><ol start="6"><li>单元格:  如何确定一个单元格</li></ol> <ul><li>通过:  rowkey + 列族 + 列名 + 值</li></ul></li></ul> <p>说明: 在建表的时候,必须指定二个参数  一个 表名  一个是列族</p> <h2 id="hbase常用操作"><a href="#hbase常用操作" class="header-anchor">#</a> hbase常用操作</h2> <h3 id="hbase的相关操作-shell命令"><a href="#hbase的相关操作-shell命令" class="header-anchor">#</a> hbase的相关操作_shell命令</h3> <h4 id="hbase的基本shell操作"><a href="#hbase的基本shell操作" class="header-anchor">#</a> hbase的基本shell操作</h4> <ul><li><ol><li>如何进入HBase的命令行客户端</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  <span class="token punctuation">[</span>root@node2 ~<span class="token punctuation">]</span><span class="token comment"># hbase shell</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="./assets/img/image-20210309111251971.df9bc4ad.png" alt="image-20210309111251971"></p> <ul><li><ol start="2"><li>查看帮助文档的命令</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  hbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:001:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> <span class="token builtin class-name">help</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="./assets/img/image-20210309111619910.ffa88e2b.png" alt="image-20210309111619910"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>  查看某一个命令如何使用:
  	格式: help  '命令名称'
  	
  	hbase(main):012:0&gt; help 'create'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="./assets/img/image-20210309111908996.bea0d5e3.png" alt="image-20210309111908996"></p> <ul><li><ol start="3"><li>查询集群的状态: status</li></ol> <p><img src="data:image/png;base64,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" alt="image-20210309111935198"></p></li> <li><ol start="4"><li>查询Hbase有那些表: list</li></ol> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXUAAABqCAYAAABDCsEyAAAWg0lEQVR4nO2dwWq7zhbHv//LfQtbaNfzAEMWBbN3OZsg5AV0KQh5gIDgUvnvC5KNS/cVCjf4AC7uf9PCr/Mc9y5GE2OMUWPaxJ4PFH6/NuOMk/F45pwz5/z13//+938AsN1ukWUZCIIgiPvl3/Vf/P333z8xDmIsDA+pwwEAma/DTX54PMS0ofV2c/yr/c8GvDRFmnowOl9ySJs7hhmwvQhRmsKb8g0bHtI0QuTZMNhPD4YYh/JZPf6Z9FqeOGeEOnEaBsOLkIYOBNeg/fRwvgUNGhdwwhSRZ+C6sl3Nb7QTNFGPPhkM20MURbD7DJLZRX8923Ud0+D7IYjuHJlfiG4YXgi165SQ2Qbr1wR5/tOjApC40K+xBU5c6B8MxnKFBdegcQdh9ATLDDD+bRvwIgf84E1Z9vkC33RxdIvMgD1/wUzwygtW9uiTwV6JK72cB9zPt5DAPVgsDHYUQvSZhGutN2IwpKkPgNlRIdAz+JYJ070RgX5t8hyJa8K0fGQSgCawGl+lheEVAlDG8C0duq5Dt3zEEoDG4RzZBhjslQMxewCyGLFfjK8HzF71E2Y96H8/xB4GO7rW7mmakFDvC7OxEhoAidhykfwGYV4nT+CaPjIAmliN+7AxG4tiBxSvg/385gmCok/wRa3PHIGpQzdNmG6AIPnAn559roSmXgg9XwZdrt3/fghiOP3ML8yGtxK7baSUMTbVhdqlTRZj83qiDWMw5kssZhzaTmuSkNkWa/f0Np8ZNpaLGbhW2XhLia+vLd5P9mXAWy0O27SNrcBYqi26jNcITn7OgJc64DKGZb5h7q0guAYZWzCDHDA8RA6HBonMNw8jBnrPQdHX0e8z+HrTtr78fPH3Id8pACDBa7wAFxrE0kBwNuyhurWXiC2zcf7YfKZMINmm4e8J3jMHnGuYzRmCUbZHhdlFxrDcN8wj0b3dNe6H2fCWOL1uf5y+621Pn+fU8NJiN1yiQYQpDr+d833+Rrpr6oaHNBQHdkFNE3BW9mlnT1MbLuCETZExBrwwhCOqwgwonXNh1NwPsyOEjjhYKGpsGjgXeHluHlcUOsdtuIATtm3zDLwUWtf2rcsT94hlFEIUE6CJFWzDLgS6uje+qN7XsDkYzJDvtEIebApN82W0SKfnRzUY+eej8e8ff5QqrT02fbH9UWYXpUVfQ4YOuZ+H0hkdeZOJNBr0nBKD6KipczjOoSbLDBsrR0DTZpizoMGmXLbxsXYT9cAwA17ogEPZEZO6diczxJtXvCX57gHb9/OIZ6D24DHMZ8oUkvlruNVXPWNgz3M8158lZu+05NhfI9i1YYXzs0XzZE94AAC5RSeZrnGlEVsuPuYRQqFBOALIfFjuB+ZRCFG/r95zUHd2ndKk6gz5Tut84I8EuPaAJ3Y0sAEwPD2of319Nl8s//wCoAEPT7i4y8LsImOrZdd1UQf97ycPsLY+sVwtwDUOJ0zhyAz++lZMfUPWW//nNHH1QgMvd0Snd0PEIZ3NLzLzYVYEXZ68YbsQrc6lo8MIeQLXf1GHFfgLDCSVrVMC1zwWpPt+2gSHBjzVG+bI8/zo46X5JPNNBAfd5UheYyy4gHZKYDw/Kg3767OjMKnY3Z+Lh1fGsNwEORjmR5+/ZA76M+Q7rY0MSiZpeDx+2xx9NjB1BINHOzaF2SXzoQ+SFNe7nzwv1gEzYC8XELwq3F+R3K1XvvtzSgyno1DPsDlpMz31QGd4b2ry8QcS/GToWJPd7TQ5gk0G4XBwESIVyva8eX07sfD3mhN3UqTOqVtq0ogH0KDRy+3b2ev2m4OhDPlOp4Myu2TwG16iN0OeIHATBGAw7CUWgsMJOZxiNxfchuregb7PKXEJNxT9okKXmuxurSQudMtHJiX2h2NCpGkEz64f7njG402fEho4B5Oh0PwBPDw1G5PZ3p4x/J2zi2DicA5OUpaOT+WUuzyMbqz7yZEELkzdQpxJQOMQToj0ng4v9XpOiUu4mcNHhlc8UMUW82O3JetwICLfmy0YMzBfLiC4Bi4c8EdA32mkpQ14oH2u3GWMYc9t4KI5+BHKnY/ECT9gbz7UF1Q4Do9n+Jzj8dYY5372mroKtrk3Tb2g83NKXMK3a+r7EK/3ij29jCrJ1Om6C2xseZ4gcE3oVqzOExYCuPhroTmpELL+F/+Eaj7DkObtjDcH30e58/nCCT9gb/K3rfreGmO3+0YfneokgKkXh4AOfqwiTl0itnTo+uWOuYvup8grlKZFRJTM4FsWdNO9P4Feo/05JS7hikKdw4k82JWYLGZ4CAt1MzswuCsNGuBYVFc+YzC8/Um/oyg2ZsMr+mAHK4LBWM4a7fbJu0ovrIlQ5d6orSTGDNj2qaRVCVTzgS+FVgbOwQ/C7IWKejh4QZ/8dHEy8IxZIw+wKeZYrCrfAzNgR0WURWPM93dzvfthzIAX7fMKQWbqJGrxsr87BjyneyqK2LJupqHXQBPXNb9oHMLhEDWHpMz8WorOHG9bCSE0aCJEenDCQEJKqeJZnRTpIj7IN/KgcXCHo/nIiES2qcUfJy6sJxVeqHEHIW/ylkrEb81xDbsIGbGC/TZmiNXwOfgZDCzLk7Wv426bE9fHS+SAawJOKHDwDckM/tE2/ZR56vjAyk+kh+11P8zGKiwOuMkMm5sJZbyM3s9phZ0JizsIa9ENlO73mOtp6pmv8ltUk3BIicy3DsLoSvLAhOVnBymYZBar3CrmpjmXRx5g7ceIM1lL3SR3bZu+8Dwwd2Nrahf7LadF8wBrlbQDIhz3cMigOfgJWJGgCudO1g4lgWta8A++HwmZ+bB+LPnVJfS7n69M5YgxzWkI9KHP6b65CSvOIOvrX8p+6SB+CX/VKx9RkYxu7I8x31iWxmvCKlkaARVz/+M7BoIgqtxQSON9kbhK89qlUA0nXljA8JCG6sStCtDxSaATxA1yMyGN94dKQ5sUp/5m/ObiDa9AeWjkVpNNEQRB5heCIIgJQeYXgiCICUFCnSAIYkKQUCcIgpgQJNQJgiAmRGv0ix2l/ZJInYhb3sV0n4xrbkm0LyWy7QavQdLSrk9Zqy5J/alMFkEQ98n1NfVd4V0MS4SlqSxu4aSDwAmCIMahVVNvquzCbJU3ZVdE+QwqK6NElgG8rVQcgGMNmYEZS4SNlZIuhbRxgiCmx5U19SLpU7aB6w4pUpwjT95VO4IgCOIs1xXqxgs4yjS7ZdpajpeOUp0xA7a3KBJHvZJWTRAEcYYrpglgsBcckDHKzKxl2lq+sMGSJoepKi9WT00a++srFAVo6AsAmWUIgrhnrqepszlmWq3Qcv6GrUQ/h6nGMXuZj5riliAIYqpcTVM3lgIaJOKDMl37quLNDtOqlszA2DOWqwU4F3D4DE9D6oqehDRygiCmx5WEell78bjyzI6z0Sw58jyHayZFnPu5yBmCIAjiOuaXwkHaTq0WZwtlXVEqTksQBNHOFTT1vYP0ZBEFZiMKBbTZHCzIWwstMGZgWZ5e+vqkogwEQRAtjC/USwdp/HZaAOdv2EoBoQksjaBSn/BURArQXuD4TLtGW3xbG3Q+XEUQBHFLjG5+KR2k27c2gZjjbauqyPKzQesSUmbwR3WSEgRBTBOqfEQQBDEhKPUuQRDEhCChThAEMSFIqBMEQUwIEuoEQRATgoT6pTADthchSlNcXMfD8JCmESLPplw3BEEMokecOoPhrbDgGlSFOwmZbbB2m8rM/QbUfDh8X+/va5TratC4gMMFFpn/i+eXIIghdNTUDXhRCGcn0AElfByEkdej6MV0MLywEOgSMvNhWTouTkuTuNAtC34mIYFifm1KjUAQRGc6CXXDc6DkVwzf0qHrOnTLR6wkD5xfVj+U2ZEqpA11KMp0E+RjqdN5jsQ1YVo+MglAE1h1zJFDEARxXqjvCkdLxOsAu1oVeYLA9IsSdQv8GrnDbKyE0tBjy8XotTtK8gRuMb+aWP2e+SUI4iLOCnVVOBpAtmk4pl+WqNMw61z1orU32FGKNI2UEGMGvChCmqa7n6ZNAWv4XBR5sA+8jbVrdxlHg+lDpUEAZLzulLaAGXbD2CJ4nZyhCV7Vdghi+bt2QwRBDOOsUH9+LNyifz4a//7xR+Vw0R6fRxwWgGcbUeiAa1rrx5gdIWz4nKZxCCdEtJPgOT6/AEBDdajMLgTugQB/xqOGhqyQZZ74c7ltKmNzRMPYNHAu8NJhyvJgSMFugiB+K2eEOsPTg/rX12ezEMs/i5iPUXOdaxCOgCazig0/hjwaXmkKgXJW6sVndeVsBA5NF2Ve9oencqQM81khcLVH7GQse8IDyoLZ1f7U7yG3OC/Ty2tLZL5VjKu8FwuWH+O9+T1Z4wPqvfmAJzLBEARxhtuNU898WGbFZp0HMPXDCJPSFAIZ10L/lLPRL0xDO9PFxx8VVbJT1ZVGnsUZDoTm8yM0SBxtTp4fVX+98rprwFPtV3mOPAk62uObdxgEQRBN3KhQV7nT22XefheRbZqLcRxVTMo/VSx5+X/jBRwZ3t/ekVX8AuzpAcAXTmxOOqLqsQIAF2HlUBGp2wRBXI8zQr3UEqsmi0PY3j5zB4dkClNGYWoxXjgg/+AjV78vNfjnR039/tLuEhe65SOTytmpcQEnVALesw2KPycIYnTOaurnHKHnHKm3RfmSesATU5q+3L4hL4t28BcYhTNU/b5GYb7p5T/IE7imCV3XYVk+YhV8Di4chJ3i+8sdSYM5iCAIosZZoZ6/bZUga4xF7xcNMi77XQRfNJ+6NF6Oa5uql5SGx/kcM20/buXwfcCToZyhjY7h0nyjzTAkgjPPEwSuuXf6dno5FJE4F5uDCIL4DZy3qecBNqXDcVWJrWYG7MiBOljZFMN+fZLXQjhqAiuvas5gMLzy1OdhbdMyWudhNoNWFZRJYVdfzJqdpOpD3ePymQ2viJU/NKMzGMsZ2gM1q5dZFHP8jkuzEBAEMX06JfRKXB8vkQOuCTihOCzWLDP4Fyc9GUgeYB3PEIoiD016XEb66JBQ8o7M4Sp2PNtUBKWyq6uY8uykVpy8xlhwoUIl39rrpj5oHNzhEI1/lScdvHsMLMvTqyeLbhMEQezpGP2SwDX3iaYURSIr0/1RDTIPTFg7Z+QeKTPEvgXzSOqWcd/1OPR9MexWrTgPsC5PeYbe6VOheYC1HyM+mDNAzVsM3zLbE4AxA16xE+p6epUgCIIKTw/E8NKdeUdmG6xfR0rqxRiMZSXFsYxhmec0eoIgCMWNxqnfPolbnlotTD/hSEUywn2KY7UTIoFOEER3ehTJIA5Rp1YTZsBeLjDjXV2f55CQ2Rab164nTgmCIPaQ+YUgCGJCkPmFIAhiQty5UDfgpSnS9HeW1CN+J4Z3urYAQZBNvRffVXx7WD/M8LBacOzSt0uJbLvBa3A+OZphL7GYPWC7bo+9v6wNQRDXhoR6Z4q48QN/aFl8+wX+aPH6Q/phsKMQou6r1TRwscCft4ZwS2bAnr9gJnjldOtRxvrL2xAE8a20CnU7So8FRRsTjqk+KL5d1mplBuyVA1EU305GOFk7pB9mr4rvSSLz13DLsBnGYMznDb0wdb3iIFT8/onHRf1FMkYbgiC+G9LUu9BafBt4TB1wvoDNksvMEEP6qVR/yvzaKdU8R9J4IipHYOoI9h3DXgC8dXBD2hAE8d20CvXDh1jB7Aih0CDjpiP4tc8yA8vV4qBGp5QZtptXBCeCsIe0abxOMc4xdg/ni2874Fwl+QouOFY6pJ99G7897cCdwQwby8Wstg4kvr62eD8Vw88MePW1k8XtMf+VcwZVk1LbWYHua9SAlzrgyODrLhJmw1uJ3e5GyhibdfvYDu5HZojXLj5PfFw1GTBvxKS4mqa+E6o1VEFojtnT8UthSJvWvkcyB3Uqvs21Iuf88N7697OvsXpUT/WOOb0ONGiaAN4bhJPhIXL4UfZLjQs4fIYn69iZe6qfsqDJ4s/b0U5n8Bo1PKQOr7URcFbAR9MaZTaiUBzej8YhwrRhvOfG1jJvxOT4NwD89ddf4161VhB6H7Whojocrh1nORzSpgnDG1Wgdy++re3yow/r85J+ilTBdU3wYB7vhWrB7op/AAAYA3ue47n+zmN2IdAlYn9d0ZYZDE+lXRBLA0F1K1NZb5AZ/HWlHi4YmDHHkTdi8BrlcJzDXQMzbKwcAU2bYc6CmiObwV7t6+8e+FaWC4hGR8aAeSMmyVXi1HsXhB7Y5rhjpa1N2WF7yL6ABp49pKE4cFyqdMT3GsPfvWB3uXYy36yZP/J9zv1aQZLqejsocF60y5PgyNx3yRqVmQ/T3Y89T96wPRU4ZCwLx3cG36z5Vnb9nOLSQufEvfOv0bX0IQWhB7Wpd1toa79GoFfhEIsHZL4FXdfVj+WjKHsN565OqfQt2L1fO9xRh3IOfkoTRlGXtt7mfE777m1Or9EMm5MODw31SpG7ur+9CqNQoXNCcecnSkse8LIUR/bUcfiu4ttD+tnnhpfb2pY7T+CWZfP4y31p670Kdpe7lT4MafN9DK77S4XOCUwmpPEL7+4a714IhwuEEUbV1s85Qscqvt2/n+JFoLXXVL1h+XWaPIFrKj2VMQPzwpbMhQP+COg7zbesWCURNzhDmynbXGvw4zDI8d553oipcgVNfUhB6GFFpOv9Jq4FVZRIIIyarzOE7yq+PaSfj0JVb9TumSqiDfkH9+wjay/YXa6dDnVjj9qcXm9D2pxfo90ov9NmU+PeDHSOYYXOiXvnKuaXIQWhh7Q5JkdgXkGwX1R8m8GOShtv1CCsL+snDzbIAGgiRFTdYjMDXhFBIbdv9+NjGFCwu7RlayJE5Bmom5EZM2Db9kHpwep6CyOvZntmqk2tVuE4a/Q8u5e7JrCqLBhm2PCa0kEAoxU6J+6fv/7555//AcB//vOfTvnUux4+Oh0DrGhq379N7XDH/kr7XCijOU6bcrKUA8tacr9U87J0MREM6KchBnrfpun+T+SKaSDz9eJQ05A2A2iKzz5AHp+cxfm10zT3Z9tk/pG5ot8aPbU+gep8Ns2Xekk09CNjxF8CgtfaDZw3YnpczVHavyD0sDYner+Cxv5dxbcH9JO40K24Nm8SWXyH5fAGFuzOAxO65Z9sF/vHxbvPtfEbNO7x1mg7iWvCirOGNRA0nyi9tNA5MRl6a+oEQRDE7TKRkEaCIAgCIKFOEAQxKUioEwRBTAgS6gRBEBNiIidK0RLWVw8nK8PMGj55SSgeQRDEDUCaOkEQxISYjqZecL4iUwJX73eghCAI4l4gTZ0gCGJCkFAnCIKYEOMLdWbD8w6TJxEEQRDfw1U09Qcu4IQposgj4U4QBPGNtDtKz2Z+q1JmwQuwtj6xXC3ANQ4nTOEcFfYlCIIgrsFVNPU8T+Ca+wx4KIR7epS3miAIghiTdk09D2DqwfCr5wkCN0EABsNeYiE4nJDDkRnizetRtXaCIAjiMr4p+iVHErgwdWunuQsnROpRMVyCIIgxuYJNvfFCO01dFQAiTZ0gCOIaXPdEKTNgF9XMAahybOtXJDkJc4IgiGtwFZs6Y0YR/VIV5hT9QhAEcW3G19SZjVVhspEyw4aEOUEQxLdxFfPLVxZj8xqQMCcIgvhmxhfqeQDXHf2qBEEQRAcml3pXEyFSUf1N9yIZBEEQ9w5laSQIgpgQ09HUExd6p1J0x0UyCIIgpsL/AUhT7xNFdfK1AAAAAElFTkSuQmCC" alt="image-20210309112022247"></p></li> <li><ol start="5"><li>如何创建一张表</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  格式:
       create <span class="token string">'表名'</span> , <span class="token string">'列族名称1'</span>,<span class="token string">'列族名称2'</span> <span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAsMAAABWCAYAAAAquJubAAAgAElEQVR4nO2dvYrrPPe3f8/L/yw0AzO1DkCkGMj0LtUEQ/pNXBoMOYCAwaXNbh8GTBqX7scwxaADcD0bZnQcz1vYTmzHTuKPfM66YMN9Z6JIWpKs5aWltf7z3//+938gCIIgCIIgiF/I/ymlLt0GgiAIgiAIgrgI/wcAf//+vXQ7iCEYLhJbAACUN4UTX7g9BEEQBEEQN8L/2/3IgJskSBIXxtE/06fMDcMNWG6IMEng3nOHDRdJEiJ0LRj80o0hiFumeEYOe04abvYbd/3cIS7EOHP0NPRsG7fghmFeLv8XhghdA+NtaeeSG8nglPzfpRtwW3AY7hK2YJtPfi7YmvPAwISELSRmysPKiZGerK5MvjPBkElYQ6v1kXVyGNYcs8kDPlcm/NYCHFYYQLLmv+poAbO9cEeG9Ie4L77wrQHBAOhvfF26OYM4xzolMs4p62ueoz3aVjoxrcAYGHvBM9pkeK1yO7EMOIfxOsdsIsCK/VFrqM813vxD8+2a585xkDLcAcMNkM2r/IH0FiO9hod57GB6CteI2MH0i8OY5w9jYSMIn7Aw/RMocwbc0IaoKKlFnS/wTAc7XeQGrNcXTKTAtpgevWX96NEf4o5J8e8HAAPw8++GX4bubZ1eM+eW9TXP0e5tM15yJVB5WFReHji48Vz98k3I7ZQy4LCWDUYixiCkDTE5tO9f89w5jgY3CaIJboW5IqzgLUyYzpUowqcmTRE7JsyFB6UBMImlNb7PhOHmD30dwVtMMZ1OMV14iDQAJmDvnAtzWEsbcvIAqAiRl7fvWHSExTSvp/RvLKtw9/4Qw+CwwgRJEuIE03MUvr5vXwE8+zrtzDXPg25tu4Ssr3mOdmsbx9MDAGhEb3WrZoo0riqGtyK308kAwI+GijwsFtv9cOGp7JXgiH3/mufOMZBl+Bi4haVkADSihYP4NyjBddIYjgm4iQ0hl7DeRzzi5BZmucU9Wvlb+aYxfBN4TGwIMYPF41KdKXxzCn/7I7BmQMOB0Pnp1R/it6C/b/EQEfe3Tq+ZC8v6mufo+G27PbmdRAaOuftp7GD1FCKQDOzxGTjC5nvNc2cfh5VhbsFdys1RjdYR1uXFeUwZFWH91lKmyU8FGlp9YuW0m+W5YWE+m0Cw0qGG1vj5+cRHa10G3OWsWmZf23KMuUT2gr7ao7wYmaKoIyzMd7y6S0jBtj6ohovQFmDQUJ5ZjfjQWQZ5XTufK3jTpuP34vv53/uMKQAgxls0g5AMcm7APxi2ouyfqxEtmhVo/jrJjqbUuuHvMT6UDSEYJq8c/kXN8SfqD7fgztE+b08BN2DNZ5hsfBGBYs41r4ei73m/sbuWGiOZdF1zHdeC4SaousQxyCCBrHyrZV30fB70Jc3PEX/+HfHj9bZphWjl4F/r9/vJrd1Hvvw8y8pf8zo99zzosv/0adulZN1pjp6Zw21r2hebZD323ZDzyY1kcDr2K8MNzteMSdhL4KvNf6SpjJCwxSOw8yAy4AZNSl12aSsI0einwq3sTWWnFGNgTAIfDQ+xjTJaKyMkbDHBU4tiAxh4yd/QP9+PGeRHzMNgo2gyuYT17xOTTd0MYmaBx0W/+smgN33GtETqr6GkDSFeYCAexe/1+TG/GtLyRvmVe+Yf+2Z6afr056G4pKgV1qvTnj60rZ9izs2+3xHv22CfLYS23FlLO3Rec2dcC72fBwM41refWwiDmnyZgAySlgLd5RZ/KNhCgE1ewf204Rk7gwCg1tty97ZOAfSaB732n45cTNanun8yBtS2C8iA43Wyfy5uuObxOYI9yrCAbVffkLlhYWlLMDbBK/cbfGaLMqWoA7x4UGc+TnHddKQVovUb3uPtA3lbzyN2l3oxOBrKW8EpP3U4B39+xXN9zLi1scpG3gr+pgzPL8XtsXTyJ2RuN584ShdmIrPALhx8vWYPTWnL3IH9C69hAFnvV2cZxHAqs67NUlynz5jWKW6NPuCJ7zSsB4VfE1rfKIs3Tjw8YZQqAYBJBInEfmtoH3r0J/WxWvzDfDmDYAJ2kMDWCt4plOKNyw+AnTo4uPGK170/kM/nctlceavX02vNdVwLsTPNX8hqlusDJ1e9nwcnh8Na5oqwjuAVJza5JV+KlleQrs+Q+A3RTEAyibnh1yz6xTNW4SPefnaRdXok55sH3fef7m27bllfL+V9scM8uCtGloExz05CdYTVnQtx7wU6rTyYzlZJSON3fB7wkVbeNLtcVnyQxnC8PMudeKnFn4vhmA78uGqZ2NaTK1yNMOCp9lGaIo13lZrCzUF5ZumBBwAp4rcocxDPHyo7PD9mG9PRNyS3fsXZAwvZZa3WUDhDZNCdPmNaJb81CobH58Pf9c3CGf9aH0h56LggQXjwVsvp+pOmMRzTzC7IKJ1dkAkSJKELg48YDXK+VbQWZl3ZztaPf0gDV161bOrDnFZdJPqtufOshUHPg1NTbD5Q8Myar6hjwmtMGNpHbine84UvZla1r3kbdPR21xFPhs2D4/cfgrhFeH5qAp09i+59Wu+xDCusWy0juSK0I52yJaHE1zc0do+iCpr8r9pJ4a8VpC0gZIBEFpa9tqPd7Vu2sBMkdluXmiywPWiwIOvP94O/200GfekzpvdG9bIE5wZec4sbkwHcfxfO4JfG8J0YfhHrUgrYgYCdW/4OKqp72a6F8vF3N5puJrfX02fNnXYtnPl50BG+GaCPzopoV7ltXJ4qp0Ic1kwAUFhf59vrSPSdB133H4K4PTauQKU7A/fOhUOrZaFmAlt22/hiB9OFB6U1tpa9AEkSwrXqWVWe8XhK/XIwPWVwNxSWZuChxezHt2eGoy/KtGZxEy9DQ56N1Z8Use/AnC42lmJpB0gGZQ0611roW8851sJ1Pw8O+Yo201duMd6yOF2Q83zeF5bpHWX8sut0fAbMg077Tx/uTdbELVEowlp5v0YRBi4cWs1w85v5WsFbveErLY759mcJA5CH+so9sUrWPSFtZHf1ikd54ePa02+msGqfyDdrkAwuwjZ24VgRVA5dBumnIHSjuFA0hg/eOP3ZWoYzt4YxLMOlLEEnpd+aO89aGPg8OBNdLkYNkVv6/gktJZiYweJfyOJ5Zdb/OtewTsdj4Dw4ev/p2bq7kjVxK2wswsqDedEj0vNzFsvwNkxM2dpQRGlQWSaddPdG87EU1r3posnPa+vjOnnt8c6e/stSLrMJ+hTfz3gyOB+FReUHY0VQSd8/s3ETs4Zg9F2jefRjk6lnBEvLoP5wA5YbIkkC2FKAaQVvscA09wkd2LKNxWnHT3RU+qy5c62Fgc+DE7MJXN/oq7o92t8yUG6pj7UCAIbJcons3lxTOK/rWKfjMd482L//9PzNu5I1cRMYbh4lRcH7ZYowMLoyLGCHLixju3r5RsCAqjgUZ2/mgMCsvNp5lou9sGbsXNLiFty8juq9Ig5jPmn0S44/sjNwJgOEroH6fSTODViWBaPxCRbjo9gsRt88e8rgghQhl47zaSwyLh3IulTakOWyNA7cgBXmUTJaNujuHTCyuVNqo7HJLlifozuFT9Yfzg24YYgksLOIAVplWadyBWcsNheDmESwczmPZ2uheSF0q6fzmhu6FkrKzbx+VF27pjfoeXBaNkpQLeMTNyy4jVbe4c+QYk4wlsWcbl0D51ynvTnxPOix//Rp223Iui8G3KR4jrr4nbk4r00GBtx8E1ReU66C+2d8NwkmIG0BWbuQoJVXu5iU3WaWMru4lFQiM2lorcEYyy43zKpO3A9MQNhiJ4h0UXbnclDsYFFkURE2AtF0W0IjevcbPs82i5mQWczgMTOvDZDBZTAwLzLxNRyjDiF2PLyENgSTsAOJygjppjfVtiPg3QDj1WQQT5jY9s78zKqpz9H+dOoPt7DM48rqU8cZTn2sokn2gsryy3n17yhvuBW685obvhY2R8vCRlC7EVWZAwOfBycl9bFWE9iiQQ46QqQkZCWG4gjPkPQdn1puQijtW9rnW6f9OfU86Lz/9GkbbkPW9wHJDcbLJjRr64VS5Q12/7lmxrUMK28bGqpAayhv0eh/kvrmNvd18XUVwVuYMM11c37w1MfKixApjeqf9aZs03il/jZsVVO5yNuTXS71sSoumgTuqBajXjK4BNyAm1sk9mfi60sMx1zAq4yPzp34R3xTTd/xWZsDWitELXO0P93686MieIspzJ1wZ+NzaC14I73odF1zQ9dC6ptYRAq6/j2t8T2wbeckdvJ+VNqUXWZpykA3/BmyDbN2OMrImdbpAE46D3ruP33adguyJoh74T9//vz539+/fy/djptgm1ZTQ6s1Vm/xEUkqbhzOYcyXmBVpe39RqBWC+B3U0rVfsCVukhyRPKiMwnTqnKg1xOnIrbH4zfsJyeCauHBotdsidrK39Cycjo0gSOBe3tnndBgukiDLxJRdVv9doVYI4v7hMNzixOe+k2wQVwR/xYQdF4P/biEZXBUXDa12e6SIHRNxnhp1cvoYVVfA2OmKCYK4OIaLxC7bYK8jyYYznV66CcTJMeAGElDe3af4bYdkcG2QmwRBEMRvo6QMaxXRyy5BEL8asgwTBEH8NmIHU/KJIAiCAEA+w2fFcLO4grfhZ1zEQewaA7EcP7H679r7fVvjQxAEQRDEGJBlmCCuiixZwiZ6RxG5xImPuGSRp3CePOBzdb2phq8HkjVBEARByjAxOjGcyvlrW0BzYpc8lnNFVnnkkvAlS7dbL8INWK8vmEhRyn51LcGprxmSNUEQBJFx2E2CG7DcEGH5yDsMEbqXSVc6jCKd7p5UujfFvfXnd2O4uXKmswQc0+k0SwigkWWL2/Hf4LCWNuTkAVARIs87cZKWa55v3dp2/bImCIIgzsUey3B2hGg3hQ9jDIxJ2PiH+I7T8xHE2eAWZnlCl2hVutmfxvBN4DGxIcQMFo9LR/IpfHOKbbJYDmuGjkkLfiEka4IgCKJEqzJsuAGKMJRaedVsa5zDeJ1jtlOqOBLXiBYmfBhwlzMItlWoG3N7893v7Q33U9Q/EdgWyeLhrpzdpBDbzHEFuznH0ZZ9qWvbmspohWjlNKZS7UPv/nSUWwVuwV3KzbHyScIx9ZH1GPUcGp+e801HC5iNzqR5xq9SNj/+OsmO3tW6wf80xoeyIQTD5JXDP3Paw3OvH25YmM8m1TJa4+fnEx+1cn3ads2yJgiCIM5PszJsuJsNplF5TVPE6YG0nc8WQlvioKuo4SK0xc73mJCwxQRPi/rlFANuYDdYZBiYkAhCjJclrXPbAHALYVDrNxOQQTJGiwYwQG47AfoLGTwCY6Vv7SPrPnQen+5yiz8UbCHAJq/gfrojU27NIACo9bbc82N+hev7q7EVX98aEAzs8Rm4lXxFPcaUWyGCBgdzlp9G4WP4i9FdypogCILoTaMybLxsNOFdRfgoGKQtAa3grZxs88qVkArcyjdLjchbwd/scjy3TDPIuQG/3gitEK3f8B5vFQ1uWFjaEow9or6Fxc40V9hqlut9+1yvtnFYy1zR0hG84gg2z1gnR8pY16s/QGe5ZQjYdn46UNyy54WCmPlWDnaV6TsPulfUb3y6yi1+QzQTkExibvi1NcTxOmEAFD7i7WdPD9l//fxrHsT03w8ABjw8gdfrOzHnXD+ZbDSUt4JT1no5B39+xXNNf+3etuuWNUEQBHF+Gi7QbTcL9TFA+VAeFqZT8sfzYU6rVmZjnikmyjNLmyUApIjfouyedr4hbYnhmA78uGpxS+N3fGYF8DTC5Z5ebTPmedQEBc+s+SI6Jjw1vF396S835U1hlsNNpTGcojPipWMc4l36zYNeFfUYnz5yS/Ge/RFiZjXOER29jWNRv1KGjSkDnmofpSnSmLKkEQRBEOPTYBl+xuNgA6ZG9HYoVudW6RZ2gsRu+VqLxbLJr3A8+rWNb98irlbR6S63sgWzxNc3NHaPwHu0aNA86FTTgPHpKrfUX0NJG4JN8Mr93N+ew5oJAArruw5M23dMU/hrBWkLCBkgkZlf9vrtHTH57hIEQRAnosEy/IXvs4QM6qt0ZyGUAlueSBEG+rbtkC/iZTmH3PowxsvXkTX1Gp++covxlsXpgpzntvPCMr2jjKf495P910OLeZ5vz/Zv4Nh+wJjGDqYLD0pnsmNCwg4CJEkI1zKGnw7cnawJgiCIoTRYhvPNggHixQDiU9k4M6VbHOvvmmO4eQIHreCt3vCVFsfXYyZ36Ne2gmu8eHMeufVhmKz70GV8hsgtff+ElhJMzGDxL2TxvLJTkzqHLm1d94tWnYFjmsZwzNwTmBt4zf25hbSR3dkc9ky6L1kTBEEQQ2lMuhF/FP6gNsKTRdcvLDRZCKPjMJDd7VNZhqh096b+5dqWb7JAiy/k9uj4/Iwvt214qqEuIf1k3Yfu4zNQbqmPtQIAhslyiezeXFM4r1xxBgAxa0gaUbRD4/P9ul6ymhlvTNPcn3u6GM93/L5kTRAEQQylOQNd7GwuEzEZIAxdGLy6a3BuwBp4bFko3UwGCF0DtSryOsqZ7goXDoFZeRfjWYKQwkr3+NxWY2mTntfbXrum17ltpU2WSSxL7eOGBfck1tdj+zNEbgJ26MIyyv1xN+GvBl2yzOkj6z50H5+h8w2by2KMsexCWZu8SoqzXJb6yg1YYR7arUWRPh+nXT/gFtx8rlW/z2HMJwf8049v223ImiAIgjgX//nz58///v792/CnPRnoCkpJA4oynUJ9oT2uaKmSym+1f19D60zpaG7b4frqMZW7tg0ADDdslpmOEP1ISNESu7knx/anu9zyxBB76tbKg3mwI1t3gn397iPrPnQdn6HzreJO0fqdTevghjYal5zOrdNtv32AsebcSddPUwzo2veVZ/aaQ7v9v35ZEwRBEOeh2TIMAEgROyYWCw+R0qjeqdPQKoK3eh983J76JqZ76oi8VUUBSn0TC09VvqtVBG9hwjTXUAcu/6W+iUWkoOvf0xrfA9sGIJNZVG6fhlYeFqY/Wga6ehuP6U9vuSlvI4PybytvcYQifDx9ZN2HruMzdL6Vw6yVk2y0tA6OuYBXkUHRvpGSmwzkpOsn9bHyovbnzaJdEe7atluQNUEQBHEe9liGCYIYTmFhb0lXfPZ2dOHSbSYIgiCI07PHMkwQxDA4DDdTQO89yQZBEARB3CqN6ZgJghiA4SKxyzbYa0iyEcOZkjpOEARBEHVIGSaIE6JVhPWbT1ZhgiAIgrhSSBkmiLGJHZARliAIgiBugxv0GTbgJgmSxIVx6aYQxJkw3ARJksClSU8QBEEQo0KW4YNk8ZZnguXxTzW0WmPlxKNmv+OWi+VEoAhbC60Qrd/gx221cBjWHLNyGWho9Zkdy+9pHDdcLGflujTU5xpv/hF92sSCPV/6ZIIgCIIgiFNxg5bhc2LADQPYG0UYABiYsBGEY1mmOQw3QSDLSi0AJiDtoD0dtjGHXS8DBiYk7KCtbRxWmCCw63UxCDnD4cy5HNZyX1IEgiAIgiCI22LHMmyFSbe0wQezat0uhptnqNIRvFVubeUGrKUNyQRs10A8MPEEt5awBbKsVytnY9HlhoulLcDkEtZ7kwX2Gyr6wNt7jHSTwcuAG9gQefrguFaIW0UKYQ3lreBsKuMwXl+Pauv4KaUJgiAIgiAuB1mG2+AWZgIANKJVye0gjeGbHhQAiBnaDLdHVoLXCcvrcCquDWnsYBVpAAyTJpNt7MPxS4pw3ra3qCUlGrewzDXZLKVtubIUsb/ftWJTXkVoq4IgCIIgCOLW2LEM++YUfu0zboUIJIOOFjAPOIlybmC+nEGUzuG1Vvjc4//ap0zj7+TtHMNazV8nmTuAWjdYZWN8KBtCZIqqn/at6RmPDAB+8K/hJ9L3T2gpwSav4H7aqT8/tR/c9sfbm9K2mdw9QkdYOO94DWXXHziuFsPCfDapzQONn59PfLT5QXMDbn3uFOHMWt2tDVjzGSYV95f9/tbHz9FaxjluwV3K7IQBgNYR1qv9bav0RytEK2dvKu9eciMIgiAIAsDIF+g2ymgNxgSkLTB52lWm+5TZW/dIbhvPj/l1ue+vxr9/fWtAMLDHZ6B3bV/IfkbgxQDiupL6/Jgpa+wRh2vhMKwlbMkaFN7CAg2oj+5uHZl7hEa08JGC47BDRXfa5wEDYxL4aFDqDBehLXZ8mJmQsMUETw0X/NrqKfytZ9/viNOR5uhO8g2AMQl7CXw1zdHN5cRKZyCDpKG9h9q2R24EQRAEQWwYTxkuHcNr5ZWiLWTRGGzBdv1f+5RpwnBHVYQBjqeH7L/qFtaC9N8PAAY8PIGjrzqcovgZYYewsNpYGblhYTkT+4tvrJAFGipawGkVlsb3F4C6tbIi+xr5GOloccLIEVt3kYovMwBwDv78iuf6Owm3ckVYI/JWJessh+Fmlx7l3IBffisozbe6jzbAwY3XXUW/9xwVsO2qlZobFpa2BGMTvHK/6uJSvpxY91GfzyBFkwLfQ24EQRAEQVQYzWfYmG838qpilSJ2THgKADIFZUiZ3Yoz6+CtXuSLHQ9KAwCDtAMkSRZPNrAlfta5b/LRMAi5hLvjyLx1x8CziyTYKsIAsugYjXGbcwVNeUdZ54fDgKfaR2mKNN61bhZzR3lmzU0hRfwWQQObF5V6mWyuOLXfzOqpu+UMmaNaeTCdbdvT+B2fbf7Wxjy/nKjgmTUf9U09bRwvN4IgCIIgqoykDG8tqWrdrJDGH/luvlFQ+pSpV5tbB29UEc6I4ZgLeEpjoydphchbwPl6wsOhstMpptMpptMFFp6CBoOQbSHZBOTsAcpb5GWmmC4KhTuLjlEmc49Q8AZGzDhMCn+dt0IGSJIQoWvB4G23E7dzR9jJ5gVi869wNcjdS+pl2ubbvnq6z1GFdavcGB6fq5/wTUUfHVI3d5UbQRAEQRB1bjiaxANe5qeKeZu7LwB4eGpWLPjWj2IEJTyzMpqFgmo6mYWy8BnW3zh82p0ijR2YuQmRyXnJ0pv5JgOA/qwdp6cxnEVuSRUv2zIb9wABu6JsBrkFk0EGCZIkHBhRIyd2MsVcZxE0snjJmYLnWkZN0Sws3V3oU+Z8HPJRb6WT3AiCIAiCqHPDGeh+8OGs8OEGsIVEEGJU6/ChC3K9lZcOGC+ZN7D+fD++X/EHlC0g8ICnjTPz1je50Qc6/Yf8z5cljeGYmV2UcwOvua+skDbEIzDdWFqLi4ddsuAVZU7V+HHodSHzaLkRBEEQBFFnJMvw1pIqZlajNapQ7LaW1D5lduuNnUUW95ZJBGHz7/Qhff/MraVNsYQNvOQxiD/fT+ScUYpz3KkOXrhWVMO1feWm4UZLd1GmbIFO/a2luvIvlzc0osUU0+lpUjKnua/sdNHk/1vMnZYYzM2/eHC+9SlzeI4eRzE+zS5BW3eNQ+yXG0EQBEEQdUZzk9hcWmISS7d8PMthuGGWZQ0a0Vs8qMwuKXzzBApx6mNdXI5aWjCKH+UGrDCP4NAYgzhrvxUWbgUH3Ai4AcsyUHbz5Ia7DbHVUgc3LFgGr/SVG6XQXDXf09RfQwFgMkBYPj7nBtw8ikEnC/SYcAtu6Gb9qciKw5hPGi3Wha8ukwFC10DdTZZzA5ZVGjdU51sQujXfWp6VMao/NM4cPczm5YtJLEsThhsW3DBozvzXQ24EQRAEQVQZz00i9bGKJggky6MT2Dtf0dGqqtj1KdNcOXxzAYQBJBvPZSJ2PLyENgSTsAOJSuv0WBfLnjCRElLu9h06wqKtjqcJpJRoKtbcthiO94LEFmDSRlAvqCOszhIxopkHJiBsgeZ0Hnr3AlvsYPEUbueOaBQEovdSCpnSfAMTsAOBnVLKq0aUGG2OHiD1sVaTPFRbgKQsCB0hUhKyIdJeZ7kRBEEQBFFh1At0qW9isbnMs0Xn0RGawnP1KdNS+wksxA2RHqChlZeF5hr8+wDSd6wjhUr3tYbyFnsV+vTf547MoDVUtKdtsYPpIqqVK8pcUGlKfay8CFFFzkAm6wjewmzMmpf6JqYLr7Vc5O0qqYfKeA0W3vHm6H5ix8QiUg1zzW/OQNdTbgRBEARBbPnPnz9//vf3799Lt4MgCIIgCIIgzs4Nh1YjCIIgCIIgiGGQMkwQBEEQBEH8WkgZJgiCIAiCIH4tpAwTBEEQBEEQv5ZfoAwbcJMESeKW0hMT10Pf8SnK7f5zaaABAIZL8iAIgiCIQ9xwOmaCIK4fDsNdYiZYngREQ6s1Vk58RCg/DsOaYzZ5wOfqNJkO7wuSNUEQRB9IGSZulBjOtBxEl8Nqy9RGXAgDbmhDVMYkT14SvsBriofNDVivL5hIUcqgp+vfInYgWRMEQfTlxtwkDhypcwthkiAZKyXzr6WcTvrIfyRzoobh5sqZjuAtpphOp1nCE40sA+CO/waHtbQhJw+AihB5HtRJdbNinh9ImX4RurXt+mVNEARxvZBlmCCI8eEWZgIANKKVj02G6zSGbwKPiQ0hZrB4XDqST+GbU2wTaHNYM6AhCzVRhmRNEAQxiHGUYW7BnQMfb6UH8bXCLbhLuTlO1CrCuq3dnMN4nWM2EWCbc0QNrT6xctrTF3PDwnw2gWClw0et8fPz2S4jbsBdzqpl9rVtW7DkHqARLY7x9ztUpr5R5qWsEIFk0NGBFMQ95ZZXcvz49KW3rK+Uen+0QrRymlM4A53Hx3AT2AJ7xt2Am9gQOtqk9eavk+zoXa0b5mOMD2VDCIbJK4efnlfoRX+2MMgggax8S8GbNrsWdJ07XZ4Hfdp2zbImCIK4BUZzk3gQEnaQIAxdGFd35JhjuEgCWfGrY0LCDprcLgy4QQBblhUGIPPDkwha3AK4FSKwZWXjAwDGGISQeHlublcY2LtlhIQdXOMR7j76yS0r2mV8+jbvnmSNzDWo3h8mIIO6UlXQfXziD5V9Y/LaMudnEADUeqtIPz/mV7i+vxqb/flyOTIAAAYWSURBVPWdncmzx6YFcaX0mDu9ngcduUtZEwRBnJFdyzC3EAYSrOHLuxRWRR+rxT/MlzMIJmAHCWyt4K2cK7K0Cdg2oJW3vV3NDbiBDYHMpy52anYgrRCt3/Aep5tNnhsWlrYEY494BmpWNI7XCQOgobwVnHLnOQd/fsVzfb/iFkJbgEEj8lbwN2U4DDeALRjk3IBfb9s101luQK/x6crdyZrDWuZrVUfwiiNybsCazyBFyyruOj7xG6KZgGQSc8NHVTzFnFf4iLefPT1k//Xzr/kBkP77AcCAhyfwen0nJnamuVW1OCE54kSl19zp/jzo3rbrljVBEMQtMJrPcJrGcMy4tBGXleI3xKMezwnYSQK7YynlTasbeRrD8V6Q2AIQLzAQl45F8/7USON3fM4kJHvAU+vOwoCnesEUaZruHkHPM2VGeSb8SnUp4rcIMyHB9m5izS4N++lT5lj6y63b+HRnuKyP5YjIFiWXgt4Y87wOBc/0t7JJY/hOjH87R+5Av/FJ8f6pISWDmFngcandeRt09DZobK6dYXPn+OcBQRAEcX52leHUhzkdoCblG7FfxK2UAnYgYOfWKP9ipuKy5arE1zc0RKslvMnfr50U/lpB2gJCBkhk5oe5fntveRnYWnWEnSBp0+5branXSze5AX3Hp0OL7k7WvOiQ+uisiHYdn9RfQ0kbgk3wyn1k05nDmgkACuu7Dkzbd+50fR4QBEEQl+CE0SRSxL6D2Oew3CWkEJC2gHzxsDgqCPw+2i63dHHxOETPuLWxg+nX9pINExK2kLChoaI13vxy35/xeHdxca813u85ZX1Ky/uWQ76izfQdnxhv0QxCltwBCsv0jjKeYnsy32wr5duz/Rt48Rgwdzo9D/pwb7ImCII4PyP5DDf9bWsZznwaL20Z7obh5gpD7ubxtTnSPEKZSLdH0ZwbeM39N4W0IR6B6cYX4AvfGhDH+CzeCIPkdlLuT9YF2cWo4zo0ZHzS909oKcHEDBb/QhbPSyN627VLf2XCbm1bP0X+UgycO0c/D3q27q5kTRAEcX7GT7rBDVhuiCTJb6xrBW+xwNR0rlIR3oYlKlu3DLwIIPPFdBAP8O1L0xi+Y2K6iLLcTrlfYf7XzKqDLOzR7TOe3Aqax6cP9ybrbZSA6pwq2B7tbxk4PqmPtQIAhslyiezeXFM4r1xxBgAxa4iyULRD4/P9+p4Ju4w3d/Y/D3r+5l3JmiAI4vzsKsOpD3OaZzA6+G9rJeHcgBuGSAI7u8WuVZYJKd90L4+AHbqwSnHfuOEiyE1hquKwmlmCAIFZeXfhHIa73FjPdiIVcQtuXgevbEocxnzSaG3fhK2SAULXqJXL5GpZ1p5wdeVscceGButT5hh6yg1ZmePHpx/DZX1dbJQgJrG0ynKz4DZaeYeMT0b8lilxjLHsQlnbuJQUZ7ksyZQbsEI7S+7Qokifj5KSOzdqSmn1/3rNnR7Pgz5tuw1ZEwRBXC+jJd1Y5q4VWiusryqkWgmW+y3XLsBo5dXCRW1vzzMZIKlEvNfQWmdxQu0EyawaFeCBCQhb1ILkb8uWY7ECAGIHi6csmQUTNgLRdDtHI3o/tQfqGPSXG4AO49OTu5I1ciVoAls0yFtHiJSErESTGDg+AJC+41PL3NUiQoOHxIbY8fAS2hBMwg5kNfqLVvB2BrXNVWM38cRO5JGebFwMhI2gdjOuUkfPudP5edCnbbgNWRMEQVwro7lJ/KgI3mIK07xSRVh5mC48REpvP9MaylvAbHjSp76JhadQ+ja0iuAtTJjmGuWfKRXCyosQKY3qn/WmbNOmkvrmpm1N5SJvdTNWnV5yAzqPz5D23YusASB2TCyisrw1tPKwMP3GDHS9x2f7C3j/zL60T5HLWwfHXMCryLpoX8MF2AuQ+rn86v3WGt8N3+00d3o+D/q07RZkTRAEca3858+fP//7+/fvpdtBEMRNkKdebovocvZ2dOHSbSYIgiCukfEv0BEEcadwGG6mgN57kg2CIAji93DCOMMEQdwFhptlAdxwDUk2YjhTUscJgiCI4ZAyTBDE0WgVYf3mk1WYIAiCuBv+P7uJgo/z0A/AAAAAAElFTkSuQmCC" alt="image-20210309112202510"></p> <p>​</p> <ul><li><ol start="6"><li>如何向表中添加数据: put</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  格式:
     put  <span class="token string">'表名'</span>,<span class="token string">'rowkey值'</span>,<span class="token string">'列族:列名'</span>,<span class="token string">'值'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="./assets/img/image-20210309112618183.c07ce4ca.png" alt="image-20210309112618183"></p> <ul><li><ol start="7"><li>如何读取某一个rowkey的数据呢?</li></ol></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>  格式:
    get '表名','rowkey',['列族1','列族2' ...],['列族1:列名'],['列族1','列族2:列名' ...]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="./assets/img/image-20210309113053162.952b0d66.png" alt="image-20210309113053162"></p> <ul><li><ol start="8"><li>扫描查询 scan</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  格式:
      +,<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token environment constant">COLUMNS</span> <span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token string">'列族1'</span>,<span class="token string">'列族2'</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span><span class="token environment constant">COLUMNS</span> <span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token string">'列族1:列名'</span>,<span class="token string">'列族2'</span><span class="token punctuation">]</span>,VERSIONS<span class="token operator">=</span><span class="token operator">&gt;</span>N<span class="token punctuation">}</span> <span class="token punctuation">]</span> , <span class="token punctuation">[</span><span class="token punctuation">{</span>FORMATTER <span class="token operator">=</span><span class="token operator">&gt;</span><span class="token string">'toString'</span><span class="token punctuation">}</span><span class="token punctuation">]</span> , <span class="token punctuation">[</span><span class="token punctuation">{</span>LIMIT <span class="token operator">=</span><span class="token operator">&gt;</span>N<span class="token punctuation">}</span><span class="token punctuation">]</span>
  
  范围查询的格式:
     scan <span class="token string">'表名'</span>, <span class="token punctuation">{</span>COLUNMS<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token string">'列族1'</span>,<span class="token string">'列族2'</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span><span class="token environment constant">COLUMNS</span> <span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token string">'列族1:列名'</span>,<span class="token string">'列族2'</span><span class="token punctuation">]</span>, STARTROW <span class="token operator">=</span><span class="token operator">&gt;</span><span class="token string">'起始rowkey的值'</span>, <span class="token assign-left variable">ENDROW</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token string">'结束rowkey'</span><span class="token punctuation">}</span>
     注意: 包头不包尾
  
  说明:
      <span class="token punctuation">{</span>FORMATTER <span class="token operator">=</span><span class="token operator">&gt;</span><span class="token string">'toString'</span><span class="token punctuation">}</span> <span class="token builtin class-name">:</span> 用于显示中文
      <span class="token punctuation">{</span>LIMIT <span class="token operator">=</span><span class="token operator">&gt;</span>N<span class="token punctuation">}</span> <span class="token builtin class-name">:</span> 显示前 N条数据
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="./assets/img/image-20210309114430868.bb2f8dc4.png" alt="image-20210309114430868"></p> <p><img src="./assets/img/image-20210309114446101.34427cbe.png" alt="image-20210309114446101"></p> <p><img src="./assets/img/image-20210309114459403.b47c1238.png" alt="image-20210309114459403"></p> <p><img src="./assets/img/image-20210309114623352.91f012db.png" alt="image-20210309114623352"></p> <ul><li><ol start="9"><li>如何修改表中数据</li></ol></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>  修改与添加数据的操作 是一致的, 只需要保证 rowkey相同 就是 修改操作
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><ol start="10"><li>删除数据: delete</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  格式:
     delete <span class="token string">'表名'</span>,<span class="token string">'rowkey'</span>,<span class="token string">'列族:列名'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="./assets/img/image-20210309120440197.7ef7ece3.png" alt="image-20210309120440197"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  格式:
      deleteall <span class="token string">'表名'</span>,<span class="token string">'rowkey'</span>,<span class="token punctuation">[</span><span class="token string">'列族:列名'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="./assets/img/image-20210309120723342.e6beeafa.png" alt="image-20210309120723342"></p> <p><img src="./assets/img/image-20210309120822500.422af22a.png" alt="image-20210309120822500"></p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">  delete</span> <span class="token value attr-value">和 deleteall区别:</span>
     两个操作都是用来执行删除数据操作
<span class="token key attr-name">  区别点</span><span class="token punctuation">:</span>
<span class="token key attr-name">  1)</span> <span class="token value attr-value">delete操作 只能删除表中某个列的数据  deleteall支持删除某行数据</span>
<span class="token key attr-name">  2)</span> <span class="token value attr-value">通过delete删除某个列的时候, 默认只是删除其最新的版本, 而deleteall直接将其所有的版本数据全部都删除</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><ol start="11"><li>如何清空表</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  格式:
    truncate <span class="token string">'表名'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="./assets/img/image-20210309121754751.ce34923f.png" alt="image-20210309121754751"></p> <ul><li><ol start="12"><li>如何删除表</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  格式:
     drop <span class="token string">'表名'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="./assets/img/image-20210309121910252.d17fcc64.png" alt="image-20210309121910252"></p> <p>说明:</p> <p>​     在删除表的时候, 必须先禁用表, 然后才能删除表</p> <p><img src="./assets/img/image-20210309122000177.2d8277b2.png" alt="image-20210309122000177"></p> <ul><li><ol start="13"><li>如何查看表中有多少行数据</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  格式:
      count <span class="token string">'表名'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="hbase的高级shell命令"><a href="#hbase的高级shell命令" class="header-anchor">#</a> hbase的高级shell命令</h4> <ul><li><ol><li>HBase的过滤器查询操作</li></ol></li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">  格式</span><span class="token punctuation">:</span>
<span class="token key attr-name">      scan</span> <span class="token value attr-value">'表名',{FILTER=&gt;&quot;过滤器名称(比较运算符,比较器表达式)&quot; }</span>
   
<span class="token key attr-name">   常见的过滤器</span><span class="token punctuation">:</span>
<span class="token key attr-name">       rowkey过滤器</span><span class="token punctuation">:</span>
<span class="token key attr-name">           RowFilter</span> <span class="token punctuation">:</span> <span class="token value attr-value">实现行键字符串的比较和过滤操作</span>
<span class="token key attr-name">           PrefixFilter</span> <span class="token punctuation">:</span>   <span class="token value attr-value">rowkey  前缀过滤器</span>
<span class="token key attr-name">       列族过滤器</span><span class="token punctuation">:</span>
<span class="token key attr-name">           FamilyFilter</span><span class="token punctuation">:</span> <span class="token value attr-value">列族过滤器</span>
<span class="token key attr-name">       列名过滤器</span><span class="token punctuation">:</span>
<span class="token key attr-name">           QualifierFilter</span> <span class="token punctuation">:</span> <span class="token value attr-value">列名过滤器, 中显示对应列名的数据</span>
<span class="token key attr-name">       列值过滤器</span><span class="token punctuation">:</span>
<span class="token key attr-name">          ValueFilter</span><span class="token punctuation">:</span>  <span class="token value attr-value">列值过滤器, 找到符合值的数据</span>
<span class="token key attr-name">          SingleColumnValueFilter</span><span class="token punctuation">:</span>   <span class="token value attr-value">在执行的列族和列名中进行比较具体的值, 将符合条数据整行数据全部都返回(包含条件的内容字段)</span>
              
<span class="token key attr-name">          SingleColumnVlaueExcludeFilter</span><span class="token punctuation">:</span> <span class="token value attr-value">在执行的列族和列名中进行比较具体的值, 将符合条数据整行数据全部都返回(去除条件内容的字段)</span>
<span class="token key attr-name">        其他过滤器</span><span class="token punctuation">:</span>
<span class="token key attr-name">             PageFilter</span> <span class="token punctuation">:</span> <span class="token value attr-value">用来执行分页操作</span>
             
     
<span class="token key attr-name">  比较运算符</span>  <span class="token punctuation">:</span>  <span class="token value attr-value">= &gt;  &lt; &gt;= &lt;= !=     </span>
  
<span class="token key attr-name">  比较器</span><span class="token punctuation">:</span>
<span class="token key attr-name">      BinaryComparator</span> <span class="token punctuation">:</span>   <span class="token value attr-value">完整匹配字节数组</span>
<span class="token key attr-name">      BinaryPrefixComparator</span> <span class="token punctuation">:</span> <span class="token value attr-value">匹配字节数组前缀</span>
<span class="token key attr-name">      NullComparator</span> <span class="token punctuation">:</span>   <span class="token value attr-value">匹配Null</span>
<span class="token key attr-name">      SubstringComparator</span> <span class="token punctuation">:</span>   <span class="token value attr-value">模糊匹配字符串</span>
  
<span class="token key attr-name">  比较器表达式</span><span class="token punctuation">:</span>
<span class="token key attr-name">      BinaryComparator</span> <span class="token punctuation">:</span>   <span class="token value attr-value">binary:值</span>
<span class="token key attr-name">      BinaryPrefixComparator</span> <span class="token punctuation">:</span>  <span class="token value attr-value">binaryprefix:值</span>
<span class="token key attr-name">      NullComparator</span> <span class="token punctuation">:</span>  <span class="token value attr-value">null</span>
<span class="token key attr-name">      SubstringComparator</span><span class="token punctuation">:</span> <span class="token value attr-value">substring:值</span>
      
<span class="token key attr-name">  如果不知道过滤器的构造参数,</span> <span class="token value attr-value">可以查看此地址:</span>
<span class="token key attr-name">     http</span><span class="token punctuation">:</span><span class="token value attr-value">//hbase.apache.org/2.2/devapidocs/index.html</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><img src="./assets/img/image-20210309150552740.5c749243.png" alt="image-20210309150552740"></p> <p><img src="./assets/img/image-20210309150535480.d9f3eaaa.png" alt="image-20210309150535480"></p> <p><img src="./assets/img/image-20210309150509286.382cf6a6.png" alt="image-20210309150509286"></p> <ul><li><ol start="2"><li>高级的shell管理命令:</li></ol> <ul><li><p>2.1:  whoami : 显示Hbase当前使用用户</p> <p><img src="data:image/png;base64,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" alt="image-20210309150903514"></p></li> <li><p>2.2:  describe: 展示表的结构信息</p> <p><img src="./assets/img/image-20210309151120532.47ec624b.png" alt="image-20210309151120532"></p></li> <li><p>2.3: exists  判断表是否存在</p> <p><img src="./assets/img/image-20210309151215213.a4751957.png" alt="image-20210309151215213"></p></li> <li><p>2.4:  is_enabled  和 is_disabled  判断表是否启用和是否禁用</p> <p><img src="./assets/img/image-20210309151313647.803506de.png" alt="image-20210309151313647"></p></li> <li><p>2.5 : alter:  该命令可以改变表和列族信息</p> <ul><li><p>如何增加列族:</p> <p>alter '表名' ,NAME=&gt;'列族名',[VERSIONS=&gt;N]</p> <p><img src="./assets/img/image-20210309151629952.c8bd97e7.png" alt="image-20210309151629952"></p></li> <li><p>如何删除列族:</p> <p>alter '表名','delete'=&gt;'列族名'</p> <p><img src="./assets/img/image-20210309151611263.a521b45c.png" alt="image-20210309151611263"></p></li></ul></li></ul></li></ul> <h3 id="hbase的javaapi的操作"><a href="#hbase的javaapi的操作" class="header-anchor">#</a> <strong>hbase的javaAPI的操作</strong></h3> <p><img src="./assets/img/image-20210309152026945.18afa037.png" alt="image-20210309152026945"></p> <ul><li><p>项目的准备工作</p> <ul><li><ol><li>创建maven项目:</li></ol> <ul><li>1.1) 先构建一个父工程:  bigdata_parent_01</li> <li>1.2) 接着将父工程中 src 删除</li> <li>1.3) 创建一个子工程:  day01_hbase</li></ul></li> <li><ol start="2"><li>导入相关的依赖:pom</li></ol></li></ul></li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--代码库--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://maven.aliyun.com/nexus/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>never<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
    
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hbase<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hbase-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.testng<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>testng<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.14.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><ul><li><ol start="3"><li>创建包结构:</li></ol> <ul><li>名称: com.gordon.hbase</li></ul></li></ul> <p><strong>创建表</strong></p> <p>实现步骤:</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">1)</span> <span class="token value attr-value">创建HBase连接对象: </span>

<span class="token key attr-name">2)</span> <span class="token value attr-value">从连接对象中获取相关的管理对象: Admin(对表的操作) 和 Table(对表数据操作)</span>

<span class="token key attr-name">3)</span> <span class="token value attr-value">执行相关的操作</span>

<span class="token key attr-name">4)</span> <span class="token value attr-value">处理结果集  -- 此步骤只有查询操作</span>

<span class="token key attr-name">5)</span> <span class="token value attr-value">释放资源</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>具体实现</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">// 创建表</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

        <span class="token comment">// 1) 创建HBase连接对象:</span>

        <span class="token comment">//Configuration conf = new Configuration();</span>
        <span class="token class-name">Configuration</span> conf <span class="token operator">=</span> <span class="token class-name">HBaseConfiguration</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        conf<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;hbase.zookeeper.quorum&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;node1:2181,node2:2181,node3:2181&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> hbConn <span class="token operator">=</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>conf<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2) 从连接对象中获取相关的管理对象: Admin(对表的操作) 和 Table(对表数据操作)</span>

        <span class="token class-name">Admin</span> admin <span class="token operator">=</span> hbConn<span class="token punctuation">.</span><span class="token function">getAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3) 执行相关的操作</span>

        <span class="token keyword">boolean</span> flag <span class="token operator">=</span> admin<span class="token punctuation">.</span><span class="token function">tableExists</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;WATER_BILL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 为true 表示存在, 否则为不存在</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 说明 表不存在</span>
            <span class="token comment">//3.1: 创建 表的构建器对象</span>
            <span class="token class-name">TableDescriptorBuilder</span> descBuilder <span class="token operator">=</span> <span class="token class-name">TableDescriptorBuilder</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;WATER_BILL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token comment">//3.2: 在构建器 设置表的列族信息</span>
            <span class="token class-name">ColumnFamilyDescriptorBuilder</span> familyDesc <span class="token operator">=</span> <span class="token class-name">ColumnFamilyDescriptorBuilder</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            descBuilder<span class="token punctuation">.</span><span class="token function">setColumnFamily</span><span class="token punctuation">(</span>familyDesc<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//3.3: 基于表构建器  构建表基本信息封装对象</span>
            <span class="token class-name">TableDescriptor</span> desc <span class="token operator">=</span> descBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            admin<span class="token punctuation">.</span><span class="token function">createTable</span><span class="token punctuation">(</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 4) 处理结果集  -- 此步骤只有查询操作</span>

        <span class="token comment">// 5) 释放资源</span>
        admin<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hbConn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p><strong>添加数据</strong></p> <ul><li>操作步骤</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">1)</span> <span class="token value attr-value">创建Hbase的连接对象</span>

<span class="token key attr-name">2)</span> <span class="token value attr-value">通过连接对象 获取相关的管理对象: admin  和 table</span>

<span class="token key attr-name">3)</span> <span class="token value attr-value">执行相关的操作:  添加数据</span>

<span class="token key attr-name">4)</span> <span class="token value attr-value">处理结果集:  -- 此步骤不需要</span>

<span class="token key attr-name">5)</span> <span class="token value attr-value">释放资源</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>具体操作代码</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 添加数据</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

        <span class="token comment">//1) 创建Hbase的连接对象</span>
        <span class="token class-name">Configuration</span> conf <span class="token operator">=</span> <span class="token class-name">HBaseConfiguration</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        conf<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;hbase.zookeeper.quorum&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;node1:2181,node2:2181,node3:2181&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Connection</span> hbConn <span class="token operator">=</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>conf<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2) 通过连接对象 获取相关的管理对象: admin  和 table</span>

        <span class="token class-name">Table</span> table <span class="token operator">=</span> hbConn<span class="token punctuation">.</span><span class="token function">getTable</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;WATER_BILL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3) 执行相关的操作:  添加数据</span>

        <span class="token class-name">Put</span> put <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Put</span><span class="token punctuation">(</span><span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span><span class="token number">4944191</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        put<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;登卫红&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        put<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;ADDRESS&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;贵州省铜仁市德江县7单元267室&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        put<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;SEX&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        put<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;PAY_TIME&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;2020-05-10&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       

        table<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>put<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//4) 处理结果集:  -- 此步骤不需要</span>

        <span class="token comment">//5) 释放资源</span>
        table<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hbConn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p><strong>抽取一些公共的方法</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">private</span> <span class="token class-name">Connection</span> hbConn<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Table</span> table<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Admin</span> admin<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> tableName <span class="token operator">=</span> <span class="token string">&quot;WATER_BILL&quot;</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

        <span class="token comment">//1) 创建Hbase的连接对象</span>
        <span class="token class-name">Configuration</span> conf <span class="token operator">=</span> <span class="token class-name">HBaseConfiguration</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        conf<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;hbase.zookeeper.quorum&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;node1:2181,node2:2181,node3:2181&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        hbConn <span class="token operator">=</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>conf<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2) 通过连接对象 获取相关的管理对象: admin  和 table</span>
        admin <span class="token operator">=</span> hbConn<span class="token punctuation">.</span><span class="token function">getAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        table <span class="token operator">=</span> hbConn<span class="token punctuation">.</span><span class="token function">getTable</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
        <span class="token comment">// 3) 执行相关的操作</span>
        
        
        <span class="token comment">//4) 处理结果集</span>
        
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@After</span>
    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//5. 释放资源</span>
        admin<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        table<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hbConn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p><strong>查询某一条数据</strong></p> <ul><li>代码实现</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 根据rowkey 查询某一条数据</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

        <span class="token comment">// 3) 执行相关的操作 get</span>

        <span class="token class-name">Get</span> get <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Get</span><span class="token punctuation">(</span><span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span><span class="token number">4944191</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Result</span> result <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>get<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 一个Result 表示 就是一行数据</span>

        <span class="token comment">//4) 处理结果集</span>

        <span class="token comment">//4.1: 获取一行数据中每一个单元格</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Cell</span><span class="token punctuation">&gt;</span></span> listCells <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">listCells</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//4.2: 遍历单元格, 从单元格获取数据</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cell</span> cell <span class="token operator">:</span> listCells<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">// 从单元格可以获取那些内容: rowkey  列族 列名 列值</span>

            <span class="token comment">//4.2.1 获取rowkey</span>
            <span class="token comment">/*byte[] rowArray = cell.getRowArray();

            int rowkey = Bytes.toInt(rowArray, cell.getRowOffset(), cell.getRowLength());*/</span>

            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> rowBytes <span class="token operator">=</span> <span class="token class-name">CellUtil</span><span class="token punctuation">.</span><span class="token function">cloneRow</span><span class="token punctuation">(</span>cell<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> rowkey <span class="token operator">=</span> <span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span>rowBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 4.2.2 获取 列族</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> familyBytes <span class="token operator">=</span> <span class="token class-name">CellUtil</span><span class="token punctuation">.</span><span class="token function">cloneFamily</span><span class="token punctuation">(</span>cell<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> family <span class="token operator">=</span> <span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>familyBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 4.2.3 获取 列名(列限定符)</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> qualifierBytes <span class="token operator">=</span> <span class="token class-name">CellUtil</span><span class="token punctuation">.</span><span class="token function">cloneQualifier</span><span class="token punctuation">(</span>cell<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> qualifier <span class="token operator">=</span> <span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>qualifierBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 4.2.4 获取 列值</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> valueBytes <span class="token operator">=</span> <span class="token class-name">CellUtil</span><span class="token punctuation">.</span><span class="token function">cloneValue</span><span class="token punctuation">(</span>cell<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> value <span class="token operator">=</span> <span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>valueBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;rowkey:&quot;</span><span class="token operator">+</span>rowkey <span class="token operator">+</span><span class="token string">&quot;; 列族为:&quot;</span><span class="token operator">+</span>family<span class="token operator">+</span><span class="token string">&quot;; 列名为:&quot;</span><span class="token operator">+</span>qualifier<span class="token operator">+</span><span class="token string">&quot;; 列值为:&quot;</span><span class="token operator">+</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p><strong>删除数据</strong></p> <ul><li>代码实现</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 删除数据操作:</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span>  <span class="token keyword">void</span>  <span class="token function">test04</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

        <span class="token comment">// 3) 执行相关的操作 : delete  和 deleteall</span>


        <span class="token class-name">Delete</span> delete <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Delete</span><span class="token punctuation">(</span><span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span><span class="token number">4944191</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//delete.addColumn(&quot;C1&quot;.getBytes(),&quot;NAME&quot;.getBytes());</span>
        delete<span class="token punctuation">.</span><span class="token function">addFamily</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        table<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>delete<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//4) 处理结果集 -- 此步骤不需要</span>

    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>删除表</strong></p> <ul><li>代码实现</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 删除表操作:</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span>  <span class="token keyword">void</span>  <span class="token function">test05</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">// 3) 执行相关的操作</span>

        <span class="token keyword">boolean</span> flag <span class="token operator">=</span> admin<span class="token punctuation">.</span><span class="token function">isTableEnabled</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 判断是否启用表</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>

            admin<span class="token punctuation">.</span><span class="token function">disableTable</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//如果启用, 将其先禁用</span>
        <span class="token punctuation">}</span>

        admin<span class="token punctuation">.</span><span class="token function">deleteTable</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//4) 处理结果集 -- 此步骤不需要</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>导入数据的操作</strong></p> <ul><li><p>如何导入数据操作</p> <ul><li>语法格式:</li></ul></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  hbase  org.apache.hadoop.hbase.mapreduce.Import 表名 HDFS数据文件路径
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>注意: 此操作需要在shell命令窗口下执行, 不要在hbase的命令行窗口行</p></li> <li><p>操作步骤:</p> <p><img src="./assets/img/image-20210309171229079.cf88130f.png" alt="image-20210309171229079"></p></li> <li><p>接下来即可执行导入命令</p></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  hbase  org.apache.hadoop.hbase.mapreduce.Import WATER_BILL /water_bill/input
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>基于scan的扫描查询</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//scan操作 </span>
<span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Configuration</span> conf <span class="token operator">=</span> <span class="token class-name">HBaseConfiguration</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        conf<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;hbase.zookeeper.quorum&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;node1:2181,node2:2181,node3:2181&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> hbConn <span class="token operator">=</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>conf<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Table</span> table <span class="token operator">=</span> hbConn<span class="token punctuation">.</span><span class="token function">getTable</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;WATER_BILL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//命令行的写法 scan 表名 ,{FILTER=&gt;&quot;QualifierFilter(=,'substring:a')&quot;}</span>

        <span class="token class-name">Scan</span> scan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">FilterList</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SingleColumnValueFilter</span> startValueFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SingleColumnValueFilter</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;RECORD_DATE&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">CompareOperator</span><span class="token punctuation">.</span><span class="token constant">GREATER_OR_EQUAL</span><span class="token punctuation">,</span><span class="token string">&quot;2020-06-01&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SingleColumnValueFilter</span> endValueFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SingleColumnValueFilter</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;RECORD_DATE&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">CompareOperator</span><span class="token punctuation">.</span><span class="token constant">LESS_OR_EQUAL</span><span class="token punctuation">,</span><span class="token string">&quot;2020-07-01&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span>startValueFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span>endValueFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        scan<span class="token punctuation">.</span><span class="token function">setFilter</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultScanner</span> results <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">getScanner</span><span class="token punctuation">(</span>scan<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Result</span> result <span class="token operator">:</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Cell</span><span class="token punctuation">&gt;</span></span> cells <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">listCells</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cell</span> cell <span class="token operator">:</span> cells<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> qulifier <span class="token operator">=</span> <span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token class-name">CellUtil</span><span class="token punctuation">.</span><span class="token function">cloneQualifier</span><span class="token punctuation">(</span>cell<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>qulifier<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token class-name">CellUtil</span><span class="token punctuation">.</span><span class="token function">cloneValue</span><span class="token punctuation">(</span>cell<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>
        table<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hbConn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="hbase的架构及原理"><a href="#hbase的架构及原理" class="header-anchor">#</a> hbase的架构及原理</h2> <p>hbase高可用架构部署</p> <p>hbase的高可用, 主要指的是让HBase的主节点, 有多台, 当其中一台出现故障后, 可以让其他的节点顶上来</p> <p>如何配置呢?</p> <ul><li><ol><li>在node1 进入 hbase的conf目录下, 创建一个 backup-masters</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  <span class="token builtin class-name">cd</span> /export/server/hbase-2.1.0/conf/
  <span class="token function">vim</span> backup-masters
  
  内容如下:
  node2.itcast.cn
  node3.itcast.cn
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><ol start="2"><li>将 backup-master 发送其他两台节点</li></ol></li></ul> <div class="language-SHELL line-numbers-mode"><pre class="language-shell"><code>  <span class="token builtin class-name">cd</span> /export/server/hbase-2.1.0/conf/
  <span class="token function">scp</span> backup-masters node2:<span class="token environment constant">$PWD</span>
  <span class="token function">scp</span> backup-masters node3:<span class="token environment constant">$PWD</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><ol start="3"><li>重启 HBase的集群</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  在 node1执行:  
      stop-hbase.sh
      start-hbase.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="./assets/img/image-20210310090355937.3129744a.png" alt="image-20210310090355937"></p> <h3 id="hbase的集群架构图"><a href="#hbase的集群架构图" class="header-anchor">#</a> hbase的集群架构图</h3> <p><img src="./assets/img/image-20210310101623582.d7e35c4d.png" alt="image-20210310101623582"></p> <h3 id="region-server的上线和下线"><a href="#region-server的上线和下线" class="header-anchor">#</a> region server的上线和下线</h3> <p><strong>region server的上线流程:</strong></p> <p><img src="./assets/img/image-20210310153326834.7da18acb.png" alt="image-20210310153326834"></p> <p>说明:</p> <p>​       当regionServer上线后, master会立即感知到, 此时regionServer需要上master汇报自己当下管理那些region, 然后master会根据各个regionServer汇报的region的管理情况, 然后在读取meta表获取到所有的region, 与之比较, 查看是否还有未分配的region, 如果有, 将这个未分配的region, 均匀的分配给各个regionServer上, 保证负载均衡</p> <p><strong>regionServer的下线流程</strong></p> <p><img src="./assets/img/image-20210310153531908.82adf326.png" alt="image-20210310153531908"></p> <p>​	   说明: 当HregionServer下线后, 对应这个regionServer所管理的region就处于无人管理的状态(无分配状态),此时master就需要将这些没有分配的region, 重新分配给其他的regionServer上 即可, 当regionServer有重新上线之后, 从之前regionServer上, 解除一些region, 将region分配给当前这个新启动regionServer上 (存在时间间隔, 不是立即执行)</p> <h3 id="master的上线和下线"><a href="#master的上线和下线" class="header-anchor">#</a> master的上线和下线</h3> <p><img src="./assets/img/image-20210310161034310.7d0e3bb4.png" alt="image-20210310161034310"></p> <p>说明:</p> <p>​    master短暂的下线, 并不会太大的影响HBase的集群, 因为hbase的读写操作是不经过HMaster, 而大多数的请求都是读写的请求,</p> <p>​     master下线主要是会影响到对元数据操作的请求, 比如说 创建表  删除表 修改表</p> <h3 id="hbase的读写原理"><a href="#hbase的读写原理" class="header-anchor">#</a> HBase的读写原理</h3> <h4 id="读取数据的流程"><a href="#读取数据的流程" class="header-anchor">#</a> 读取数据的流程</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>Meat表内具体存放哪些信息： 
rowkey：由四个字段拼接起来，分别是 表名-StratRow-TimeStamp-EncodedName。

数据分为4列：

info：regioninfo：EncodedName、RegionName、Region的StartRow、Region的StopRow；

info：seqnumDuringOpen：存储Region打开时的sequenceId；

info：server：存储Region落在哪个RegionServer上；

info：serverstartcode：存储所在的RegionServer启动时间戳；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>HBase读取数据的流程</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">  由客户端发起读取数据的请求</span><span class="token punctuation">:</span> <span class="token value attr-value">scan '表名'</span>
  
<span class="token key attr-name">  1)</span> <span class="token value attr-value">首先第一步连接zookeeper, 从zookeeper中获取 HBase:Meta 表的位置信息(meta被那个regionServer所管理)</span>
<span class="token key attr-name">         HBase</span><span class="token punctuation">:</span><span class="token value attr-value">Meta 表 是 hbase的管理表, 有且只有一个region 主要是用于存储 hbase的元数据信息, 比如 有那些表, 每个表有那些region, 每个region被那些regionServer管理 ......  </span>
   
<span class="token key attr-name">  2)</span> <span class="token value attr-value"> 连接对应(hbase meta表的)regionServer, 获取meta表中数据, 从meta表获取对应要查询的表有几个region, 以及这些region被那些regionserver所管理, 与当下要读取表的元数据信息全部都获取到</span>
  
  
<span class="token key attr-name">  3)</span> <span class="token value attr-value">并发的连接(查询表的)regionServer, 从各个regionServer的region中读取表的数据即可, 如果是基于scan扫描 此时会将所有的数据全部扫描的到客户端(边读边处理)), 如果是get操作, 此时从region中, 找到具体的rowkey</span>
<span class="token key attr-name">      从region读取数据顺序</span><span class="token punctuation">:</span>   <span class="token value attr-value">memStore  --&gt; blockCache ---&gt;StoreFile(小File) --&gt; 大HFile</span>
     
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="./assets/img/image-20210310104746769.e58021cc.png" alt="image-20210310104746769"></p> <h4 id="数据的写入流程"><a href="#数据的写入流程" class="header-anchor">#</a> 数据的写入流程</h4> <ul><li>HBase的数据写入流程</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">  客户端发起写入数据请求</span><span class="token punctuation">:</span> <span class="token value attr-value">put 'user' ,'rk001','C1:name','张三'</span>
  
<span class="token key attr-name">  1)</span> <span class="token value attr-value">首先连接zookeeper, 获取HBase:Meta表所在的regionServer的地址</span>
<span class="token key attr-name">  2)</span> <span class="token value attr-value">连接regionServer, 从meta表获取要写入数据的表,根据rowkey找到对应的region被那个regionServer所管理</span>
<span class="token key attr-name">  3)</span> <span class="token value attr-value">连接对应regionServer, 开始进行数据写入操作</span>
<span class="token key attr-name">  4)</span> <span class="token value attr-value">首先先将数据写入到这个regionServer的HLog(WAL)日志中, 然后再将数据写入到memStore(可能会写入到多个memStore)中</span>
<span class="token key attr-name">  5)</span> <span class="token value attr-value">当HLog 和 memStore都成功将数据写入完成, 此时 客户端的写入流程就结束了, 客户端返回写入成功....</span>
  
  -------------------------以上为客户端流程------------------------------------
<span class="token key attr-name">  服务端流程</span><span class="token punctuation">:</span>
  
<span class="token key attr-name">  6)</span> <span class="token value attr-value">随着客户端不断的写入, memStore中数据越来越多, 当memStore数据达到一定的阈值(128M/1小时)后, 就会执行flush刷新机制, 将memStore数据 &quot;最终&quot; 刷新到HDFS上, 形成一个storeFile(小File)文件</span>
  
<span class="token key attr-name">  7)</span> <span class="token value attr-value">随着不断的flush的刷新操作, 在HDFS上, 会存储越来越多的小File文件, 当这些小的Hfile文件达到一定的阈值(3个及以上)后, 就会启动compact(合并压缩)机制, 将多个小Hfile &quot;最终&quot;  合并为一个大的HFile文件</span>
  
<span class="token key attr-name">  8)</span> <span class="token value attr-value">随着不断的compact的合并压缩, 这个大的Hfile 也会越来越大, 当这个大的Hfile达到一定的阈值(&quot;最终&quot;10GB)后, 就会触发 split机制, 将大的Hfile 进行一分为二, 形成两个新的Hfile, 此时对应region 也会进行一份为二, 形成两个新的region, 每个region管理其中一个新的大Hfile即可, 一旦split分裂完毕, 此时旧的region就会下线(注意: 在执行split分裂过程中, 当下分裂的表是不接受读写请求)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><img src="./assets/img/image-20210310112712387.a5e35345.png" alt="image-20210310112712387"></p> <h2 id="hbase三大机制"><a href="#hbase三大机制" class="header-anchor">#</a> Hbase三大机制</h2> <h3 id="hbase的flush刷新机制"><a href="#hbase的flush刷新机制" class="header-anchor">#</a> <strong>HBase的flush刷新机制</strong></h3> <ul><li>HBase的flush刷新机制:</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">flush机制</span><span class="token punctuation">:</span> <span class="token value attr-value">刷新机制</span>
<span class="token key attr-name">      目的</span><span class="token punctuation">:</span>
<span class="token key attr-name">             将memStore中最终写入到HDFS上,</span> <span class="token value attr-value">形成一个storeFile文件</span>
<span class="token key attr-name">      阈值</span><span class="token punctuation">:</span>  
<span class="token key attr-name">             大小阈值</span><span class="token punctuation">:</span>  <span class="token value attr-value">128M</span>
<span class="token key attr-name">             时间阈值</span><span class="token punctuation">:</span>   <span class="token value attr-value">1小时</span>
<span class="token key attr-name">             注意</span><span class="token punctuation">:</span> <span class="token value attr-value">满足了那个阈值, 都会触发flush机制</span>

<span class="token key attr-name">      flush流程</span><span class="token punctuation">:</span> <span class="token value attr-value">hbase 2.0 flush</span>
<span class="token key attr-name">              1)</span> <span class="token value attr-value">关闭掉当前这个达到阈值的memStore空间, 然后开启一个新的memStore, 以便于正常写入</span>
<span class="token key attr-name">              2)</span> <span class="token value attr-value">将这个关闭的memStore 首先放入一个 队列容器 (内存)中, 在HBase的2.0版本后, 会让这个队列容器,尽可能晚的刷新到磁盘上, 此时在队列的memStore变更为只读状态, 在读取数据时候, 依然可以从队列中进行读取操作, 以保证读取的效率</span>
<span class="token key attr-name">              3)</span> <span class="token value attr-value">随着memStore不断的达到阈值 , 在队列容器中存储的memStore的数量也会越来越多, 当内存达到一定的阈值(?)后, 触发flush操作, 将队列中所有的数据 进行合并操作,然后 一次性刷新到磁盘上, 形成一个storeFile文件;</span>

<span class="token key attr-name">注意</span><span class="token punctuation">:</span>  <span class="token value attr-value">此操作, 仅在hbase2.0版本后才支持, 在2.0版本下, 写入到队列之后, 直接将数据刷新HDFS上, 形成一个个storeFile, 即使刷新慢了, 导致队列中有了多个memStore, 依然一个memStore就是一个storeFile</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>说明:</p> <p>​     内存合并操作, 在hbase2.0后就开始支持了, 但是hbase2.x版本, 默认是不开启内存合并的, 如果开启, 需要手动设置</p> <p>如何开启内存合并操作:</p> <ul><li><p>方式1: 全局配置</p> <ul><li>配置在: hbase-site.xml ,建议配置 adaptive</li></ul> <p><img src="./assets/img/image-20210310115708488.0e2bf2bc.png" alt="image-20210310115708488"></p></li> <li><p>方式2: 针对某一个表来设置</p> <ul><li>配置在: 在建表的时候, 可以针对设置操作</li></ul> <p><img src="./assets/img/image-20210310115827829.67956f5c.png" alt="image-20210310115827829"></p></li></ul> <p>合并的方案: 共计有三种</p> <ul><li>basic(基础型):
<ul><li>作用: 在合并的过程中, 不关心是否有重复数据, 或者过期的版本数据, 直接进行合并即可, 效率最高的</li></ul></li> <li>eager(饥渴型):
<ul><li>作用: 在合并的过程中, 会积极的判断数据是否有重复, 以及是否有过期, 会将重复的 过期的版本, 全部清洗掉, 然后合并在一起</li></ul></li> <li>adaptive(适应型):
<ul><li>作用: 检查数据, 如果发现数据重复和过期版本 的比例以及达到 eager方案, 就采用饥渴型, 否则就采用基础型</li></ul></li></ul> <h3 id="hbase的storefile的合并机制"><a href="#hbase的storefile的合并机制" class="header-anchor">#</a> HBase的storeFile的合并机制</h3> <ul><li>compact机制流程说明</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">compact</span> <span class="token value attr-value">合并压缩机制:  </span>
<span class="token key attr-name">         目的</span><span class="token punctuation">:</span>  <span class="token value attr-value">将多个storeFile(小Hfile) 合并为一个更大的HFile文件</span>
<span class="token key attr-name">         阈值</span><span class="token punctuation">:</span>   <span class="token value attr-value">达到3个及以上</span>



<span class="token key attr-name">minor</span><span class="token punctuation">:</span> 
<span class="token key attr-name">     目的</span><span class="token punctuation">:</span>  <span class="token value attr-value">将多个小的storeFile 合并为一个较大的Hfile文件过程</span>

<span class="token key attr-name">     流程</span><span class="token punctuation">:</span>
<span class="token key attr-name">          1)</span> <span class="token value attr-value">当storeFile文件数量达到阈值(3个及以上)后, 首先先将这几个小storeFile进行合并操作, 形成一个较大的storeFile文件</span>
<span class="token key attr-name">          2)</span> <span class="token value attr-value">在合并过程中, minor 操作不会对数据进行任何的删除, 去掉重复操作, 仅仅做一个基本排序合并工作即可, 整体执行效率是非常快的</span>
    

<span class="token key attr-name">major</span><span class="token punctuation">:</span> 

<span class="token key attr-name">    目的</span><span class="token punctuation">:</span> <span class="token value attr-value">将这个较大的Hfile 和之前大的Hfile 进行合并形成一个最终的大Hfile操作</span>

<span class="token key attr-name">     流程</span><span class="token punctuation">:</span>
<span class="token key attr-name">           1)</span> <span class="token value attr-value">默认情况下, 当达到一定的阈值(7天|手动)后触发major操作, 将磁盘中较大的HFile和之前大的Hfile进行合并, 形成一个最终的大Hfile文件即可</span>
<span class="token key attr-name">           2)</span> <span class="token value attr-value">在合并的过程中, 打上重复标记的数据, 打上过期版本标记的数据, 在major执行过程中, 就会进行全部处理掉</span>

<span class="token key attr-name">    注意</span><span class="token punctuation">:</span> <span class="token value attr-value">由于major在合并的过程中, 需要对所有数据进行合并操作, 此时无法对数据进行相关的操作,  而且此操作由于数据量较大, 执行时间较大, 此操作会Hbase性能影响较大</span>
<span class="token key attr-name">         所以在实际生产中,</span> <span class="token value attr-value">一般是关闭major, 改为手动执行</span>

<span class="token key attr-name">   合并做法</span><span class="token punctuation">:</span>
<span class="token key attr-name">           将HDFS数据读取出来,</span> <span class="token value attr-value"> 边读边进行处理, 边将数据通过追加的形式添加到HDFS上</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="hbase的split机制-region分裂"><a href="#hbase的split机制-region分裂" class="header-anchor">#</a> Hbase的split机制(region分裂)</h3> <p><img src="./assets/img/image-20210310151136162.12c90a53.png" alt="**image-20210310151136162**"></p> <p>此公式主要是用于计算  表对应region, 何时执行分裂的操作</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">比如说</span><span class="token punctuation">:</span>
<span class="token key attr-name">    当最初始的时候,</span> <span class="token value attr-value">表只有一个Region ,   此时 1^2 * 128  与   10GB 做比较, 那个小, 我们就会在那个值上执行分裂, 此时第一次应该在 region的Hfile数据量达到 128M 的时候执行分裂</span>
<span class="token key attr-name">    当第二次分裂,</span> <span class="token value attr-value">R=2, 经过计算后, 当region的Hfile数据量达到 512M的时候, 就会执行分裂</span>
    以此类推
    
<span class="token key attr-name">    直到表的region数量达到</span> <span class="token value attr-value">9个及以上的时候, 此时region分裂按照 10GB 分裂一次</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="hbase的bulk-load-批量加载操作"><a href="#hbase的bulk-load-批量加载操作" class="header-anchor">#</a> HBase的Bulk Load 批量加载操作</h2> <p>假设:  目前有一批数据, 此数据量比较大, 需要将这些数据写入到HBase中, 如果采用hbase的 普通的javaAPI操作, 会将数据正常的写入流程 进入到HBase中, 而正常数据流程: 先将数据写入到HLog 然后将数据写入memStore, 然后从memStore到storeFile, 再从storeFile到Hfile， 而且在整个写入流程中, 需要大量的占用服务器的资源</p> <p>如果这个时候, 还有大量的请求, 从Hbase的这个表中读取数据, 由于服务器的资源都被写入的请求占用了, 此时读取的请求可能无法实施, 或者返回结果会很慢, 此时对网络的带宽造成较大的影响</p> <p>思考 如何解决呢?</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1) 将这一批数据 先转换为 HFile的文件
2) 将HFile文件直接导入HBase中, 让Hbase直接加载即可

此操作不需要先写入HLog 然后到内存, 然后HDFS过程, 直接将数据到达HDFS操作
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="./assets/img/image-20210310162856137.afec3d6a.png" alt="image-20210310162856137"></p> <p>解决的应用场景</p> <ul><li>需求一次性写入大量数据到达HBase的操作</li></ul> <p>5.1 需求说明</p> <p>​       目前在HDFS上有一份 CSV文件, 此文件中记录大量的转账数据, 要求将这些转换数据 存储到Hbase中, 由于初始数据量过于庞大, 可以采用 bulk_load 将数据批量加载HBase中</p> <p>​      <img src="./assets/img/image-20210310163412604.f0cbb4c2.png" alt="image-20210310163412604"></p> <p>准备工作</p> <ol><li>在Hbase中创建目标表:</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>create  <span class="token string">'TRANSFER_RECORD'</span>,<span class="token string">'C1'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>将数据 上传到 HDFS中</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hdfs dfs <span class="token parameter variable">-mkdir</span> <span class="token parameter variable">-p</span> /hbase/bulkload/input

rz将数据上传到 Linux中

hdfs dfs <span class="token parameter variable">-put</span> bank_record.csv /hbase/bulkload/input
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><ol start="3"><li>在IDEA中构建项目: day02_hbase_bulk_load</li></ol></li> <li><ol start="4"><li>导入相关的pom依赖</li></ol></li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--代码库--&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://maven.aliyun.com/nexus/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>never<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
  
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hbase<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hbase-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hbase<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hbase-mapreduce<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hadoop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hadoop-mapreduce-client-jobclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hadoop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hadoop-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hadoop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hadoop-mapreduce-client-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hadoop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hadoop-auth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hadoop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hadoop-hdfs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>
                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">&gt;</span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><ul><li><ol start="5"><li>创建包结构</li></ol> <ul><li>com.itheima.hbase.bulkLoad</li></ul></li></ul> <h3 id="mr-bulkload"><a href="#mr-bulkload" class="header-anchor">#</a> MR-bulkload</h3> <p>将CSV数据转换为HFile文件格式数据(天龙八部)==&gt;内存多的话，需要改成spark来完成</p> <ul><li><ol><li>编写 Mapper程序</li></ol></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>hbase<span class="token punctuation">.</span>bulkLoad</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hbase<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">Put</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hbase<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ImmutableBytesWritable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">LongWritable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Text</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>mapreduce<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BulkLoadMapper</span> <span class="token keyword">extends</span> <span class="token class-name">Mapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LongWritable</span><span class="token punctuation">,</span><span class="token class-name">Text</span><span class="token punctuation">,</span><span class="token class-name">ImmutableBytesWritable</span><span class="token punctuation">,</span> <span class="token class-name">Put</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">ImmutableBytesWritable</span> k2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImmutableBytesWritable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">LongWritable</span> key<span class="token punctuation">,</span> <span class="token class-name">Text</span> value<span class="token punctuation">,</span> <span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>

        <span class="token comment">//1. 获取一行数据</span>
        <span class="token class-name">String</span> line <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2. 判断是否接收到数据</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>line <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token comment">//3. 对这一行数据执行切割操作</span>

            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//4. 封装 k2 和 v2的数据</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> rowkey <span class="token operator">=</span> fields<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            k2<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>rowkey<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">Put</span> v2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Put</span><span class="token punctuation">(</span>rowkey<span class="token punctuation">)</span><span class="token punctuation">;</span>

            v2<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fields<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            v2<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;rec_account&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fields<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            v2<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;rec_bank_name&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fields<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            v2<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;rec_name&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fields<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            v2<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;pay_account&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fields<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            v2<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;pay_name&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fields<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            v2<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;pay_comments&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fields<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            v2<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;pay_channel&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fields<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            v2<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;pay_way&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fields<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            v2<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fields<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            v2<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;timestamp&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fields<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            v2<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;money&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fields<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token comment">//5. 写出去</span>
            context<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>k2<span class="token punctuation">,</span>v2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><ul><li><ol start="2"><li>编写 驱动类</li></ol></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>hbase<span class="token punctuation">.</span>bulkLoad</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>conf<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>conf<span class="token punctuation">.</span></span><span class="token class-name">Configured</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>fs<span class="token punctuation">.</span></span><span class="token class-name">Path</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hbase<span class="token punctuation">.</span></span><span class="token class-name">HBaseConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hbase<span class="token punctuation">.</span></span><span class="token class-name">TableName</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hbase<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hbase<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">ConnectionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hbase<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">Put</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hbase<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">Table</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hbase<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ImmutableBytesWritable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>hbase<span class="token punctuation">.</span>mapreduce<span class="token punctuation">.</span></span><span class="token class-name">HFileOutputFormat2</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>mapreduce<span class="token punctuation">.</span></span><span class="token class-name">Job</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>mapreduce<span class="token punctuation">.</span>lib<span class="token punctuation">.</span>input<span class="token punctuation">.</span></span><span class="token class-name">TextInputFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Tool</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ToolRunner</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BulkLoadDriver</span> <span class="token keyword">extends</span> <span class="token class-name">Configured</span> <span class="token keyword">implements</span> <span class="token class-name">Tool</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//1. 创建 Job对象</span>
        <span class="token class-name">Job</span> job <span class="token operator">=</span> <span class="token class-name">Job</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getConf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;BulkLoadDriver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置提交yarn 必备参数</span>
        job<span class="token punctuation">.</span><span class="token function">setJarByClass</span><span class="token punctuation">(</span><span class="token class-name">BulkLoadDriver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2. 设置 天龙八部</span>
        <span class="token comment">//2.1: 设置 输入类 和输入路径</span>
        job<span class="token punctuation">.</span><span class="token function">setInputFormatClass</span><span class="token punctuation">(</span><span class="token class-name">TextInputFormat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TextInputFormat</span><span class="token punctuation">.</span><span class="token function">addInputPath</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;hdfs://node1:8020/hbase/bulkload/input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.2: 设置 mapper类和 map输出k2和v2的类型</span>
        job<span class="token punctuation">.</span><span class="token function">setMapperClass</span><span class="token punctuation">(</span><span class="token class-name">BulkLoadMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        job<span class="token punctuation">.</span><span class="token function">setMapOutputKeyClass</span><span class="token punctuation">(</span><span class="token class-name">ImmutableBytesWritable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        job<span class="token punctuation">.</span><span class="token function">setMapOutputValueClass</span><span class="token punctuation">(</span><span class="token class-name">Put</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.3: 设置 shuffle操作: 分区 排序 规约  分组</span>

        <span class="token comment">//2.7: 设置 reduce类  和 reduce 输出 k3和v3的类型</span>
        job<span class="token punctuation">.</span><span class="token function">setNumReduceTasks</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 没有reduce</span>

        job<span class="token punctuation">.</span><span class="token function">setOutputKeyClass</span><span class="token punctuation">(</span><span class="token class-name">ImmutableBytesWritable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        job<span class="token punctuation">.</span><span class="token function">setOutputValueClass</span><span class="token punctuation">(</span><span class="token class-name">Put</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.8: 设置输出类, 及输出路径  Hfile</span>
        job<span class="token punctuation">.</span><span class="token function">setOutputFormatClass</span><span class="token punctuation">(</span><span class="token class-name">HFileOutputFormat2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取 连接对象 和 table对象</span>
        <span class="token class-name">Connection</span> hbConn <span class="token operator">=</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getConf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Table</span> table <span class="token operator">=</span> hbConn<span class="token punctuation">.</span><span class="token function">getTable</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;TRANSFER_RECORD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">HFileOutputFormat2</span><span class="token punctuation">.</span><span class="token function">configureIncrementalLoad</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span>table<span class="token punctuation">,</span>hbConn<span class="token punctuation">.</span><span class="token function">getRegionLocator</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;TRANSFER_RECORD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">HFileOutputFormat2</span><span class="token punctuation">.</span><span class="token function">setOutputPath</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;hdfs://node1:8020/hbase/bulkload/output&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3. 提交任务</span>
        <span class="token keyword">boolean</span> flag <span class="token operator">=</span> job<span class="token punctuation">.</span><span class="token function">waitForCompletion</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> flag <span class="token operator">?</span> <span class="token number">0</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Configuration</span> conf <span class="token operator">=</span> <span class="token class-name">HBaseConfiguration</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        conf<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;hbase.zookeeper.quorum&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;node1:2181,node2:2181,node3:2181&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token class-name">ToolRunner</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>conf<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BulkLoadDriver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><ul><li><ol start="3"><li>测试操作:</li></ol></li></ul> <p><img src="./assets/img/image-20210310173814798.7bf5c71f.png" alt="image-20210310173814798"></p> <p>将Hfile文件格式数据加载HBase中</p> <p>语法格式要求</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hbase org.apache.hadoop.hbase.tool.LoadIncrementalHFiles  MR输出路径  HBase表名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行导入操作:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hbase org.apache.hadoop.hbase.tool.LoadIncrementalHFiles  /hbase/bulkload/output  TRANSFER_RECORD
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但是, 各位 你们今天执行可能会报错:  尝试了10次 依然无法导入错误</p> <ul><li>检查:</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>  查看 Hbase的日志: regionServer的日志 
     优先查看 当下执行导入操作的这个regionServer的日志, 如果没有错误
     在查询导入的表, 对应region属于哪个regionServer, 查询这个regionServer的日志
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="./assets/img/image-20210310174704409.caef5a65.png" alt="image-20210310174704409"></p> <ul><li>错误原因:</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>  hbase的采用 域名 和 hdfs的采用的域名不一致导致的,  hbase到导入数据的时候, 发现这个域名不一致, 以为不是同一个集群 导致失败
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>解决方案:</p> <ul><li><ol><li>查询 hbase-site.xml中  hbase.root.dir配置的hdfs的域名是什么?</li></ol> <p><img src="./assets/img/image-20210310175029780.5c36045c.png" alt="image-20210310175029780"></p></li> <li><ol start="2"><li>查询 hdfs的 core-site.xml中  fs.defaultFS的配置的hdfs的域名是什么?</li></ol> <p><img src="./assets/img/image-20210310175107619.99629fc2.png" alt="image-20210310175107619"></p></li> <li><ol start="3"><li>如果两个不一致, 建议大家修改 core-site.xml</li></ol> <ul><li>修改后, 将这这个配置发送给 node2 和 node3</li></ul></li> <li><ol start="4"><li>重启 hadoop 和 hbase 即可,然后重新尝试导入操作</li></ol></li></ul></li></ul> <h3 id="spark-bulkload"><a href="#spark-bulkload" class="header-anchor">#</a> Spark bulkLoad</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
  * @Author bigdatalearnshare
  */</span>
object <span class="token class-name">App</span> <span class="token punctuation">{</span>

  def <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> <span class="token class-name">Array</span><span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;HADOOP_USER_NAME&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>

    val sparkSession <span class="token operator">=</span> <span class="token class-name">SparkSession</span>
      <span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token string">&quot;spark.serializer&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;org.apache.spark.serializer.KryoSerializer&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">master</span><span class="token punctuation">(</span><span class="token string">&quot;local[*]&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">getOrCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    val rowKeyField <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span>
    
    val df <span class="token operator">=</span> sparkSession<span class="token punctuation">.</span>read<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;/people.json&quot;</span><span class="token punctuation">)</span>

    val fields <span class="token operator">=</span> df<span class="token punctuation">.</span>columns<span class="token punctuation">.</span><span class="token function">filterNot</span><span class="token punctuation">(</span>_ <span class="token operator">==</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sorted

    val data <span class="token operator">=</span> df<span class="token punctuation">.</span>rdd<span class="token punctuation">.</span>map <span class="token punctuation">{</span> row <span class="token operator">=</span><span class="token operator">&gt;</span>
      val rowKey <span class="token operator">=</span> <span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span><span class="token function">getAs</span><span class="token punctuation">(</span>rowKeyField<span class="token punctuation">)</span><span class="token punctuation">.</span>toString<span class="token punctuation">)</span>

      val kvs <span class="token operator">=</span> fields<span class="token punctuation">.</span>map <span class="token punctuation">{</span> field <span class="token operator">=</span><span class="token operator">&gt;</span>
        <span class="token keyword">new</span> <span class="token class-name">KeyValue</span><span class="token punctuation">(</span>rowKey<span class="token punctuation">,</span> <span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span><span class="token string">&quot;hfile-fy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span><span class="token function">getAs</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span><span class="token punctuation">.</span>toString<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ImmutableBytesWritable</span><span class="token punctuation">(</span>rowKey<span class="token punctuation">)</span><span class="token punctuation">,</span> kvs<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">flatMapValues</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">&gt;</span> x<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sortByKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    val hbaseConf <span class="token operator">=</span> <span class="token class-name">HBaseConfiguration</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>sparkSession<span class="token punctuation">.</span>sessionState<span class="token punctuation">.</span><span class="token function">newHadoopConf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    hbaseConf<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;hbase.zookeeper.quorum&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;linux-1:2181,linux-2:2181,linux-3:2181&quot;</span><span class="token punctuation">)</span>
    hbaseConf<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">TableOutputFormat</span><span class="token punctuation">.</span><span class="token constant">OUTPUT_TABLE</span><span class="token punctuation">,</span> <span class="token string">&quot;hfile&quot;</span><span class="token punctuation">)</span>
    val connection <span class="token operator">=</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>hbaseConf<span class="token punctuation">)</span>

    val tableName <span class="token operator">=</span> <span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;hfile&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">//没有HBase表则创建</span>
    <span class="token function">creteHTable</span><span class="token punctuation">(</span>tableName<span class="token punctuation">,</span> connection<span class="token punctuation">)</span>

    val table <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">getTable</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      val regionLocator <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">getRegionLocator</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span>

      val job <span class="token operator">=</span> <span class="token class-name">Job</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>hbaseConf<span class="token punctuation">)</span>

      job<span class="token punctuation">.</span><span class="token function">setMapOutputKeyClass</span><span class="token punctuation">(</span>classOf<span class="token punctuation">[</span><span class="token class-name">ImmutableBytesWritable</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      job<span class="token punctuation">.</span><span class="token function">setMapOutputValueClass</span><span class="token punctuation">(</span>classOf<span class="token punctuation">[</span><span class="token class-name">KeyValue</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

      <span class="token class-name">HFileOutputFormat2</span><span class="token punctuation">.</span><span class="token function">configureIncrementalLoad</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span> table<span class="token punctuation">,</span> regionLocator<span class="token punctuation">)</span>

      val savePath <span class="token operator">=</span> <span class="token string">&quot;hdfs://linux-1:9000/hfile_save&quot;</span>
      <span class="token function">delHdfsPath</span><span class="token punctuation">(</span>savePath<span class="token punctuation">,</span> sparkSession<span class="token punctuation">)</span>

      job<span class="token punctuation">.</span>getConfiguration<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;mapred.output.dir&quot;</span><span class="token punctuation">,</span> savePath<span class="token punctuation">)</span>

      data<span class="token punctuation">.</span><span class="token function">saveAsNewAPIHadoopDataset</span><span class="token punctuation">(</span>job<span class="token punctuation">.</span>getConfiguration<span class="token punctuation">)</span>

      val bulkLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LoadIncrementalHFiles</span><span class="token punctuation">(</span>hbaseConf<span class="token punctuation">)</span>
      bulkLoader<span class="token punctuation">.</span><span class="token function">doBulkLoad</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span>savePath<span class="token punctuation">)</span><span class="token punctuation">,</span> connection<span class="token punctuation">.</span>getAdmin<span class="token punctuation">,</span> table<span class="token punctuation">,</span> regionLocator<span class="token punctuation">)</span>

    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token comment">//WARN LoadIncrementalHFiles: Skipping non-directory hdfs://linux-1:9000/hfile_save/_SUCCESS 不影响,直接把文件移到HBASE对应HDFS地址了</span>
      table<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    sparkSession<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  def <span class="token function">creteHTable</span><span class="token punctuation">(</span>tableName<span class="token operator">:</span> <span class="token class-name">TableName</span><span class="token punctuation">,</span> connection<span class="token operator">:</span> <span class="token class-name">Connection</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    val admin <span class="token operator">=</span> connection<span class="token punctuation">.</span>getAdmin

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>admin<span class="token punctuation">.</span><span class="token function">tableExists</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      val tableDescriptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HTableDescriptor</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span>
      tableDescriptor<span class="token punctuation">.</span><span class="token function">addFamily</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HColumnDescriptor</span><span class="token punctuation">(</span><span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span><span class="token string">&quot;hfile-fy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      admin<span class="token punctuation">.</span><span class="token function">createTable</span><span class="token punctuation">(</span>tableDescriptor<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  def <span class="token function">delHdfsPath</span><span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> sparkSession<span class="token operator">:</span> <span class="token class-name">SparkSession</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    val hdfs <span class="token operator">=</span> <span class="token class-name">FileSystem</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>sparkSession<span class="token punctuation">.</span>sessionState<span class="token punctuation">.</span><span class="token function">newHadoopConf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    val hdfsPath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>hdfs<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>hdfsPath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//val filePermission = new FsPermission(FsAction.ALL, FsAction.ALL, FsAction.READ)</span>
      hdfs<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>hdfsPath<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br></div></div><h2 id="hbase和hive的集成操作"><a href="#hbase和hive的集成操作" class="header-anchor">#</a> HBase和Hive的集成操作</h2> <p><strong>hbase和hive的对比说明</strong></p> <ul><li>hive:  就是一个数据仓库的工具 , 基于HADOOP, 数据存储在Datanode, 执行翻译为MR, 支持SQL, 支持join  主要是用于离线分析操作 与清洗操作, 延迟较高</li> <li>hbase: 是一个nosql型数据库, 用于存储数据, 基于hadoop, 数据最终存储在datanode, 不支持SQL, 不支持join 主要是用于接入在线业务, 延迟较低 , 具有高效的随机读写能力</li></ul> <p>说明:</p> <p>​     hive 和 hbase都是基于hadoop的不同的工具, hive和hbase可以集成在一起,hive on hbase ，使用hql进行批量分析查询，若是要求随机读写需集成phoenix。</p> <p>1.2 hbase如何hive进行集成操作</p> <p>集成步骤:</p> <ul><li><ol><li>将hive提供的一个和hbase整合的通信包, 导入到Hbase的lib目录下</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  <span class="token builtin class-name">cd</span> /export/server/hive-2.1.0/lib/
  <span class="token function">cp</span> hive-hbase-handler-2.1.0.jar  /export/server/hbase-2.1.0/lib/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><ol start="2"><li>将 这个通信包 发送给 node1 和 node2的hbase的lib目录下</li></ol></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  <span class="token builtin class-name">cd</span> /export/server/hbase-2.1.0/lib/
  <span class="token function">scp</span> hive-hbase-handler-2.1.0.jar node1:/export/server/hbase-2.1.0/lib/
  <span class="token function">scp</span> hive-hbase-handler-2.1.0.jar node2:/export/server/hbase-2.1.0/lib/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><ol start="3"><li>修改 hive的 配置文件:</li></ol> <ul><li>hive-site.xml</li></ul></li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>  cd /export/server/hive-2.1.0/conf/ 
  vim hive-site.xml 
  
  添加以下内容:
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.zookeeper.quorum<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node1,node2,node3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  
  
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hbase.zookeeper.quorum<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node1,node2,node3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.server2.enable.doAs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>hive-env.sh</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  <span class="token builtin class-name">cd</span> /export/server/hive-2.1.0/conf/ 
  <span class="token function">vim</span> hive-env.sh 
  
  添加以下内容:
  <span class="token builtin class-name">export</span> <span class="token assign-left variable">HBASE_HOME</span><span class="token operator">=</span>/export/server/hbase-2.1.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="./assets/img/image-20210311091557861.09cef3f8.png" alt="image-20210311091557861"></p> <ul><li>启动</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">  1)</span> <span class="token value attr-value">先启动 zookeeper , 保证zookeeper启动良好</span>
<span class="token key attr-name">  2)</span> <span class="token value attr-value">接着启动 hadoop集群, 保证hadoop是启动良好</span>
<span class="token key attr-name">  3)</span> <span class="token value attr-value">然后启动 hbase集群, 保证hbase集群是启动良好的</span>
<span class="token key attr-name">  4)</span> <span class="token value attr-value">最后启动 hive  , 保证hive是启动良好的</span>
  
<span class="token key attr-name">  说明</span><span class="token punctuation">:</span> <span class="token value attr-value">3  和 4  可以调换</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>测试 查看是否可用:</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>  第一步: 在hbase的shell客户端下, 创建一个表 并添加相关的数据
  hbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:007:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> create <span class="token string">'hbase_hive_score'</span>,<span class="token string">'cf'</span>
  
  hbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:007:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> put <span class="token string">'hbase_hive_score'</span> ,<span class="token string">'1'</span>,<span class="token string">'cf:name'</span>,<span class="token string">'zhangsan'</span>
                                                                               
  hbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:007:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> put <span class="token string">'hbase_hive_score'</span> ,<span class="token string">'1'</span>,<span class="token string">'cf:age'</span>,<span class="token string">'25'</span>
                                                                                 
  hbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:008:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> put <span class="token string">'hbase_hive_score'</span> ,<span class="token string">'2'</span>,<span class="token string">'cf:name'</span>,<span class="token string">'lisi'</span>
                                                                                   
  hbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:009:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> put <span class="token string">'hbase_hive_score'</span> ,<span class="token string">'2'</span>,<span class="token string">'cf:age'</span>,<span class="token string">'30'</span>
                                                                                
  hbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:010:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> put <span class="token string">'hbase_hive_score'</span> ,<span class="token string">'3'</span>,<span class="token string">'cf:name'</span>,<span class="token string">'wangwu'</span>
                                                                                 
  hbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:011:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> put <span class="token string">'hbase_hive_score'</span> ,<span class="token string">'3'</span>,<span class="token string">'cf:age'</span>,<span class="token string">'18'</span>
  
  hbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:012:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> scan <span class="token string">'hbase_hive_score'</span>
  ROW                        COLUMN+CELL                                                              
   <span class="token number">1</span>                         <span class="token assign-left variable">column</span><span class="token operator">=</span>cf:age, <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token number">1615427034130</span>, <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">25</span>                         
   <span class="token number">1</span>                         <span class="token assign-left variable">column</span><span class="token operator">=</span>cf:name, <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token number">1615427024464</span>, <span class="token assign-left variable">value</span><span class="token operator">=</span>zhangsan                  
   <span class="token number">2</span>                         <span class="token assign-left variable">column</span><span class="token operator">=</span>cf:age, <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token number">1615427052348</span>, <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">30</span>                         
   <span class="token number">2</span>                         <span class="token assign-left variable">column</span><span class="token operator">=</span>cf:name, <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token number">1615427045923</span>, <span class="token assign-left variable">value</span><span class="token operator">=</span>lisi                      
   <span class="token number">3</span>                         <span class="token assign-left variable">column</span><span class="token operator">=</span>cf:age, <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token number">1615427082291</span>, <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">18</span>                         
   <span class="token number">3</span>                         <span class="token assign-left variable">column</span><span class="token operator">=</span>cf:name, <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token number">1615427073970</span>, <span class="token assign-left variable">value</span><span class="token operator">=</span>wangwu      
  
  
  
  第二步: 在hive中对hbase的这个表进行映射匹配操作, 由于数据是被hbase所管理, 在hive中建表选择外部表
  语法格式:
      create  external table  表名 <span class="token punctuation">(</span>
         
         字段1 类型,
         字段2 类型,
         字段3 类型
         <span class="token punctuation">..</span><span class="token punctuation">..</span>
      <span class="token punctuation">)</span> stored by <span class="token string">'org.apache.hadoop.hive.hbase.HBaseStorageHandler'</span> with serdeproperties<span class="token punctuation">(</span><span class="token string">'hbase.columns.mapping'</span><span class="token operator">=</span><span class="token string">':key,列族1:列名1...'</span><span class="token punctuation">)</span> tblproperties<span class="token punctuation">(</span><span class="token string">'hbase.table.name'</span><span class="token operator">=</span><span class="token string">'hbase的表名'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
  注意: 
     表名 <span class="token builtin class-name">:</span> 建议和hbase表名保持一致 <span class="token punctuation">(</span>不一致也是OK的<span class="token punctuation">)</span>
     字段 <span class="token builtin class-name">:</span> 建议和hbase列名保持一致 
         字段的第一个, 建议放置的主键字段, 不需要加primary key
  
  create  external table  day03_hivehbase.hbase_hive_score <span class="token punctuation">(</span>
  <span class="token function">id</span> int,
  name string,
  age int
  <span class="token punctuation">)</span> stored by <span class="token string">'org.apache.hadoop.hive.hbase.HBaseStorageHandler'</span> with serdeproperties<span class="token punctuation">(</span><span class="token string">'hbase.columns.mapping'</span><span class="token operator">=</span><span class="token string">':key,cf:name,cf:age'</span><span class="token punctuation">)</span> tblproperties<span class="token punctuation">(</span><span class="token string">'hbase.table.name'</span><span class="token operator">=</span><span class="token string">'hbase_hive_score'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p><img src="./assets/img/image-20210311095801255.5f4ba362.png" alt="image-20210311095801255"></p> <p>hive集成存在的问题:</p> <h2 id="apache-phoenix"><a href="#apache-phoenix" class="header-anchor">#</a> <strong>Apache Phoenix</strong></h2> <p>Apache  <strong>Phoenix</strong> 仅仅是一款可以通过<strong>SQL的方式来操作（CRUD）hbase的工具</strong>，底层大量的利用hbase的协处理器。</p> <h3 id="phoenix集成hbase与hive、impala集成的对比"><a href="#phoenix集成hbase与hive、impala集成的对比" class="header-anchor">#</a> <strong>phoenix集成hbase与hive、impala集成的对比</strong></h3> <p><img src="./assets/img/image-20230328123652718.62b05659.png" alt="image-20230328123652718"></p> <p><img src="./assets/img/image-20230328123802865.bea1727d.png" alt="image-20230328123802865"></p> <h3 id="hbase的协处理器"><a href="#hbase的协处理器" class="header-anchor">#</a> HBase的协处理器</h3> <p>3.1 协处理器的基本介绍</p> <p>hbase提供的协处理器主要有二大类</p> <ul><li><ol><li>observer:</li></ol></li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">       可以将observer看做是</span> <span class="token value attr-value">数据库的触发器 或者可以理解为监听器, 可以通过observer提供一些钩子(事件), 对某些事件进行监听操作, 一旦触发了这个事件, 理解通知绑定监听事件的人即可</span>
       
  这类协处理器还可以做什么事情呢?
<span class="token key attr-name">      1)</span> <span class="token value attr-value">操作日志记录</span>
<span class="token key attr-name">      2)</span> <span class="token value attr-value">权限的管理</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language- extra-class"><pre><code> ![image-20210311153033576](hbase.assets/image-20210311153033576.png)
</code></pre></div><ul><li><ol start="2"><li>endpoint:</li></ol></li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">     这类协处理器</span> <span class="token value attr-value">可以将其看做是 数据库的中存储过程, 也可以类似于在java中定义一个方法, 将相关的功能放置在这个方法中 即可</span>
<span class="token key attr-name">     一旦定义这样协处理器,</span> <span class="token value attr-value">可以将这个协处理器提交到server(服务)端, 有各个服务端来执行这段操作, 将执行的结果返回给客户端, 客户端在根据返回结果做相应的处理即可 </span>
     
<span class="token key attr-name">  作用</span><span class="token punctuation">:</span> <span class="token value attr-value">做 聚合操作  sum  count  max ...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>3.2 如何设置协处理器</p> <ul><li><p>设置方式一: 静态设置  全局设置</p> <p><img src="./assets/img/image-20210311155716585.d8779f47.png" alt="image-20210311155716585"></p></li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">  此配置需要配置到hbase-site.xml中</span> <span class="token value attr-value"> 全局有效, 每个hbase表 都会有这个协处理器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>设置方式二: 动态设置, 只针对某个表有效</p> <ul><li><p>第一步: 禁用表</p></li> <li><p>第二步: 添加协处理器</p> <p><img src="./assets/img/image-20210311155905440.191ff1d4.png" alt="image-20210311155905440"></p></li> <li><p>第三步: 启用表</p></li></ul></li> <li><p>如何卸载动态设置协处理器:</p> <ul><li><p>第一步: 禁用表</p></li> <li><p>第二步: 删除协处理器</p> <p><img src="./assets/img/image-20210311160015387.6fb8c59a.png" alt="image-20210311160015387"></p></li> <li><p>第三步: 启用表</p></li></ul></li></ul> <p><strong>apache Phoenix的安装</strong></p> <p>注意:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1) 在安装完成后, 如果hbase无法启动, 请检查 hbase的配置文件 以及lib目录,3个节点都需要检查 是否OK

2) 在安装完成后, 如果Phoenix无法启动, 一启动就报错, 检查 Phoenix的bin目录下的hbase-site.xml 其内容是否是hbase的conf目录下的那个hbase-site.xml的内容
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="apache-phoenix的基本入门操作"><a href="#apache-phoenix的基本入门操作" class="header-anchor">#</a> Apache Phoenix的基本入门操作</h3> <p><a href="https://phoenix.apache.org/language/" target="_blank" rel="noopener noreferrer">Grammar | Apache Phoenix<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><ol><li>如何在Phoenix创建表</li></ol></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  <span class="token comment">--格式: </span>
  <span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">[</span><span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">]</span> 表名 <span class="token punctuation">(</span>
     rowkey名称  数据类型 <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
     列族名<span class="token punctuation">.</span>列名<span class="token number">1</span> 数据类型 <span class="token punctuation">,</span>
     列族名<span class="token punctuation">.</span>列名<span class="token number">2</span> 数据类型 <span class="token punctuation">,</span>
     列族名<span class="token punctuation">.</span>列名<span class="token number">3</span> 数据类型 <span class="token punctuation">,</span>
     列族名<span class="token punctuation">.</span>列名<span class="token number">4</span> 数据类型 
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>案例: 创建一张订单表</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  <span class="token keyword">create</span> <span class="token keyword">table</span>  order_dtl <span class="token punctuation">(</span>
     id  <span class="token keyword">varchar</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span><span class="token keyword">status</span> <span class="token keyword">varchar</span> <span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>money  <span class="token keyword">integer</span> <span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>pay_way <span class="token keyword">integer</span> <span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>user_id <span class="token keyword">varchar</span><span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>operation <span class="token keyword">varchar</span><span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>category <span class="token keyword">varchar</span> 
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><img src="./assets/img/image-20210311171906172.3ec769af.png" alt="image-20210311171906172"></p> <p>执行完成后, 可以在hbase的webui中查看到, 多出来一张表, 在此表中默认的region数量为1, 同时给表加入很多协处理器</p> <p><img src="./assets/img/image-20210311172001709.cc485e15.png" alt="image-20210311172001709"></p> <p>​     注意: Phoenix会自动将小写变更为大写: 表名 列族 列名</p> <p>​     需求: 字段必须为小写, 不使用大写 , 如何做</p> <div class="language- extra-class"><pre><code>create table  &quot;order_dtl_01&quot; (
   &quot;id&quot;  varchar primary key,
   &quot;c1&quot;.&quot;status&quot; varchar ,
   &quot;c1&quot;.money  integer ,
   c1.&quot;pay_way&quot; integer ,
   c1.user_id varchar,
   c1.operation varchar,
   c1.category varchar 
);
</code></pre></div><p>注意:<br>
如果想要使用小写, 只需要在需要小写的内容两端加上双引号(必须为双引号)</p> <p>单引号 表示是普通字符串</p> <p>推荐: 建议使用大写, 如果为小写, 后续所有的操作, 只要用到这个小写的内容, 必须加双引号</p> <ul><li><ol start="2"><li>如何在Phoenix中查看所有的表</li></ol></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>  格式:
      !table
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="./assets/img/image-20210311172232631.0f3b991f.png" alt="image-20210311172232631"></p> <ul><li><ol start="3"><li>查看某一个表的结构信息</li></ol></li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">  格式</span><span class="token punctuation">:</span>
<span class="token comment">     !desc 表名</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="./assets/img/image-20210311172409807.094cb9d3.png" alt="image-20210311172409807"></p> <p>注意: Phoenix会自动将小写变更为大写: 表名 列族 列名</p> <p>需求: 字段必须为小写, 不使用大写 , 如何做</p> <ul><li><ol start="4"><li>如何向表中插入数据</li></ol></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>  格式:
     upsert into 表名(列族.列名1,列族.列名2,... ) values(值1,值2 ....)
     
  案例:
     upsert into ORDER_DTL values('000002','未提交',4070,1,'4944191','2020/04/25 12:09:16','手机');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="./assets/img/image-20210311175058056.22ae8b28.png" alt="image-20210311175058056"></p> <ul><li><ol start="5"><li>查询操作: 与标准的SQL是一致的</li></ol> <ul><li><strong>只不过 不支持 join 不支持多表关联 仅支持单表查询</strong></li></ul></li> <li><ol start="6"><li>删除数据: 与标准SQL是一致的</li></ol> <p><img src="./assets/img/image-20210311175425455.ffde6f37.png" alt="image-20210311175425455"></p></li> <li><ol start="7"><li>分页查询</li></ol></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>  语法: 
      select * from 表  limit 每页显示n条 offset(m-1)
      (从第m条开始显示n条)
      
  案例:
  1) 首先先添加一坨数据
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000002','已提交',4070,1,'4944191','2020-04-25 12:09:16','手机;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000003','已完成',4350,1,'1625615','2020-04-25 12:09:37','家用电器;;电脑;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000004','已提交',6370,3,'3919700','2020-04-25 12:09:39','男装;男鞋;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000005','已付款',6370,3,'3919700','2020-04-25 12:09:44','男装;男鞋;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000006','已提交',9380,1,'2993700','2020-04-25 12:09:41','维修;手机;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000007','已付款',9380,1,'2993700','2020-04-25 12:09:46','维修;手机;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000008','已完成',6400,2,'5037058','2020-04-25 12:10:13','数码;女装;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000009','已付款',280,1,'3018827','2020-04-25 12:09:53','男鞋;汽车;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000010','已完成',5600,1,'6489579','2020-04-25 12:08:55','食品;家用电器;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000011','已付款',5600,1,'6489579','2020-04-25 12:09:00','食品;家用电器;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000012','已提交',8340,2,'2948003','2020-04-25 12:09:26','男装;男鞋;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000013','已付款',8340,2,'2948003','2020-04-25 12:09:30','男装;男鞋;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000014','已提交',7060,2,'2092774','2020-04-25 12:09:38','酒店;旅游;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000015','已提交',640,3,'7152356','2020-04-25 12:09:49','维修;手机;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000016','已付款',9410,3,'7152356','2020-04-25 12:10:01','维修;手机;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000017','已提交',9390,3,'8237476','2020-04-25 12:10:08','男鞋;汽车;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000018','已提交',7490,2,'7813118','2020-04-25 12:09:05','机票;文娱;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000019','已付款',7490,2,'7813118','2020-04-25 12:09:06','机票;文娱;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000020','已付款',5360,2,'5301038','2020-04-25 12:08:50','维修;手机;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000021','已提交',5360,2,'5301038','2020-04-25 12:08:53','维修;手机;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000022','已取消',5360,2,'5301038','2020-04-25 12:08:58','维修;手机;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000023','已付款',6490,0,'3141181','2020-04-25 12:09:22','食品;家用电器;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000024','已付款',3820,1,'9054826','2020-04-25 12:10:04','家用电器;;电脑;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000025','已提交',4650,2,'5837271','2020-04-25 12:08:52','机票;文娱;');
  UPSERT INTO &quot;ORDER_DTL&quot; VALUES('000026','已付款',4650,2,'5837271','2020-04-25 12:08:57','机票;文娱;');
  
  2) 采用分页查询: 每页显示 5 条  , 显示第一页
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p><img src="./assets/img/image-20210311175853756.f103abf7.png" alt="image-20210311175853756"></p> <ul><li><ol start="8"><li>删除表: 和标准SQL是一致</li></ol></li></ul> <h3 id="apache-phoenix的预分区操作"><a href="#apache-phoenix的预分区操作" class="header-anchor">#</a> Apache Phoenix的预分区操作</h3> <p>​	通过Phoenix来构建表, 默认情况下, 只有一个region</p> <p>Phoenix预分区的方式:</p> <ul><li><ol><li>手动预分区:</li></ol></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  语法格式:
  <span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">[</span><span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">]</span> 表名 <span class="token punctuation">(</span>
     rowkey名称  数据类型 <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
     列族名<span class="token punctuation">.</span>列名<span class="token number">1</span> 数据类型 <span class="token punctuation">,</span>
     列族名<span class="token punctuation">.</span>列名<span class="token number">2</span> 数据类型 <span class="token punctuation">,</span>
     列族名<span class="token punctuation">.</span>列名<span class="token number">3</span> 数据类型 <span class="token punctuation">,</span>
     列族名<span class="token punctuation">.</span>列名<span class="token number">4</span> 数据类型 
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">)</span>
  compression<span class="token operator">=</span><span class="token string">'GZ'</span> <span class="token comment">-- 压缩方式</span>
  split <span class="token keyword">on</span><span class="token punctuation">(</span>region分区方案<span class="token punctuation">)</span>  <span class="token comment">-- 定义手动预分区操作</span>
  <span class="token punctuation">;</span>
  
  案例: 
  <span class="token keyword">drop</span> <span class="token keyword">table</span> order_dtl<span class="token punctuation">;</span>
  <span class="token keyword">create</span> <span class="token keyword">table</span>  order_dtl <span class="token punctuation">(</span>
     id  <span class="token keyword">varchar</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span><span class="token keyword">status</span> <span class="token keyword">varchar</span> <span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>money  <span class="token keyword">integer</span> <span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>pay_way <span class="token keyword">integer</span> <span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>user_id <span class="token keyword">varchar</span><span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>operation <span class="token keyword">varchar</span><span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>category <span class="token keyword">varchar</span> 
  <span class="token punctuation">)</span>
  compression<span class="token operator">=</span><span class="token string">'GZ'</span>
  split <span class="token keyword">on</span><span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">,</span><span class="token string">'20'</span><span class="token punctuation">,</span><span class="token string">'30'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ul><li><ol start="2"><li>hash预分区:</li></ol></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  格式:
  <span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">[</span><span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">]</span> 表名 <span class="token punctuation">(</span>
     rowkey名称  数据类型 <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
     列族名<span class="token punctuation">.</span>列名<span class="token number">1</span> 数据类型 <span class="token punctuation">,</span>
     列族名<span class="token punctuation">.</span>列名<span class="token number">2</span> 数据类型 <span class="token punctuation">,</span>
     列族名<span class="token punctuation">.</span>列名<span class="token number">3</span> 数据类型 <span class="token punctuation">,</span>
     列族名<span class="token punctuation">.</span>列名<span class="token number">4</span> 数据类型 
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">)</span>
  compression<span class="token operator">=</span><span class="token string">'GZ'</span><span class="token punctuation">,</span> <span class="token comment">-- 压缩方式</span>
  salt_buckets<span class="token operator">=</span>N  <span class="token comment">-- 加盐预分区 (hash + rowkey自动加盐)</span>
  <span class="token punctuation">;</span>
  
  案例
  <span class="token keyword">drop</span> <span class="token keyword">table</span> order_dtl<span class="token punctuation">;</span>
  <span class="token keyword">create</span> <span class="token keyword">table</span>  order_dtl <span class="token punctuation">(</span>
     id  <span class="token keyword">varchar</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span><span class="token keyword">status</span> <span class="token keyword">varchar</span> <span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>money  <span class="token keyword">integer</span> <span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>pay_way <span class="token keyword">integer</span> <span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>user_id <span class="token keyword">varchar</span><span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>operation <span class="token keyword">varchar</span><span class="token punctuation">,</span>
     c1<span class="token punctuation">.</span>category <span class="token keyword">varchar</span> 
  <span class="token punctuation">)</span>
  compression<span class="token operator">=</span><span class="token string">'GZ'</span> <span class="token punctuation">,</span>
  salt_buckets<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>​      总结: 如果使用Phoenix的加盐预分区方案, Phoenix在添加数据的时候, 会自动在rowkey的前面进行加盐处理, 但是对用户从操作Phoenix角度来说是无感操作,除非我们去hbase查看原始内容</p> <h3 id="apache-phoenix的视图"><a href="#apache-phoenix的视图" class="header-anchor">#</a> apache  Phoenix的视图</h3> <p>​	   默认情况下, Phoenix中只展示由Phoenix自己创建表, 如果说hbase的表是通过hbase自己来构建的, 在Phoenix中无法查看到, 那么也就意味着, 无法通过Phoenix来操作hbase原有表</p> <p>​	   如果想通过Phoenix对hbase原有表进行SQL的操作, 此时可以利用Phoenix提供的视图来解决</p> <p>如何实现视图呢?</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>格式:
   <span class="token keyword">create</span>  <span class="token keyword">view</span>  <span class="token string">&quot;名称空间&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;hbase对应的表的表名&quot;</span> <span class="token punctuation">(</span>
       <span class="token keyword">key</span> <span class="token keyword">varchar</span>  <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
       <span class="token string">&quot;列族&quot;</span><span class="token punctuation">.</span><span class="token string">&quot;列名&quot;</span> 类型<span class="token punctuation">,</span>
       <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
   
   <span class="token punctuation">)</span> <span class="token punctuation">[</span>default_colunm_family<span class="token operator">=</span><span class="token string">'列族名'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

注意事项:
     视图的名称 一定要与 需要建立视图的hbase的表名是一致的
     <span class="token keyword">key</span>的名称是可以任意的<span class="token punctuation">,</span>但是必须添加<span class="token keyword">primary</span> <span class="token keyword">key</span>
     普通的列<span class="token punctuation">,</span> 需要和 hbase的对应表保持一致
     
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>案例: 针对 WATER_BILL 表 构建视图</p> <p><img src="./assets/img/image-20210314093340844.bb5c400b.png" alt="image-20210314093340844"></p> <div class="language-SQL line-numbers-mode"><pre class="language-sql"><code> <span class="token keyword">create</span>  <span class="token keyword">view</span>  <span class="token string">&quot;WATER_BILL&quot;</span> <span class="token punctuation">(</span>
       ID <span class="token keyword">varchar</span>  <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
       C1<span class="token punctuation">.</span>NAME <span class="token keyword">varchar</span><span class="token punctuation">,</span>
       C1<span class="token punctuation">.</span>ADDRESS <span class="token keyword">varchar</span><span class="token punctuation">,</span>
       C1<span class="token punctuation">.</span>LATEST_DATE <span class="token keyword">varchar</span><span class="token punctuation">,</span>
       C1<span class="token punctuation">.</span>NUM_CURRENT UNSIGNED_DOUBLE <span class="token punctuation">,</span>
       C1<span class="token punctuation">.</span>NUM_PREVIOUS UNSIGNED_DOUBLE <span class="token punctuation">,</span>
       C1<span class="token punctuation">.</span>NUM_USAGE UNSIGNED_DOUBLE <span class="token punctuation">,</span>
       C1<span class="token punctuation">.</span>PAY_DATE <span class="token keyword">varchar</span><span class="token punctuation">,</span>
       C1<span class="token punctuation">.</span>RECORD_DATE <span class="token keyword">varchar</span><span class="token punctuation">,</span>
       C1<span class="token punctuation">.</span>SEX <span class="token keyword">varchar</span><span class="token punctuation">,</span>
       C1<span class="token punctuation">.</span>TOTAL_MONEY UNSIGNED_DOUBLE 
   <span class="token punctuation">)</span><span class="token punctuation">;</span>
   
   UNSIGNED_DOUBLE: 无符号的<span class="token keyword">double</span>类型
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><img src="./assets/img/image-20210314090925165.182ad9bb.png" alt="image-20210314090925165"></p> <p>查询视图, 观察是否有数据:</p> <p><img src="./assets/img/image-20210314093301759.da9a1ae2.png" alt="image-20210314093301759"></p> <p>查询 六月份的用户的用水量</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>  name<span class="token punctuation">,</span>num_usage<span class="token punctuation">,</span> record_date <span class="token keyword">from</span> water_bill <span class="token keyword">where</span> record_date <span class="token operator">between</span> <span class="token string">'2020-06-01'</span> <span class="token operator">and</span> <span class="token string">'2020-06-30'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="./assets/img/image-20210314093632566.cc048086.png" alt="image-20210314093632566"></p> <h3 id="apache-phoenix的二级索引"><a href="#apache-phoenix的二级索引" class="header-anchor">#</a> Apache Phoenix的二级索引</h3> <p>​    索引目的:  提高查询的效率</p> <p><img src="./assets/img/image-20210314095623992.1f2f56f6.png" alt="image-20210314095623992"></p> <p>2.1 Phoenix索引的分类</p> <p>在Phoenix中共计提供了四种索引:</p> <ul><li><ol><li>全局索引</li></ol> <ul><li>特点:</li></ul></li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">      在构建了全局索引之后,</span> <span class="token value attr-value">会单独的形成一张索引表,单独的索引表与目标表拥有相同的region数量,  当查询数据时候, 可以先到索引表查询, 查询到之后, 再到目标中进行查询即可, 但是如果对数据进行修改, 此时索引表的数据也会随之进行修改操作</span>
  
<span class="token key attr-name">  注意</span><span class="token punctuation">:</span> 
<span class="token key attr-name">      在修改索引的表,</span> <span class="token value attr-value">对于全局索引而言, 需要做全局更新操作, 代价较大, 效率较低</span>
<span class="token key attr-name">      在查询的过程中,</span> <span class="token value attr-value">如果SQL语句中出现了非索引的字段, 此时全局索引无法生效</span>
  
<span class="token key attr-name">  全局索引一般和覆盖索引搭配使用，读的效率很高，但对写入的效率影响较大,</span> <span class="token value attr-value">所以说 全局索引 比较适用于 读多 写少的场景</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>适用于: 读多 写少的场景</li> <li>如何来构建索引呢?</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  格式:
      <span class="token keyword">create</span> <span class="token keyword">index</span>  索引名称  <span class="token keyword">on</span>  表名<span class="token punctuation">(</span>列名<span class="token number">1</span><span class="token punctuation">,</span>列名<span class="token number">2</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>如何删除索引呢?</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  格式:
     <span class="token keyword">drop</span> <span class="token keyword">index</span>  索引名称 <span class="token keyword">on</span> 表名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li></li> <li><ol start="2"><li>本地索引</li></ol> <ul><li>特点:</li></ul></li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">      在构建了本地索引后,</span> <span class="token value attr-value">不会单独创建一张索引表, 索引数据直接附带在目标表对应字段的后面, 这样在进行修改(增 删 改)数据操作的时候 , 直接在目标对索引数据一次性就处理掉了, 适用于写的多场景</span>
<span class="token key attr-name">      在执行查询的时候,</span> <span class="token value attr-value">Phoenix会自动选择是否使用本地索引, 即使有非索引的字段, 依然可用</span>
  
<span class="token key attr-name">  注意</span><span class="token punctuation">:</span>
<span class="token key attr-name">      如果表在构建的时候,</span> <span class="token value attr-value">采用的加盐预分区的方案, 建议大家不要使用本地索引, 因为有部分操作是不支持的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>适用于:   写多  读少的场景</li> <li>如何创建本地索引呢?</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  格式:
      <span class="token keyword">create</span> <span class="token keyword">local</span> <span class="token keyword">index</span>  索引名称  <span class="token keyword">on</span>  表名<span class="token punctuation">(</span>列名<span class="token number">1</span><span class="token punctuation">,</span>列名<span class="token number">2</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>如何删除索引</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  格式:
     <span class="token keyword">drop</span> <span class="token keyword">index</span>  索引名称 <span class="token keyword">on</span> 表名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><ol start="3"><li>覆盖索引</li></ol> <ul><li>特点:</li></ul></li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">       覆盖索引无法单独使用,</span> <span class="token value attr-value">必须和全局索引或者本地索引配合使用, 在构建覆盖索引后, 将对应索引字段数据, 直接放置在本地索引或者全局索引字段的后面即可, 这样在查询的时候, 可以不去查询目标表, 直接在索引表中可以所有需要的字段数据, 这样可以提升读取数据时间</span>
       
       一般会和全局索引组合使用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>适用于: 将一些不参与条件的字段 但是会参与展示的字段 放置在覆盖索引上</li> <li>如何构建覆盖索引呢?</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  格式:
     <span class="token keyword">create</span> <span class="token punctuation">[</span><span class="token keyword">local</span><span class="token punctuation">]</span> <span class="token keyword">index</span>  索引名称  <span class="token keyword">on</span> 表名<span class="token punctuation">(</span>列名<span class="token number">1</span><span class="token punctuation">,</span> 列名<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> include<span class="token punctuation">(</span>列<span class="token number">1</span><span class="token punctuation">,</span>列<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>如何删除覆盖索引: 随着全局或者本地索引的删除而删除</p></li> <li><ol start="4"><li>函数索引</li></ol> <ul><li>特点</li></ul></li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">      无法单独使用,</span> <span class="token value attr-value">在本地索引或者全局索引中使用,  主要用于针对某个函数的结果来构建索引, 这样以后用到这个对应结果数据的函数, 那么也可以执行索引优化</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>适用于: 多条SQL语句中, 需要频繁的使用某个函数的结果</li> <li>如何构建呢?</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  格式:
     <span class="token keyword">create</span> <span class="token punctuation">[</span><span class="token keyword">local</span><span class="token punctuation">]</span> <span class="token keyword">index</span>  索引名称  <span class="token keyword">on</span> 表名<span class="token punctuation">(</span>列<span class="token number">1</span><span class="token punctuation">,</span>列<span class="token number">2</span><span class="token punctuation">,</span>函数名称<span class="token punctuation">(</span>字段<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2.2 案例一: 创建全局索引+覆盖索引</p> <ul><li><p>需求: 查询  用户id为 8237476 的订单数据</p></li> <li><p>SQL:</p></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  <span class="token keyword">select</span>  USER_ID<span class="token punctuation">,</span>ID<span class="token punctuation">,</span>MONEY <span class="token keyword">from</span> order_dtl <span class="token keyword">where</span> USER_ID<span class="token operator">=</span><span class="token string">'8237476'</span><span class="token punctuation">;</span>
  
  使用 <span class="token keyword">explain</span>  检查其执行的效率: 
  <span class="token keyword">explain</span> <span class="token keyword">select</span>  USER_ID<span class="token punctuation">,</span>ID<span class="token punctuation">,</span>MONEY <span class="token keyword">from</span> order_dtl <span class="token keyword">where</span> USER_ID<span class="token operator">=</span><span class="token string">'8237476'</span><span class="token punctuation">;</span>
  
  结论:  通过扫描全表 获取的结果数据
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="./assets/img/image-20210314105003470.8b2b343d.png" alt="image-20210314105003470"></p> <ul><li>索引的方式来提升效率</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token number">1</span><span class="token punctuation">)</span> 创建索引:
      <span class="token keyword">create</span>  <span class="token keyword">index</span>  idx_index_order_dtl <span class="token keyword">on</span> order_dtl<span class="token punctuation">(</span>user_id<span class="token punctuation">)</span> include<span class="token punctuation">(</span>ID<span class="token punctuation">,</span>MONEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="./assets/img/image-20210314105458315.c0f10d2e.png" alt="image-20210314105458315"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token number">2</span><span class="token punctuation">)</span> 重新检查刚刚<span class="token keyword">SQL</span><span class="token punctuation">,</span> 是否会执行操作
   <span class="token keyword">explain</span> <span class="token keyword">select</span>  USER_ID<span class="token punctuation">,</span>ID<span class="token punctuation">,</span>MONEY <span class="token keyword">from</span> order_dtl <span class="token keyword">where</span> USER_ID<span class="token operator">=</span><span class="token string">'8237476'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="./assets/img/image-20210314105720992.40fa378a.png" alt="image-20210314105720992"></p> <p>如果查询的中, 出现了非索引的字段, 会出现什么问题呢?</p> <p><img src="./assets/img/image-20210314105927620.d1a46f85.png" alt=""></p> <p>总结: 全局索引无法生效</p> <p>要求: 就想使用全局索引, 而且不想对这个非索引的字段构建索引</p> <p>解决方案: 通过强制使用全局索引方案 来生效</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token comment">/*+INDEX(order_dtl idx_index_order_dtl) */</span>  <span class="token operator">*</span> <span class="token keyword">from</span> order_dtl <span class="token keyword">where</span> USER_ID<span class="token operator">=</span><span class="token string">'8237476'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="./assets/img/image-20210314110345946.8960ec8b.png" alt="image-20210314110345946"></p> <p>删除索引</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">index</span> idx_index_order_dtl <span class="token keyword">on</span> order_dtl<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.3 案例二:  本地索引</p> <ul><li>需求:   根据  订单ID  订单状态  支付金额  支付方式  用户ID 查询数据</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>1) 构建索引:
   create local index  IDX_LOCAL_order_dtl  on  order_dtl(ID,STATUS,MONEY,PAY_WAY,USER_ID);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="data:image/png;base64,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" alt="image-20210314111120030"></p> <p>说明: 虽然可以通过!table看到索引表, 本质上在hbase上没有构建索引表</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token number">2</span><span class="token punctuation">)</span> 测试<span class="token number">1</span>: 所有字段都是本地索引
   <span class="token keyword">explain</span> <span class="token keyword">select</span>  USER_ID<span class="token punctuation">,</span>ID<span class="token punctuation">,</span>MONEY <span class="token keyword">from</span> order_dtl <span class="token keyword">where</span> USER_ID<span class="token operator">=</span><span class="token string">'8237476'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="./assets/img/image-20210314111237305.5c1112c3.png" alt="image-20210314111237305"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token number">3</span><span class="token punctuation">)</span> 测试<span class="token number">2</span>:  有部分字段没有索引
   <span class="token keyword">explain</span> <span class="token keyword">select</span>  USER_ID<span class="token punctuation">,</span>ID<span class="token punctuation">,</span>MONEY<span class="token punctuation">,</span>CATEGORY <span class="token keyword">from</span> order_dtl <span class="token keyword">where</span> USER_ID<span class="token operator">=</span><span class="token string">'8237476'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="./assets/img/image-20210314111350650.bca95b9e.png" alt="image-20210314111350650"></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token number">3</span><span class="token punctuation">)</span> 测试<span class="token number">3</span>:  查询所有的字段
    <span class="token keyword">explain</span> <span class="token keyword">select</span>  <span class="token operator">*</span> <span class="token keyword">from</span> order_dtl <span class="token keyword">where</span> USER_ID<span class="token operator">=</span><span class="token string">'8237476'</span><span class="token punctuation">;</span> 
    
原因:
   表是加盐预分区的操作
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="./assets/img/image-20210314111438389.715b89c0.png" alt="image-20210314111438389"></p> <p>注意: 本地索引 会直接对目标表数据产生影响, 所以一旦构建本地索引, 将不再支持通过原生API 查询数据</p> <p><img src="./assets/img/image-20210314112048649.cf9f9c21.png" alt="image-20210314112048649"></p> <p>2.4 案例三: 实现WATER_BILL查询操作</p> <ul><li>原来的查询WATER_BILL的SQL语句:</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>select  name,num_usage, record_date from water_bill where record_date between '2020-06-01' and '2020-06-30';

花费时间为: 8s多
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>接下来对其进行优化:</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token number">1</span><span class="token punctuation">)</span> 创建索引:  全局<span class="token operator">|</span>本地 <span class="token operator">+</span> 覆盖
   <span class="token keyword">create</span> <span class="token keyword">index</span> IDX_INDEX_WATER_BILL <span class="token keyword">ON</span> WATER_BILL<span class="token punctuation">(</span>record_date<span class="token punctuation">)</span> include <span class="token punctuation">(</span>name<span class="token punctuation">,</span>num_usage<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token number">2</span><span class="token punctuation">)</span> 执行查询操作: 
   <span class="token keyword">select</span>  name<span class="token punctuation">,</span>num_usage<span class="token punctuation">,</span> record_date <span class="token keyword">from</span> water_bill <span class="token keyword">where</span> record_date <span class="token operator">between</span> <span class="token string">'2020-06-01'</span> <span class="token operator">and</span> <span class="token string">'2020-06-30'</span><span class="token punctuation">;</span>
  
花费时间:  <span class="token number">7</span>s左右

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>总结索引的使用</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">1)</span> <span class="token value attr-value">给那些经常查询使用字段添加索引</span>
<span class="token key attr-name">2)</span> <span class="token value attr-value">如果前期经常使用, 但是后期不使用, 请将索引信息删除</span>
<span class="token key attr-name">3)</span> <span class="token value attr-value">如果前期不经常使用,但是后期经常使用, 后期还需要添加索引</span>

<span class="token key attr-name">索引好处</span><span class="token punctuation">:</span> <span class="token value attr-value">提升查询的效率</span>

<span class="token key attr-name">弊端</span><span class="token punctuation">:</span> <span class="token value attr-value">数据会冗余存储 占用磁盘空间</span>

<span class="token key attr-name">索引</span><span class="token punctuation">:</span>  <span class="token value attr-value">以空间换时间操作</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="hbase的表结构设计"><a href="#hbase的表结构设计" class="header-anchor">#</a> hbase的表结构设计</h2> <h3 id="hbase的名称空间-命名空间"><a href="#hbase的名称空间-命名空间" class="header-anchor">#</a> hbase的名称空间(命名空间)</h3> <p>​	hbase的名称空间  类似于 在mysql 或者 hive中的数据库, 只不过在hbase将其称为叫做名称空间(命名空间)</p> <p>思考: mysql或者hive 为什么会有数据库的概念呢?</p> <ul><li><ol><li>利于管理,利于维护</li></ol></li> <li><ol start="2"><li>业务划分更加明确</li></ol></li> <li><ol start="3"><li>可以针对性设置权限</li></ol></li></ul> <p>同样的, hbase的名称空间也具有相似作用</p> <p>在hbase中, 默认情况下, 是有两个名称空间的, 一个 hbase  和 default</p> <ul><li>名称为 hbase的名称空间:  专门用于放置hbase内部的管理表的, 此名称空间, 一般不操作, hbase自己维护即可
<ul><li>内部有一张核心的元数据表:  meta表
<ul><li>此表存储了hbase中所有自定义表的相关的元数据信息</li></ul></li></ul></li> <li>名称为 default 的名称空间:   默认的名称空间, 在创建hbase表的时候, 如果没有指定名称空间, 默认就创建到此空间下
<ul><li>类似于 hive中也有一个default数据库</li> <li>在测试 学习的时候可以使用</li></ul></li></ul> <p><img src="./assets/img/image-20210311101154733.b9534e80.png" alt="image-20210311101154733"></p> <p>如何操作HBase的名称空间呢?</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 如何创建名称空间:</span>
create_namespace  <span class="token string">'名称空间'</span>
<span class="token comment">#查看当下有那些名称空间</span>
list_namespace
<span class="token comment">#查看某一个名称空间</span>
describe_namespace <span class="token string">'名称空间'</span>
<span class="token comment">#删除名称空间</span>
drop_namespace <span class="token string">'名称空间'</span>
   注意: 在删除这个空间的时候, 需要保证此空间下没有任何表
<span class="token comment">#如何在某个名称空间下创建表</span>
create <span class="token string">'名称空间名称:表名'</span>,<span class="token string">'列族'</span> <span class="token punctuation">..</span>.
   注意: 一旦建立在default以外的名称空间下, 在后续操作这个表, 必须携带名称空间,否则hbase会到default空间下
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="hbase表的列族的设计"><a href="#hbase表的列族的设计" class="header-anchor">#</a> hbase表的列族的设计</h3> <p>结论:  在建表的时候, 如果能用一个列族来解决的, 坚决使用一个即可, 能少则少</p> <p>原因:</p> <p>​     过多的列族会导致在region中出现过多的store模块, 而每个store模块中由一个memStore 和 多个storeFile构成的, 这样会导致数据在存储或者读取的时候, 需要跨域多个内存和多个文件才能将整行的数据都获取到, 此时增大了IO操作, 从而导致效率比较低</p> <p>​     而且这个列族多了之后, 会导致region可能会频繁的要进行刷新 和 compact合并操作</p> <p>多个列族在文件层次上存储在不同的HFile文件中。</p> <p>思考: 什么场景下 可能会构建多个列族呢? 一般为 2~5</p> <ul><li>假设有一个表, 表中字段比较多, 但是某些字段不常使用, 此时可以将经常使用的字段放入某一个列族中, 另一个放置不常使用字段即可</li> <li>假设一个表要对接多个不同业务, 而多个不同业务可能会用到不同的字段, 可以根据业务 划分不同的列族中</li></ul> <h3 id="hbase表的预分区"><a href="#hbase表的预分区" class="header-anchor">#</a> hbase表的预分区</h3> <p>​      在hbase中 表默认情况下 只有一个region,  而一个region只能被一个regionServer所管理</p> <p>思考:</p> <p>​      假设通过默认的方式, 创建了一张hbase的表, 接着需要向这个表写入大量的数据, 同时也有大量的读请求在查询这个表中数据, 此时会发生什么问题呢?</p> <p>​	 出现问题:  对应管理region的regionServer的服务器可能出现延迟较大, 甚至出现宕机的问题</p> <p>​      原因: 只有一个region, 对应只有一个regionServer, 一个regionServer需要承载这个表所有并发读写请求</p> <p>如何解决呢?</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">  如果可以在建表的时候,</span> <span class="token value attr-value">一次性构建出多个region, 然后多个region能够均匀的分布在不同的regionServer上, 这样问题及迎刃而解了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实现方式: 通过HBase的预分区</p> <ul><li><p>预分区的目的:  让hbase在建表的时候, 就可以拥有多个region</p> <p><img src="./assets/img/image-20210311113708063.e18a165d.png" alt="image-20210311113708063"></p></li> <li><p>如何实现预分区的操作:</p> <ul><li><ol><li>手动预分区操作</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>create <span class="token string">'表名'</span> ,<span class="token string">'列族1'</span>, <span class="token assign-left variable">SPLITS</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>分区范围即可<span class="token punctuation">]</span>  

例子: 
create <span class="token string">'t1_split'</span>,<span class="token string">'f1'</span>,SPLITS<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token string">'10'</span>,<span class="token string">'20'</span>,<span class="token string">'30'</span>,<span class="token string">'40'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="./assets/img/image-20210311115551433.1803896d.png" alt="image-20210311115551433"></p></li> <li><ol start="2"><li>采用 hash预分区方案</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>格式 
    create <span class="token string">'表名'</span> ,<span class="token string">'列族1'</span>, <span class="token punctuation">{</span>NUMREGIONS<span class="token operator">=</span><span class="token operator">&gt;</span>N,SPLITALGO<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token string">'HexStringSplit'</span><span class="token punctuation">}</span>
    
案例: 
    create <span class="token string">'t2_split'</span>,<span class="token string">'f1'</span>,<span class="token punctuation">{</span>NUMREGIONS<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token number">10</span>,SPLITALGO<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token string">'HexStringSplit'</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="./assets/img/image-20210311120018946.71449ed4.png" alt="image-20210311120018946"></p> <p>hbase.hregion.max.filesize不宜过大或过小，经过实战，生产高并发运行下，最佳大小5-10GB！关闭某些重要场景的HBase表的major_compact！在非高峰期的时候再去调用major_compact，这样可以减少split的同时，显著提供集群的性能，吞吐量、非常有用。 一般情况下，单个region的大小建议控制在5GB以内，可以通过参数hbase.hregion.max.filesize来设置，单个regionserver下的regions个数控制在200个以内。regions过多会导致集群不堪重负、regionserver 频繁FullGC的情况，进而影响集群的稳定性甚至上层的应用服务。</p></li></ul></li></ul> <h3 id="hbase的版本确界和ttl"><a href="#hbase的版本确界和ttl" class="header-anchor">#</a> hbase的版本确界和TTL</h3> <p>什么是数据版本确界</p> <p>数据版本的确界 所描述的就是在hbase中 数据的历史版本的数量</p> <ul><li>下界: hbase中对应单元格 至少需要保留多少版本, 即使数据已经过期了 ,
<ul><li>默认值为 0</li></ul></li> <li>上界: hbase中对应单元格 最多可以保留多少个版本, 如果比设置多了, 最早期本部会被覆盖掉
<ul><li>默认值为 1</li></ul></li></ul> <p>2.6.2 什么是数据的TTL</p> <p>在hbase中, 可以针对数据设置过期时间, 当时间过期后, hbase会自动将过期数据给清理掉</p> <p>2.6.3 代码演示数据版本确界和TTL</p> <ul><li>代码内容:</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HBaseTTLTest</span> <span class="token punctuation">{</span>
    <span class="token comment">//1. 创建一个Hbase的表 (设置 版本确界 以及 TTL)</span>
    <span class="token comment">//2. 向表添加数据, 添加后  进行多次修改操作(产生历史版本)</span>
    <span class="token comment">//3. 查询数据:  需要将其历史版本全部都查询到</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//1. 根据连接工厂获取hbase的连接对象</span>
        <span class="token class-name">Configuration</span> conf <span class="token operator">=</span> <span class="token class-name">HBaseConfiguration</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        conf<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;hbase.zookeeper.quorum&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;node1:2181,node2:2181,node3:2181&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> hbConn <span class="token operator">=</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span>conf<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2. 获取相关的管理对象</span>
        <span class="token class-name">Admin</span> admin <span class="token operator">=</span> hbConn<span class="token punctuation">.</span><span class="token function">getAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3. 执行相关的操作:</span>

        <span class="token comment">//3.1: 判断表是否存在</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span>admin<span class="token punctuation">.</span><span class="token function">tableExists</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;day03_hbaseTTL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 只要能进来 说明 表不存在</span>

            <span class="token class-name">TableDescriptorBuilder</span> descBuilder <span class="token operator">=</span> <span class="token class-name">TableDescriptorBuilder</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;day03_hbaseTTL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">ColumnFamilyDescriptorBuilder</span> familyDesc <span class="token operator">=</span> <span class="token class-name">ColumnFamilyDescriptorBuilder</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 设置 版本 确界  和 TTL</span>
            familyDesc<span class="token punctuation">.</span><span class="token function">setMinVersions</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 设置 下界</span>
            familyDesc<span class="token punctuation">.</span><span class="token function">setMaxVersions</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 设置 上界</span>

            familyDesc<span class="token punctuation">.</span><span class="token function">setTimeToLive</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 设置 ttl  有效时间为30s</span>

            <span class="token class-name">ColumnFamilyDescriptor</span> family <span class="token operator">=</span> familyDesc<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            descBuilder<span class="token punctuation">.</span><span class="token function">setColumnFamily</span><span class="token punctuation">(</span>family<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">TableDescriptor</span> desc <span class="token operator">=</span> descBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//3.2: 创建表</span>
            admin<span class="token punctuation">.</span><span class="token function">createTable</span><span class="token punctuation">(</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token comment">//3.3:  添加数据操作</span>
        <span class="token comment">//3.3.1: 获取 table管理对象</span>
        <span class="token class-name">Table</span> table <span class="token operator">=</span> hbConn<span class="token punctuation">.</span><span class="token function">getTable</span><span class="token punctuation">(</span><span class="token class-name">TableName</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token string">&quot;day03_hbaseTTL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3.3.2: 执行添加数据操作</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span> i<span class="token operator">&lt;=</span> <span class="token number">2</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">Put</span> put <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Put</span><span class="token punctuation">(</span><span class="token string">&quot;rk001&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            put<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span><span class="token string">&quot;C1&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            table<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>put<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//3.4: 查询数据</span>
        <span class="token class-name">Get</span> get <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Get</span><span class="token punctuation">(</span><span class="token string">&quot;rk001&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        get<span class="token punctuation">.</span><span class="token function">readAllVersions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取所有的历史版本</span>
        <span class="token class-name">Result</span> result <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>get<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Cell[] rawCells = result.rawCells();</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Cell</span><span class="token punctuation">&gt;</span></span> cells <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">listCells</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cell</span> cell <span class="token operator">:</span> rawCells<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Bytes</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token class-name">CellUtil</span><span class="token punctuation">.</span><span class="token function">cloneValue</span><span class="token punctuation">(</span>cell<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token comment">//4. 释放资源</span>
        table<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        admin<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hbConn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br></div></div><p><img src="./assets/img/image-20210311205908251.b92ef36a.png" alt="image-20210311205908251"></p> <p><img src="./assets/img/image-20210311205932731.8a03a8df.png" alt="image-20210311205932731"></p> <p>总结:</p> <p>​       即使所有的历史版本的数据都过期了, hbase也会至少保留 min_version个最新版本数据, 以保证我们在查询数据的时候. 可以有数据返回</p> <h3 id="hbase的中rowkey的设计原则"><a href="#hbase的中rowkey的设计原则" class="header-anchor">#</a> hbase的中rowkey的设计原则</h3> <p>说明:</p> <p>​     单纯的通过预分区 是无法解决 向hbase存储数据的高并发的读写问题, 因为如果所有的数据都是某一个region内的数据, 此时依然相当于表只有一个region</p> <p>解决方案:</p> <p>​     需要在预分区的基础, 让rowkey的值 能够均匀的落在不同的region上, 才可以解决</p> <p>所以: rowkey设计良好, 直接关系到, 数据应该存储到那个region中, 如果设置不良好, 可能会导致数据倾斜问题</p> <p>设置rowkey有什么样原则呢?</p> <ul><li>官方rowkey设计原则</li></ul> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">1)</span> <span class="token value attr-value">避免将 递增行键/时序数据 放置在rowkey最前面</span>
<span class="token key attr-name">2)</span> <span class="token value attr-value">避免rowkey和列的长度过大 </span>
<span class="token key attr-name">   说明,</span> <span class="token value attr-value">太长rowkey 和列 会导致 占用空间更大, 导致在内存中存储数据行数会更少, 从而最终导致提前进行flush操作, 影响效率</span>
<span class="token key attr-name">   rowkey支持大小</span><span class="token punctuation">:</span> <span class="token value attr-value">64kb</span>
<span class="token key attr-name">   一般情况下</span><span class="token punctuation">:</span> <span class="token value attr-value">建议在 100字节以下 , 大部分长度为 10~20左右</span>
   
<span class="token key attr-name">3)</span> <span class="token value attr-value">使用Long等类型 比String类型更省空间</span>
<span class="token key attr-name">4)</span> <span class="token value attr-value">保证rowkey的唯一性</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如何避免热点的问题呢?</p> <ul><li><ol><li>反转操作</li></ol> <ul><li>弊端 : 如果是相关性比较强的数据, 此种打乱会导致读写效率降低</li></ul></li> <li><ol start="2"><li>加盐策略(随机在rowkey前面加一个随机字符串或者随机数)</li></ol> <ul><li>弊端: 如果是相关性比较强的数据, 此种打乱会导致读写效率降低</li></ul></li> <li><ol start="3"><li><strong>哈希策略</strong>（MurmurHash3）:  保证相同内容 得到hash值是一致的,可以让相关性数据放置在一个region中</li></ol></li></ul> <h3 id="hbase的表的压缩方案的选择"><a href="#hbase的表的压缩方案的选择" class="header-anchor">#</a> hbase的表的压缩方案的选择</h3> <p><img src="./assets/img/image-20210311105325423.8c28bd64.png" alt="image-20210311105325423"></p> <p>在生产中如何选择压缩方式呢?</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1) 必须要压缩, 如果表的数据, 需要进行频繁的数据读写操作, 而且数据量比较大, 建议采用 snappy压缩方案
2) 必须要压缩, 如果表的数据, 需要进行大量写入操作, 但是读取操作不是特别频繁, 建议采用 GZIP|GZ
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如何在hbase设置表的压缩方案?   默认情况下HBASE是不压缩的, 压缩方案是针对列族来说的</p> <p><img src="./assets/img/image-20210311105912228.fa6e91b1.png" alt="image-20210311105912228"></p> <p>配置操作:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>格式:
   建表时: create '表名' , {NAME=&gt;'列族',COMPRESSION=&gt;'GZ|SNAPPY'}
   对已经存在表, 通过修改表结构:  alter '表名', {NAME=&gt;'列族',COMPRESSION=&gt;'GZ|SNAPPY'}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="./assets/img/image-20210311110824843.ff2453cf.png" alt="image-20210311110824843"></p> <p>注意:</p> <p>​      <strong>如果需要采用SNAPPY 压缩方案, 可能需要对HBase进行重新编译</strong>, 在编译时类似于 Hadoop, 将支持压缩的C接口放入hbase编译包中 才可以</p> <p>​       如果要采用LZO的压缩方案, 需要放置LZO的压缩的jar包</p> <h2 id="hbase数据结构"><a href="#hbase数据结构" class="header-anchor">#</a> HBase数据结构</h2> <p><strong>简介</strong></p> <p>传统关系型数据库，一般都选择使用B+树作为索引结构，而在大数据场景下，HBase、Kudu这些存储引擎选择的是LSM树。LSM树，即日志结构合并树(Log-Structured Merge-Tree)。</p> <ul><li><p>B+树是建立索引的通用技术，但如果并发写入压力较大时，B+树需要大量的磁盘<strong>随机IO</strong>，而严重影响索引创建的速度，在一些写入操作非常频繁的应用场景中，就不太适合了</p></li> <li><p>LSM树通过磁盘的<strong>顺序写</strong>，来实现最好的写性能</p></li></ul> <p><strong>LSM树设计思想</strong></p> <p><img src="./assets/img/image-20230328154255395.1d2e6867.png" alt="image-20230328154255395"></p> <ul><li><p>LSM 的主要思想是划分不同等级的结构，换句话来理解，就是LSM中不止一个数据结构，而是存在多种结构</p></li> <li><p><strong>一个结构在内存、其他结构在磁盘（HBase存储结构中，有内存——MemStore、也有磁盘——StoreFile）</strong></p></li> <li><p><strong>内存的结构可以是B树、红黑树、跳表等结构（HBase中是跳表），磁盘中的树就是一颗B+树</strong></p></li> <li><p>C0层保存了最近写入的数据，数据都是有序的，而且可以随机更新、随机查询</p></li> <li><p>C1到CK层的数据都是存在磁盘中，每一层中key都是有序存储的</p></li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2023-7-19 7:18:59 ├F10: PM┤</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase介绍" class="sidebar-link reco-side-hbase介绍" data-v-b57cc07c>hbase介绍</a></li><li class="level-2" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase部署" class="sidebar-link reco-side-hbase部署" data-v-b57cc07c>hbase部署</a></li><li class="level-2" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的表模型" class="sidebar-link reco-side-hbase的表模型" data-v-b57cc07c>hbase的表模型</a></li><li class="level-2" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase常用操作" class="sidebar-link reco-side-hbase常用操作" data-v-b57cc07c>hbase常用操作</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的相关操作-shell命令" class="sidebar-link reco-side-hbase的相关操作-shell命令" data-v-b57cc07c>hbase的相关操作_shell命令</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的javaapi的操作" class="sidebar-link reco-side-hbase的javaapi的操作" data-v-b57cc07c>hbase的javaAPI的操作</a></li><li class="level-2" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的架构及原理" class="sidebar-link reco-side-hbase的架构及原理" data-v-b57cc07c>hbase的架构及原理</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的集群架构图" class="sidebar-link reco-side-hbase的集群架构图" data-v-b57cc07c>hbase的集群架构图</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#region-server的上线和下线" class="sidebar-link reco-side-region-server的上线和下线" data-v-b57cc07c>region server的上线和下线</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#master的上线和下线" class="sidebar-link reco-side-master的上线和下线" data-v-b57cc07c>master的上线和下线</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的读写原理" class="sidebar-link reco-side-hbase的读写原理" data-v-b57cc07c>HBase的读写原理</a></li><li class="level-2" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase三大机制" class="sidebar-link reco-side-hbase三大机制" data-v-b57cc07c>Hbase三大机制</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的flush刷新机制" class="sidebar-link reco-side-hbase的flush刷新机制" data-v-b57cc07c>HBase的flush刷新机制</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的storefile的合并机制" class="sidebar-link reco-side-hbase的storefile的合并机制" data-v-b57cc07c>HBase的storeFile的合并机制</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的split机制-region分裂" class="sidebar-link reco-side-hbase的split机制-region分裂" data-v-b57cc07c>Hbase的split机制(region分裂)</a></li><li class="level-2" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的bulk-load-批量加载操作" class="sidebar-link reco-side-hbase的bulk-load-批量加载操作" data-v-b57cc07c>HBase的Bulk Load 批量加载操作</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#mr-bulkload" class="sidebar-link reco-side-mr-bulkload" data-v-b57cc07c>MR-bulkload</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#spark-bulkload" class="sidebar-link reco-side-spark-bulkload" data-v-b57cc07c>Spark bulkLoad</a></li><li class="level-2" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase和hive的集成操作" class="sidebar-link reco-side-hbase和hive的集成操作" data-v-b57cc07c>HBase和Hive的集成操作</a></li><li class="level-2" data-v-b57cc07c><a href="/./2022/08/08/hbase/#apache-phoenix" class="sidebar-link reco-side-apache-phoenix" data-v-b57cc07c>Apache Phoenix</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#phoenix集成hbase与hive、impala集成的对比" class="sidebar-link reco-side-phoenix集成hbase与hive、impala集成的对比" data-v-b57cc07c>phoenix集成hbase与hive、impala集成的对比</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的协处理器" class="sidebar-link reco-side-hbase的协处理器" data-v-b57cc07c>HBase的协处理器</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#apache-phoenix的基本入门操作" class="sidebar-link reco-side-apache-phoenix的基本入门操作" data-v-b57cc07c>Apache Phoenix的基本入门操作</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#apache-phoenix的预分区操作" class="sidebar-link reco-side-apache-phoenix的预分区操作" data-v-b57cc07c>Apache Phoenix的预分区操作</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#apache-phoenix的视图" class="sidebar-link reco-side-apache-phoenix的视图" data-v-b57cc07c>apache  Phoenix的视图</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#apache-phoenix的二级索引" class="sidebar-link reco-side-apache-phoenix的二级索引" data-v-b57cc07c>Apache Phoenix的二级索引</a></li><li class="level-2" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的表结构设计" class="sidebar-link reco-side-hbase的表结构设计" data-v-b57cc07c>hbase的表结构设计</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的名称空间-命名空间" class="sidebar-link reco-side-hbase的名称空间-命名空间" data-v-b57cc07c>hbase的名称空间(命名空间)</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase表的列族的设计" class="sidebar-link reco-side-hbase表的列族的设计" data-v-b57cc07c>hbase表的列族的设计</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase表的预分区" class="sidebar-link reco-side-hbase表的预分区" data-v-b57cc07c>hbase表的预分区</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的版本确界和ttl" class="sidebar-link reco-side-hbase的版本确界和ttl" data-v-b57cc07c>hbase的版本确界和TTL</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的中rowkey的设计原则" class="sidebar-link reco-side-hbase的中rowkey的设计原则" data-v-b57cc07c>hbase的中rowkey的设计原则</a></li><li class="level-3" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase的表的压缩方案的选择" class="sidebar-link reco-side-hbase的表的压缩方案的选择" data-v-b57cc07c>hbase的表的压缩方案的选择</a></li><li class="level-2" data-v-b57cc07c><a href="/./2022/08/08/hbase/#hbase数据结构" class="sidebar-link reco-side-hbase数据结构" data-v-b57cc07c>HBase数据结构</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----></div></div>
    <script src="./assets/js/app.764dede6.js" defer></script><script src="./assets/js/13.20e964b9.js" defer></script><script src="./assets/js/1.8757f81f.js" defer></script><script src="./assets/js/6.e534639a.js" defer></script><script src="./assets/js/34.ec572062.js" defer></script>
  </body>
</html>

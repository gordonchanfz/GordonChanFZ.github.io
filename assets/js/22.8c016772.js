(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1583:function(s,t,a){"use strict";a.r(t);var n=a(3),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"环境准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[s._v("#")]),s._v(" 环境准备")]),s._v(" "),t("h3",{attrs:{id:"_1-jdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-jdk"}},[s._v("#")]),s._v(" 1.JDK：")]),s._v(" "),t("ul",[t("li",[s._v("将包上传到对应的目录下")]),s._v(" "),t("li",[s._v("使用tar -zxvf jdk-8u161-linux-x64.tar.gz 进行解压包")]),s._v(" "),t("li",[s._v("修改配置文件：vi /etc/profile")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/soft/java8/jdk\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin:"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CLASSPATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(".:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/lib/dt.jar:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/lib/tools.jar\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("通过source /etc/profile 进行重新编译")]),s._v(" "),t("li",[s._v("通过java -version查看是否已经安装成功")])]),s._v(" "),t("h3",{attrs:{id:"_2-maven"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-maven"}},[s._v("#")]),s._v(" 2.maven：")]),s._v(" "),t("ul",[t("li",[s._v("包解压跟jdk一样")]),s._v(" "),t("li",[s._v("找到localRepository,并进行修改本地仓库地址（conf/setting.xml文件下）")]),s._v(" "),t("li",[s._v("添加mirror:")])]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("mirror")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("alimaven"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("aliyun maven"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("url")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("http://maven.aliyun.com/nexus/content/groups/public/"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("url")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("mirrorOf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("central"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("mirrorOf")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("mirror")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[s._v("修改配置文件")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MAVEN_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/soft/maven/maven\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MAVEN_HOME")]),s._v("/bin  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("通过source /etc/proflie进行重新编译")]),s._v(" "),t("li",[s._v("通过mvn -version查看是否已经安装成功")])]),s._v(" "),t("h3",{attrs:{id:"_3-git"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-git"}},[s._v("#")]),s._v(" 3.Git")]),s._v(" "),t("ul",[t("li",[s._v("解压跟jdk一样")]),s._v(" "),t("li",[s._v("安装编译所需要的依赖")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("编译git源码 make prefix=/home/soft/git/git all (/home/soft/git为文件所在的路径)")]),s._v(" "),t("li",[s._v("安装git的路径 make prefix=/home/socf/git/git install")]),s._v(" "),t("li",[s._v("配置环境变量：vi /etc/profile")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(":/home/soft/git/git\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_4-docker-本次安装没有使用到-仅做了解使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-docker-本次安装没有使用到-仅做了解使用"}},[s._v("#")]),s._v(" 4.Docker (本次安装没有使用到，仅做了解使用)")]),s._v(" "),t("p",[s._v("安装： yum install -y docker"),t("br"),s._v("\n查看状态：systemctl status docker"),t("br"),s._v("\ndocker启动：systemctl start docker/systemctl start docker.service"),t("br"),s._v("\nservice docker start"),t("br"),s._v("\n重启docker服务：systemctl restart docker"),t("br"),s._v("\nsudo service docker restart"),t("br"),s._v("\n关闭docker：systemctl stop docker"),t("br"),s._v("\nservice docker stop"),t("br"),s._v("\n查看所有镜像：docker images"),t("br"),s._v("\n生成镜像：docker build -t 镜像名称："),t("br"),s._v("\n删除镜像:docker rmi 镜像名称"),t("br"),s._v("\n启动镜像并实现端口映射：docker run -p 192.168.211.128:8081:8081 镜像名称"),t("br"),s._v("\n生成容器并且启动镜像：docker run -d -p --name 容器名称 镜像名称")]),s._v(" "),t("h2",{attrs:{id:"gitlab安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gitlab安装"}},[s._v("#")]),s._v(" GitLab安装")]),s._v(" "),t("p",[s._v("前置条件：关闭防火墙，查看防火墙的状态：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("systemctl status firewalld.service\nsystemctl stop firewalld 关闭防火墙\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_1-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装"}},[s._v("#")]),s._v(" 1.安装：")]),s._v(" "),t("ul",[t("li",[s._v("配置yum源： vi /etc/yum.repos.d/gitlab-ce.repo")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("gitlab-ce"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Gitlab CE Repository\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$releasever")]),s._v("/\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ul",[t("li",[s._v("更新本地源：yum makecache")]),s._v(" "),t("li",[s._v("安装gitlab社区版：yum install gitlab-ce")]),s._v(" "),t("li",[s._v("安装完成后的默认目录：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("gitlab组件日志路径：/var/log/gitlab\ngitlab配置路径：/etc/gitlab/  路径下有gitlab.rb配置文件\n应用代码和组件依赖程序：/opt/gitlab\n各个组件存储路径： /var/opt/gitlab/\n仓库默认存储路径   /var/opt/gitlab/git-data/repositories\n版本文件备份路径：/var/opt/gitlab/backups/\nnginx安装路径：/var/opt/gitlab/nginx/\nredis安装路径：/var/opt/gitlab/redis\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ul",[t("li",[s._v("修改默认ip和端口： vi /etc/gitlab/gitlab.rb")])]),s._v(" "),t("p",[t("img",{attrs:{src:a(682),alt:"img"}})]),s._v(" "),t("ul",[t("li",[s._v("配置邮箱")]),s._v(" "),t("li",[s._v("需要安装postfix邮箱")]),s._v(" "),t("li",[s._v("安装:yum install -y postfix")]),s._v(" "),t("li",[s._v("设置开机自启：systemctl enable postfix")]),s._v(" "),t("li",[s._v("启动：systemctl start psotfix")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("还是要修改上方的gitlab.rb （本次测试没有使用到，新建用户的时候，如果没有添加邮件是不会添加成功的，执行失败还是会发送邮件的）\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改以下内容")]),s._v("\ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'gitlab_email_enabled'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'gitlab_email_from'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'发信邮箱'")]),s._v("\ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'gitlab_email_display_name'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxx'")]),s._v("\n \ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp_enable'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp_address'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smtp.163.com"')]),s._v("\ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp_port'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("465")]),s._v("\ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp_user_name'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"发信邮箱"')]),s._v("\ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp_password'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smtp客户端授权码"')]),s._v("\ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp_domain'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"163.com"')]),s._v("\ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp_authentication'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"login"')]),s._v("\ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp_enable_starttls_auto'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp_tls'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\ngitlab_rails"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp_openssl_verify_mode'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'none'")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("ul",[t("li",[s._v("修改完成后，重新加载配置文件：gitlab-ctl reconfigure")]),s._v(" "),t("li",[s._v("如果修改了邮箱配置，测试邮箱是否开启：gitlab-rails console")]),s._v(" "),t("li",[s._v("性能优化：")])]),s._v(" "),t("blockquote",[t("p",[s._v("同样，也是修改gitlab.rb文件")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("puma"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'worker_processes'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#官方建议值为CPU核数+1（服务器只部署gitLab的情况下），可提高服务器响应速度，此参数最小值为2，设为1服务器可能卡死")]),s._v("\npuma"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'work_timeout'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("                            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置超时时间")]),s._v("\npuma"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'worker_memory_limit_min'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"200 * 1 << 20"')]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#减少最小内存")]),s._v("\npuma"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'worker_memory_limit_max'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"300 * 1 << 20"')]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#减少最大内存")]),s._v("\npostgresql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'shared_buffers'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"128MB"')]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#减少数据库缓存")]),s._v("\npostgresql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'max_worker_processes'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#减少数据库并发数")]),s._v("\nsidekiq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'concurrency'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("                             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#减少sidekiq并发数")]),s._v("\n\n由于GitLab核心功能是代码托管，所以有些额外的组件比较浪费资源，所以可以考虑关闭。\nprometheus"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'enable'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\nprometheus"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'monitor_kubernetes'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\nalertmanager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'enable'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("  \nnode_exporter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'enable'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" \nredis_exporter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'enable'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" \npostgres_exporter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'enable'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\ngitlab_exporter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'probe_sidekiq'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\nprometheus_monitoring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'enable'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\ngrafana"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'enable'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("ul",[t("li",[s._v("重新启动：sudo gitlab-ctl restart")]),s._v(" "),t("li",[s._v("其他命令：")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("gitlab-ctl start "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动全部服务")]),s._v("\ngitlab-ctl restart"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启全部服务")]),s._v("\ngitlab-ctl stop "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#停止全部服务")]),s._v("\ngitlab-ctl restart nginx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启单个服务，如重启nginx")]),s._v("\ngitlab-ctl status "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看服务状态")]),s._v("\ngitlab-ctl reconfigure "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使配置文件生效")]),s._v("\ngitlab-ctl show-config "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#验证配置文件")]),s._v("\ngitlab-ctl uninstall "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除gitlab（保留数据）")]),s._v("\ngitlab-ctl cleanse "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除所有数据，从新开始")]),s._v("\ngitlab-ctl "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("service name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("查看服务的日志\ngitlab-ctl "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" nginx  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如查看gitlab下nginx日志")]),s._v("\ngitlab-rails console  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入控制台")]),s._v("\ngitlab-ctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看gitlab帮助信息")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("安装完成后，默认的用户是root,密码需要查看： cat /etc/gitlab/initial_root_password")]),s._v(" "),t("h3",{attrs:{id:"_2-安装gitlab-runner"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装gitlab-runner"}},[s._v("#")]),s._v(" 2.安装gitlab-runner")]),s._v(" "),t("ul",[t("li",[s._v("到清华园中找到gitlab-runner:https://mirrors.tuna.tsinghua.edu.cn/gitlab-runner/yum/el7/")]),s._v(" "),t("li",[s._v("上传到服务器中")]),s._v(" "),t("li",[s._v("通过rpm -ivh gitlab-runner-12.9.1-1.x86_64.rpm --nodeps --force 去安装")]),s._v(" "),t("li",[s._v("启动服务：systemctl start gitlab-runner")]),s._v(" "),t("li",[s._v("查看服务状态：systemctl status gitlab-runner")]),s._v(" "),t("li",[s._v("验证是否安装成功：gitlab-runner -h")])]),s._v(" "),t("h3",{attrs:{id:"_3-gitlab-runner-注册"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-gitlab-runner-注册"}},[s._v("#")]),s._v(" 3.gitlab-runner 注册：")]),s._v(" "),t("ul",[t("li",[s._v("注册共享型的runner:gitlab-runner register (下方是注册的时候，需要填写的内容)\n"),t("ul",[t("li",[t("p",[s._v("gitlab地址：Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com/)"),t("br"),s._v(" "),t("img",{attrs:{src:a(683),alt:"在这里插入图片描述"}})])]),s._v(" "),t("li",[t("p",[s._v("runner注册令牌：Please enter the gitlab-ci token for this runner")]),s._v(" "),t("p",[t("img",{attrs:{src:a(684),alt:"在这里插入图片描述"}})])]),s._v(" "),t("li",[t("p",[s._v("gitlab-runner的注释：Please enter the gitlab-ci description for this runner")])]),s._v(" "),t("li",[t("p",[s._v("gitlab-runner的标签：Please enter the gitlab-ci tags for this runner (comma separated)")])]),s._v(" "),t("li",[t("p",[s._v("执行器使用的方式：Please enter the executor: custom, docker, parallels, docker+machine, kubernetes, docker-ssh, shell, ssh, virtualbox, docker-ssh+machine")])])])])]),s._v(" "),t("p",[t("img",{attrs:{src:a(685),alt:"在这里插入图片描述"}})]),s._v(" "),t("ul",[t("li",[s._v("查看已注册的runner列表：gitlab-runner list")]),s._v(" "),t("li",[s._v("取消所有注册列表：gitlab-runner unregister --all-runners")])]),s._v(" "),t("h3",{attrs:{id:"_4-编辑流水线配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-编辑流水线配置"}},[s._v("#")]),s._v(" 4.编辑"),t("a",{attrs:{href:"https://so.csdn.net/so/search?q=%E6%B5%81%E6%B0%B4%E7%BA%BF&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"}},[s._v("流水线"),t("OutboundLink")],1),s._v("配置：")]),s._v(" "),t("p",[s._v("首先：需要通过git生成私钥，然后上传到项目中：")]),s._v(" "),t("ul",[t("li",[s._v("生成ssh秘钥：ssh-keygen -t rsa"),t("br"),s._v("\n查看生成的秘钥： cat ~/.ssh/id_rsa"),t("br"),s._v("\n将私钥的值放到项目内的CICD变量中，命名为：SSH_PRIVATE_KEY")])]),s._v(" "),t("p",[t("img",{attrs:{src:a(686),alt:"在这里插入图片描述"}})]),s._v(" "),t("ul",[t("li",[s._v("修改如下文件，就可以操作了：")])]),s._v(" "),t("p",[t("img",{attrs:{src:a(687),alt:"在这里插入图片描述"}})]),s._v(" "),t("ul",[t("li",[s._v("或者直接修改.gitlab-ci.yml文件")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一些变量, 下面各阶段会使用")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("variables")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server_ip")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 192.168.44.129\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jar_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("0.0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("SNAPSHOT.jar\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("java_path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /home/java/java1.8/bin\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("upload_path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /home/gitlab"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("project/\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ssh_password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("repo_path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /home/soft/maven/repo\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jar_path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" com/example/demo/0.0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("SNAPSHOT\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义执行的各个阶段及顺序")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stages")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" build\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" upload\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" deploy\n \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 maven 镜像打包项目")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("maven-build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" build\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" mvn clean install "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("Dmaven.test.skip=true\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(' echo "打包结束"\n\n'),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将打包完成的jar包移动到指定的位置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("upload-jar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" upload\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(' echo "拷贝jar包到/home/gitlab'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('project中"\n    '),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" cd $repo_path/$jar_path\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" cp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("r $jar_name $upload_path\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 SpringBoot jar包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("deploy-test")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" deploy\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(' echo "启动$jar_name"\n    '),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" cd $upload_path\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" nohup java "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("jar $jar_name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("log.out &\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br")])]),t("ul",[t("li",[s._v("stages:用于定义作何可以使用的阶段，并且是全局定义的。同一阶段的作业并行运行，不同阶段按照顺序进行")]),s._v(" "),t("li",[s._v("script：运行的脚本")])]),s._v(" "),t("h3",{attrs:{id:"_5-安装过程中遇到的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-安装过程中遇到的问题"}},[s._v("#")]),s._v(" 5.安装过程中遇到的问题")]),s._v(" "),t("p",[s._v("1.build正常,deploy失败,报错如下")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("fatal: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" fetch-pack: expected shallow list\nfatal: The remote end hung up unexpectedly\nERROR: Job failed: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" status "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("解决方案:")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/630394084",target:"_blank",rel:"noopener noreferrer"}},[s._v("TS：gitlab-ci运行作业报错fatal: git fetch-pack: expected shallow list,fatal: - 知乎 (zhihu.com)"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("解决方法，修改gitlab的cicd配置，如下图所示：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(688),alt:"image-20230624012007810"}})]),s._v(" "),t("p",[s._v("这里设置为"),t("code",[s._v("git clone")]),s._v("后，保存配置.")]),s._v(" "),t("p",[s._v("cicd主要工作流程：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(689),alt:"image-20230621212749792"}})]),s._v(" "),t("p",[s._v("关于管道的设计：")]),s._v(" "),t("p",[s._v("1.从job角度：你的工作流程是什么？可以分成几个阶段？每个阶段如何工作的？")]),s._v(" "),t("p",[s._v("2.从stage角度：你的工作流程是分成了几个阶段？每个阶段如何工作的？整体流程是怎样的？")]),s._v(" "),t("p",[s._v("管道类型体系架构：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(690),alt:"image-20230621220948576"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(691),alt:"image-20230621221025410"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(692),alt:"image-20230621221627664"}})]),s._v(" "),t("h2",{attrs:{id:"gitlab-cicd-流程规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-cicd-流程规范"}},[s._v("#")]),s._v(" gitlab CICD 流程规范")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/weixin_44275820/article/details/120510235",target:"_blank",rel:"noopener noreferrer"}},[s._v("(183条消息) 基于gitlab的CICD流程规范_李先森&Mr.Li的博客-CSDN博客"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("img",{attrs:{src:a(693),alt:"在这里插入图片描述"}})]),s._v(" "),t("h2",{attrs:{id:"附录常用命令及配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附录常用命令及配置"}},[s._v("#")]),s._v(" 附录常用命令及配置")]),s._v(" "),t("p",[s._v("gitlab命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("gitlab-ctl start "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动全部服务")]),s._v("\ngitlab-ctl restart"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启全部服务")]),s._v("\ngitlab-ctl stop "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#停止全部服务")]),s._v("\ngitlab-ctl restart nginx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启单个服务，如重启nginx")]),s._v("\ngitlab-ctl status "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看服务状态")]),s._v("\ngitlab-ctl reconfigure "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使配置文件生效")]),s._v("\ngitlab-ctl show-config "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#验证配置文件")]),s._v("\ngitlab-ctl uninstall "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除gitlab（保留数据）")]),s._v("\ngitlab-ctl cleanse "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除所有数据，从新开始")]),s._v("\ngitlab-ctl "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("service name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("查看服务的日志\ngitlab-ctl "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" nginx  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如查看gitlab下nginx日志")]),s._v("\ngitlab-rails console  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入控制台")]),s._v("\ngitlab-ctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看gitlab帮助信息")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("gitlab-runnner")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("- 启动服务：systemctl start gitlab-runner\n- 查看服务状态：systemctl status gitlab-runner\n- 验证是否安装成功：gitlab-runner "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v(".gitlab-ci.yml配置")]),s._v(" "),t("p",[s._v("官方模板：https://gitlab.com/gitlab-org/gitlab-foss/-/blob/master/lib/gitlab/ci/templates")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义一些变量, 下面各阶段会使用")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("variables")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server_ip")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 192.168.44.129\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jar_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" demo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("0.0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("SNAPSHOT.jar\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("java_path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /home/java/java1.8/bin\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("upload_path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /home/gitlab"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("project/\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ssh_password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("repo_path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /home/soft/maven/repo\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jar_path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" com/example/demo/0.0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("SNAPSHOT\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义执行的各个阶段及顺序")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stages")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" build\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" upload\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" deploy\n \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 maven 镜像打包项目")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("maven-build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" build\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" mvn clean install "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("Dmaven.test.skip=true\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(' echo "打包结束"\n\n'),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将打包完成的jar包移动到指定的位置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("upload-jar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" upload\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(' echo "拷贝jar包到/home/gitlab'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('project中"\n    '),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" cd $repo_path/$jar_path\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" cp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("r $jar_name $upload_path\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 SpringBoot jar包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("deploy-test")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" deploy\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(' echo "启动$jar_name"\n    '),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" cd $upload_path\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" nohup java "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("jar $jar_name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("log.out &\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])]),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行job的阶段 按顺序串行执行")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stages")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" build\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" cleanup\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" deploy\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义阶段build的job流程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("build")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义名字")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" build "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定这阶段操作的名称")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("only")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定那些分支会进入该处理流程")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" master "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 正式环境")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" pre "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 预发环境")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" testN "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试环境 test1 test2 ... testN")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" devN "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 联调环境 dev1 dev2 ... devN")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("variables")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("VERSION")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 1.0.10 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 除了后面会说到的私密变量 还可以在这里定义变量")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("before_script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一些特殊情况需要SSH key的场景，该部分见下文")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - ...")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义变量 如NODE环境变量")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" NODE_ENV=`if "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("CI_COMMIT_REF_NAME"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(' = "dev" '),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("CI_COMMIT_REF_NAME"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(' = "test" '),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v('; then echo "development"; else echo "production"; fi`;\n  '),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为node modules做缓存， 有缓存用缓存，没有则你npm install并添加缓存")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" PACKAGE_HASH=$(md5sum package.json "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v(" awk '"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("print $1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("');\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" mkdir "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("p ~/builds/cache/node_modules "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用docker模式时需要配置volume 保证缓存起作用 在后面runner部分会提到。")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" NPM_CACHE=~/builds/cache/node_modules/$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("PACKAGE_HASH"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(".tar\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" if "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("f $NPM_CACHE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(';\n      then\n        echo "Use Cache";\n        tar xf $NPM_CACHE;\n      else\n        npm install;\n        tar cf '),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./node_modules "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v(" $NPM_CACHE;\n      fi\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm build")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(' echo "NODE_ENV=$NODE_ENV node build/build.js"\n    '),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" NODE_ENV=$NODE_ENV node build/build.js\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# upload to CDN")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - ...")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker build")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" echo `docker build "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('t "$CI_PIPELINE_ID" . '),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v(" awk "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('F "Successfully built " \''),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("print $2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("'`\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker push")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" if "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(' $NODE_ENV = "development" '),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("; "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果需要部署的server的runner在同一个机器则可不必push到仓库")]),s._v("\n      then\n        docker login dev.hub.xxx.com "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("u$USERNAME "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("p$PASSWORD;\n        docker tag $CI_PIPELINE_ID dev.hub.xxx.com/namespace/webapp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("$CI_COMMIT_REF_NAME;\n        docker push dev.hub.xxx.com/namespace/webapp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("$CI_COMMIT_REF_NAME;\n        docker rmi dev.hub.xxx.com/namespace/webapp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v('$CI_COMMIT_REF_NAME;\n        echo "'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('";\n        echo "dev.hub.xxx.com/namespace/webapp'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v('$CI_COMMIT_REF_NAME";\n      else\n        '),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 参考上面then中脚本")]),s._v('\n        "'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('";\n        echo "hub.prd.xxx.com/namespace/webapp'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v('$DATE.$CI_BUILD_ID";\n      fi\n\n'),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开发和测试机部署")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("clean_testN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" cleanup\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("only")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" testN\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("tags")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" dc2fe"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("deploy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("testN\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" docker stop webapp\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" docker rm webapp\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("allow_failure")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("deploy_testN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("stage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" deploy\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("only")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" testN\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("tags")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" dc2fe"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("deploy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("testN\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# - ssh root@IP "docker stop webapp; docker rm webapp; docker run --name webapp -d -p 8000:8000 dev.hub.xxx.com/namespace/webapp-testN:latest"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" docker pull dev.hub.xxx.com/namespace/webapp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("testN\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" docker run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("name webapp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("p 8000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("8000 dev.hub.xxx.com/namespace/webapp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("testN\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# clean_dev: # dev或其他环境部署配置与上面test环境配置类似")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deploy_dev:")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports},682:function(s,t,a){s.exports=a.p+"assets/img/74006930ec014fc1bf466641b10e66f3.fa2b4011.png"},683:function(s,t,a){s.exports=a.p+"assets/img/77b00c0f68a944c283f7b62f8b8a330e.fc6be7e2.png"},684:function(s,t,a){s.exports=a.p+"assets/img/eb51712dbacd442ba69efe3b33cca622.43746d89.png"},685:function(s,t,a){s.exports=a.p+"assets/img/c0e99737c0ac4f2ca666a392b9b8bae0.f7ade84c.png"},686:function(s,t,a){s.exports=a.p+"assets/img/a40f0e2f142244adbafbb9dab1e14eef.5223d5ad.png"},687:function(s,t,a){s.exports=a.p+"assets/img/bfe70c8d0af340959fb3a8378c1f8b64.6d104061.png"},688:function(s,t,a){s.exports=a.p+"assets/img/image-20230624012007810.6c4e586c.png"},689:function(s,t,a){s.exports=a.p+"assets/img/image-20230621212749792.51215d57.png"},690:function(s,t,a){s.exports=a.p+"assets/img/image-20230621220948576.28cd159a.png"},691:function(s,t,a){s.exports=a.p+"assets/img/image-20230621221025410.013afb44.png"},692:function(s,t,a){s.exports=a.p+"assets/img/image-20230621221627664.de227166.png"},693:function(s,t,a){s.exports=a.p+"assets/img/e0cff238586c46668f8dc053dc9a22e9.5b12d802.png"}}]);
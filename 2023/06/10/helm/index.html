<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Helm | 个人博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="./favicon.ico">
    <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?55943ae09e5901d7a9f5705133737eec";
              var s = document.getElementsByTagName("script")[0];
              s.parentNode.insertBefore(hm, s);
            })();
           </script>
    <script src="https://hm.baidu.com/hm.js?xxxxxxxxxxx"></script>
    <meta name="description" content="会思考的芦苇。">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="robots" content="all">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="./assets/css/0.styles.f4f644f3.css" as="style"><link rel="preload" href="./assets/js/app.764dede6.js" as="script"><link rel="preload" href="./assets/js/13.20e964b9.js" as="script"><link rel="preload" href="./assets/js/1.8757f81f.js" as="script"><link rel="preload" href="./assets/js/26.2296389e.js" as="script"><link rel="preload" href="./assets/js/34.ec572062.js" as="script"><link rel="prefetch" href="./assets/js/10.36ed4133.js"><link rel="prefetch" href="./assets/js/11.18e1c33d.js"><link rel="prefetch" href="./assets/js/12.b32071c5.js"><link rel="prefetch" href="./assets/js/14.d0932ff0.js"><link rel="prefetch" href="./assets/js/15.7747d51d.js"><link rel="prefetch" href="./assets/js/16.487f9c88.js"><link rel="prefetch" href="./assets/js/17.9ae2b89b.js"><link rel="prefetch" href="./assets/js/18.801c9b12.js"><link rel="prefetch" href="./assets/js/19.867ef46b.js"><link rel="prefetch" href="./assets/js/20.ec371d7f.js"><link rel="prefetch" href="./assets/js/21.73f810bc.js"><link rel="prefetch" href="./assets/js/22.8c016772.js"><link rel="prefetch" href="./assets/js/23.9aa3d5ef.js"><link rel="prefetch" href="./assets/js/24.a6dcda10.js"><link rel="prefetch" href="./assets/js/25.2fe13775.js"><link rel="prefetch" href="./assets/js/27.21f2d66f.js"><link rel="prefetch" href="./assets/js/28.3209357f.js"><link rel="prefetch" href="./assets/js/29.c7065b7f.js"><link rel="prefetch" href="./assets/js/3.9efa3b27.js"><link rel="prefetch" href="./assets/js/30.92914cc9.js"><link rel="prefetch" href="./assets/js/31.13c12633.js"><link rel="prefetch" href="./assets/js/32.b016f60e.js"><link rel="prefetch" href="./assets/js/33.ed48a654.js"><link rel="prefetch" href="./assets/js/35.5b55607b.js"><link rel="prefetch" href="./assets/js/36.f50b6e38.js"><link rel="prefetch" href="./assets/js/37.34409ac4.js"><link rel="prefetch" href="./assets/js/38.c7073f77.js"><link rel="prefetch" href="./assets/js/39.12f063e9.js"><link rel="prefetch" href="./assets/js/4.95c562bd.js"><link rel="prefetch" href="./assets/js/40.1bbd5377.js"><link rel="prefetch" href="./assets/js/41.6331a8cf.js"><link rel="prefetch" href="./assets/js/42.28acd6f5.js"><link rel="prefetch" href="./assets/js/43.905d2114.js"><link rel="prefetch" href="./assets/js/44.041132c5.js"><link rel="prefetch" href="./assets/js/45.d1a66b92.js"><link rel="prefetch" href="./assets/js/46.1c9100fe.js"><link rel="prefetch" href="./assets/js/47.3e75f768.js"><link rel="prefetch" href="./assets/js/48.7d7248fb.js"><link rel="prefetch" href="./assets/js/49.8d465809.js"><link rel="prefetch" href="./assets/js/5.a1a0df33.js"><link rel="prefetch" href="./assets/js/50.4aa56564.js"><link rel="prefetch" href="./assets/js/51.59674bf5.js"><link rel="prefetch" href="./assets/js/52.f3990683.js"><link rel="prefetch" href="./assets/js/53.092fe0ad.js"><link rel="prefetch" href="./assets/js/54.ac62e2a7.js"><link rel="prefetch" href="./assets/js/55.3530fa5a.js"><link rel="prefetch" href="./assets/js/56.6e9bc6f3.js"><link rel="prefetch" href="./assets/js/6.e534639a.js"><link rel="prefetch" href="./assets/js/7.bc868936.js"><link rel="prefetch" href="./assets/js/8.ce0f4f25.js"><link rel="prefetch" href="./assets/js/9.a57a9cf0.js">
    <link rel="stylesheet" href="./assets/css/0.styles.f4f644f3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Gordon</h3> <p class="description" data-v-59e6cb88>会思考的芦苇。</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>Gordon</span>
          
        <span data-v-59e6cb88>2018 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><img src="./logo.png" alt="个人博客" class="logo"> <span class="site-name">个人博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/./" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      计算引擎
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./计算引擎/flink.html" class="nav-link"><i class="undefined"></i>
  flink
</a></li><li class="dropdown-item"><!----> <a href="/./计算引擎/spark.html" class="nav-link"><i class="undefined"></i>
  spark
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      存储引擎
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./存储引擎/ElasticSearch.html" class="nav-link"><i class="undefined"></i>
  ElasticSearch
</a></li><li class="dropdown-item"><!----> <a href="/./存储引擎/hbase.html" class="nav-link"><i class="undefined"></i>
  hbase
</a></li><li class="dropdown-item"><!----> <a href="/./存储引擎/redis.html" class="nav-link"><i class="undefined"></i>
  redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      云原生
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./云原生/Docker.html" class="nav-link"><i class="undefined"></i>
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      中间件
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./中间件/kafka.html" class="nav-link"><i class="undefined"></i>
  kafka
</a></li><li class="dropdown-item"><!----> <a href="/./中间件/Sqoop基本使用.html" class="nav-link"><i class="undefined"></i>
  Sqoop基本使用
</a></li></ul></div></div><div class="nav-item"><a href="/./tool/emoji/我的常用emoji.html" class="nav-link"><i class="undefined"></i>
  工具
</a></div><div class="nav-item"><a href="/./aboutme.html" class="nav-link"><i class="iconfont reco-account"></i>
  关于我
</a></div> <a href="https://github.com/GordonChanFZ/gordonchanfz.github.io/" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="./avatar.jpeg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    Gordon
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>30</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>47</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41><li class="social-item" data-v-1fad0c41><i class="iconfont reco-github" style="color:#e15b64;" data-v-1fad0c41></i></li></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/./" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      计算引擎
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./计算引擎/flink.html" class="nav-link"><i class="undefined"></i>
  flink
</a></li><li class="dropdown-item"><!----> <a href="/./计算引擎/spark.html" class="nav-link"><i class="undefined"></i>
  spark
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      存储引擎
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./存储引擎/ElasticSearch.html" class="nav-link"><i class="undefined"></i>
  ElasticSearch
</a></li><li class="dropdown-item"><!----> <a href="/./存储引擎/hbase.html" class="nav-link"><i class="undefined"></i>
  hbase
</a></li><li class="dropdown-item"><!----> <a href="/./存储引擎/redis.html" class="nav-link"><i class="undefined"></i>
  redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      云原生
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./云原生/Docker.html" class="nav-link"><i class="undefined"></i>
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      中间件
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/./中间件/kafka.html" class="nav-link"><i class="undefined"></i>
  kafka
</a></li><li class="dropdown-item"><!----> <a href="/./中间件/Sqoop基本使用.html" class="nav-link"><i class="undefined"></i>
  Sqoop基本使用
</a></li></ul></div></div><div class="nav-item"><a href="/./tool/emoji/我的常用emoji.html" class="nav-link"><i class="undefined"></i>
  工具
</a></div><div class="nav-item"><a href="/./aboutme.html" class="nav-link"><i class="iconfont reco-account"></i>
  关于我
</a></div> <a href="https://github.com/GordonChanFZ/gordonchanfz.github.io/" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Helm</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>Gordon</span>
          
        <span data-v-59e6cb88>2018 - </span>
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Helm</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>Gordon</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2023-6-10</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>k8s部署</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h2> <p>Helm 是 Kubernetes 的包管理器，类似yum。</p> <p>Helm架构</p> <p><img src="./assets/img/image-20230714194929437.55498acd.png" alt="image-20230714194929437"></p> <h2 id="安装helm"><a href="#安装helm" class="header-anchor">#</a> 安装Helm</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 下载包,使用离线包</span>
<span class="token function">wget</span> https://get.helm.sh/helm-v3.7.1-linux-amd64.tar.gz <span class="token parameter variable">-O</span> /tmp/helm-v3.7.1-linux-amd64.tar.gz
<span class="token comment"># 解压压缩包</span>
<span class="token function">tar</span> <span class="token parameter variable">-xf</span> /tmp/helm-v3.7.1-linux-amd64.tar.gz <span class="token parameter variable">-C</span> /root/
<span class="token comment"># 制作软连接</span>
<span class="token function">ln</span> <span class="token parameter variable">-s</span> /root/linux-amd64/helm /usr/local/bin/helm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="轻松入门"><a href="#轻松入门" class="header-anchor">#</a> 轻松入门</h2> <p><a href="https://helm.sh/zh/docs/intro/quickstart/" target="_blank" rel="noopener noreferrer">Helm | 快速入门指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#添加仓库源</span>
helm repo <span class="token function">add</span> bitnami https://charts.bitnami.com/bitnami
<span class="token comment">#展示仓库的包信息charts列表</span>
helm search repo bitnami
<span class="token comment">#了解相应的chart信息</span>
helm show chart bitnami/mysql
<span class="token comment">#安装</span>
helm <span class="token function">install</span> bitnami/mysql --generate-name
<span class="token comment">#查看已安装的chart</span>
helm <span class="token function">ls</span>
<span class="token comment">#卸载</span>
helm uninstall mysql-1612624192
<span class="token comment">##该命令会从Kubernetes卸载 mysql-1612624192， 它将删除和该版本相关的所有相关资源（service、deployment、 pod等等）甚至版本历史。如果您在执行 helm uninstall 的时候提供 --keep-history 选项， Helm将会保存版本历史。 您可以通过命令查看该版本的信息</span>
<span class="token comment">#查看安装chart的状态</span>
helm status mysql-1612624192
<span class="token comment">#查看版本，使用 helm rollback 回滚版本。</span>
<span class="token comment">#更新仓库</span>
helm repo update
<span class="token comment">#查看命令帮助</span>
helm get <span class="token parameter variable">-h</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="helm-命令的详细指南"><a href="#helm-命令的详细指南" class="header-anchor">#</a> Helm 命令的详细指南</h2> <h3 id="三大概念"><a href="#三大概念" class="header-anchor">#</a> 三大概念</h3> <p><em>Chart</em> 代表着 Helm 包。它包含在 Kubernetes 集群内部运行应用程序，工具或服务所需的所有资源定义。你可以把它看作是 Apt dpkg，或 Yum RPM 在Kubernetes 中的等价物。</p> <p><em>Repository（仓库）</em> 是用来存放和共享 charts 的地方。</p> <p><em>Release</em> 是运行在 Kubernetes 集群中的 chart 的实例。一个 chart 通常可以在同一个集群中安装多次。每一次安装都会创建一个新的 <em>release</em>。以 MySQL chart为例，如果你想在你的集群中运行两个数据库，你可以安装该chart两次。每一个数据库都会拥有它自己的 <em>release</em> 和 <em>release name</em>。</p> <h3 id="helm-search-查找-charts"><a href="#helm-search-查找-charts" class="header-anchor">#</a> 'helm search'：查找 Charts</h3> <p>Helm 自带一个强大的搜索命令，可以用来从两种来源中进行搜索：</p> <ul><li><code>helm search hub</code> 从 <a href="https://artifacthub.io/" target="_blank" rel="noopener noreferrer">Artifact Hub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中查找并列出 helm charts。 Artifact Hub中存放了大量不同的仓库。</li> <li><code>helm search repo</code> 从你添加（使用 <code>helm repo add</code>）到本地 helm 客户端中的仓库中进行查找。该命令基于本地数据进行搜索，无需连接互联网。</li></ul> <p>你可以通过运行 <code>helm search hub</code> 命令找到公开可用的charts：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm search hub wordpress
URL                                                 CHART VERSION APP VERSION DESCRIPTION
https://hub.helm.sh/charts/bitnami/wordpress        7.6.7         5.2.4       Web publishing platform for building blogs and ...
https://hub.helm.sh/charts/presslabs/wordpress-...  v0.6.3        v0.6.3      Presslabs WordPress Operator Helm Chart
https://hub.helm.sh/charts/presslabs/wordpress-...  v0.7.1        v0.7.1      A Helm chart for deploying a WordPress site on ...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上述命令从 Artifact Hub 中搜索所有的 <code>wordpress</code> charts。</p> <p>如果不进行过滤，<code>helm search hub</code> 命令会展示所有可用的 charts。</p> <p>使用 <code>helm search repo</code> 命令，你可以从你所添加的仓库中查找chart的名字。</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm repo add brigade https://brigadecore.github.io/charts
&quot;brigade&quot; has been added to your repositories
$ helm search repo brigade
NAME                          CHART VERSION APP VERSION DESCRIPTION
brigade/brigade               1.3.2         v1.2.1      Brigade provides event-driven scripting of Kube...
brigade/brigade-github-app    0.4.1         v0.2.1      The Brigade GitHub App, an advanced gateway for...
brigade/brigade-github-oauth  0.2.0         v0.20.0     The legacy OAuth GitHub Gateway for Brigade
brigade/brigade-k8s-gateway   0.1.0                     A Helm chart for Kubernetes
brigade/brigade-project       1.0.0         v1.0.0      Create a Brigade project
brigade/kashti                0.4.0         v0.4.0      A Helm chart for Kubernetes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Helm 搜索使用模糊字符串匹配算法，所以你可以只输入名字的一部分：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm search repo kash
NAME            CHART VERSION APP VERSION DESCRIPTION
brigade/kashti  0.4.0         v0.4.0      A Helm chart for Kubernetes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>搜索是用来发现可用包的一个好办法。一旦你找到你想安装的 helm 包，你便可以通过使用 <code>helm install</code> 命令来安装它。</p> <h3 id="helm-install"><a href="#helm-install" class="header-anchor">#</a> 'helm install'：</h3> <h4 id="安装一个-helm-包"><a href="#安装一个-helm-包" class="header-anchor">#</a> 安装一个 helm 包</h4> <p>使用 <code>helm install</code> 命令来安装一个新的 helm 包。最简单的使用方法只需要传入两个参数：你命名的release名字和你想安装的chart的名称。</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm install happy-panda bitnami/wordpress
NAME: happy-panda
LAST DEPLOYED: Tue Jan 26 10:27:17 2021
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
** Please be patient while the chart is being deployed **

Your WordPress site can be accessed through the following DNS name from within your cluster:

    happy-panda-wordpress.default.svc.cluster.local (port 80)

To access your WordPress site from outside the cluster follow the steps below:

1. Get the WordPress URL by running these commands:

  NOTE: It may take a few minutes for the LoadBalancer IP to be available.
        Watch the status with: 'kubectl get svc --namespace default -w happy-panda-wordpress'

   export SERVICE_IP=$(kubectl get svc --namespace default happy-panda-wordpress --template &quot;{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}&quot;)
   echo &quot;WordPress URL: http://$SERVICE_IP/&quot;
   echo &quot;WordPress Admin URL: http://$SERVICE_IP/admin&quot;

2. Open a browser and access WordPress using the obtained URL.

3. Login with the following credentials below to see your blog:

  echo Username: user
  echo Password: $(kubectl get secret --namespace default happy-panda-wordpress -o jsonpath=&quot;{.data.wordpress-password}&quot; | base64 --decode)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>现在<code>wordpress</code> chart 已经安装。注意安装chart时创建了一个新的 <em>release</em> 对象。上述发布被命名为 <code>happy-panda</code>。 （如果想让Helm生成一个名称，删除发布名称并使用<code>--generate-name</code>。）</p> <p>在安装过程中，<code>helm</code> 客户端会打印一些有用的信息，其中包括：哪些资源已经被创建，release当前的状态，以及你是否还需要执行额外的配置步骤。</p> <p>Helm按照以下顺序安装资源：</p> <ul><li>Namespace</li> <li>NetworkPolicy</li> <li>ResourceQuota</li> <li>LimitRange</li> <li>PodSecurityPolicy</li> <li>PodDisruptionBudget</li> <li>ServiceAccount</li> <li>Secret</li> <li>SecretList</li> <li>ConfigMap</li> <li>StorageClass</li> <li>PersistentVolume</li> <li>PersistentVolumeClaim</li> <li>CustomResourceDefinition</li> <li>ClusterRole</li> <li>ClusterRoleList</li> <li>ClusterRoleBinding</li> <li>ClusterRoleBindingList</li> <li>Role</li> <li>RoleList</li> <li>RoleBinding</li> <li>RoleBindingList</li> <li>Service</li> <li>DaemonSet</li> <li>Pod</li> <li>ReplicationController</li> <li>ReplicaSet</li> <li>Deployment</li> <li>HorizontalPodAutoscaler</li> <li>StatefulSet</li> <li>Job</li> <li>CronJob</li> <li>Ingress</li> <li>APIService</li></ul> <p>Helm 客户端不会等到所有资源都运行才退出。许多 charts 需要大小超过 600M 的 Docker 镜像，可能需要很长时间才能安装到集群中。</p> <p>你可以使用 <code>helm status</code> 来追踪 release 的状态，或是重新读取配置信息：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm status happy-panda
NAME: happy-panda
LAST DEPLOYED: Tue Jan 26 10:27:17 2021
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
** Please be patient while the chart is being deployed **

Your WordPress site can be accessed through the following DNS name from within your cluster:

    happy-panda-wordpress.default.svc.cluster.local (port 80)

To access your WordPress site from outside the cluster follow the steps below:

1. Get the WordPress URL by running these commands:

  NOTE: It may take a few minutes for the LoadBalancer IP to be available.
        Watch the status with: 'kubectl get svc --namespace default -w happy-panda-wordpress'

   export SERVICE_IP=$(kubectl get svc --namespace default happy-panda-wordpress --template &quot;{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}&quot;)
   echo &quot;WordPress URL: http://$SERVICE_IP/&quot;
   echo &quot;WordPress Admin URL: http://$SERVICE_IP/admin&quot;

2. Open a browser and access WordPress using the obtained URL.

3. Login with the following credentials below to see your blog:

  echo Username: user
  echo Password: $(kubectl get secret --namespace default happy-panda-wordpress -o jsonpath=&quot;{.data.wordpress-password}&quot; | base64 --decode)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>上述信息展示了 release 的当前状态。</p> <h4 id="安装前自定义-chart"><a href="#安装前自定义-chart" class="header-anchor">#</a> 安装前自定义 chart</h4> <p>上述安装方式只会使用 chart 的默认配置选项。很多时候，我们需要自定义 chart 来指定我们想要的配置。</p> <p>使用 <code>helm show values</code> 可以查看 chart 中的可配置选项：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm show values bitnami/wordpress
## Global Docker image parameters
## Please, note that this will override the image parameters, including dependencies, configured to use the global value
## Current available global Docker image parameters: imageRegistry and imagePullSecrets
##
# global:
#   imageRegistry: myRegistryName
#   imagePullSecrets:
#     - myRegistryKeySecretName
#   storageClass: myStorageClass

## Bitnami WordPress image version
## ref: https://hub.docker.com/r/bitnami/wordpress/tags/
##
image:
  registry: docker.io
  repository: bitnami/wordpress
  tag: 5.6.0-debian-10-r35
  [..]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>然后，你可以使用 YAML 格式的文件覆盖上述任意配置项，并在安装过程中使用该文件。</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ echo '{mariadb.auth.database: user0db, mariadb.auth.username: user0}' &gt; values.yaml
$ helm install -f values.yaml bitnami/wordpress --generate-name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上述命令将为 MariaDB 创建一个名称为 <code>user0</code> 的默认用户，并且授予该用户访问新建的 <code>user0db</code> 数据库的权限。chart 中的其他默认配置保持不变。</p> <p>安装过程中有两种方式传递配置数据：</p> <ul><li><code>--values</code> (或 <code>-f</code>)：使用 YAML 文件覆盖配置。可以指定多次，优先使用最右边的文件。</li> <li><code>--set</code>：通过命令行的方式对指定项进行覆盖。</li></ul> <p>如果同时使用两种方式，则 <code>--set</code> 中的值会被合并到 <code>--values</code> 中，但是 <code>--set</code> 中的值优先级更高。在<code>--set</code> 中覆盖的内容会被被保存在 ConfigMap 中。可以通过 <code>helm get values</code> 来查看指定 release 中 <code>--set</code> 设置的值。也可以通过运行 <code>helm upgrade</code> 并指定 <code>--reset-values</code> 字段来清除 <code>--set</code> 中设置的值。</p> <p><code>--set</code> 的格式和限制</p> <p><code>--set</code> 选项使用0或多个 name/value 对。最简单的用法类似于：<code>--set name=value</code>，等价于如下 YAML 格式：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> value
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>多个值使用逗号分割，因此 <code>--set a=b,c=d</code> 的 YAML 表示是：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">a</span><span class="token punctuation">:</span> b
<span class="token key atrule">c</span><span class="token punctuation">:</span> d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>支持更复杂的表达式。例如，<code>--set outer.inner=value</code> 被转换成了：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">outer</span><span class="token punctuation">:</span>
  <span class="token key atrule">inner</span><span class="token punctuation">:</span> value
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>列表使用花括号（<code>{}</code>）来表示。例如，<code>--set name={a, b, c}</code> 被转换成了：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> a
  <span class="token punctuation">-</span> b
  <span class="token punctuation">-</span> c
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>某些name/key可以设置为<code>null</code>或者空数组，例如 <code>--set name=[],a=null</code> 由</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> a
  <span class="token punctuation">-</span> b
  <span class="token punctuation">-</span> c
<span class="token key atrule">a</span><span class="token punctuation">:</span> b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>变成了</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token key atrule">a</span><span class="token punctuation">:</span> <span class="token null important">null</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>从 2.5.0 版本开始，可以使用数组下标的语法来访问列表中的元素。例如 <code>--set servers[0].port=80</code> 就变成了：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>多个值也可以通过这种方式来设置。<code>--set servers[0].port=80,servers[0].host=example</code> 变成了：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">servers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> example
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果需要在 <code>--set</code> 中使用特殊字符，你可以使用反斜线来进行转义；<code>--set name=value1\,value2</code> 就变成了：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;value1,value2&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>类似的，你也可以转义点序列（英文句号）。这可能会在 chart 使用 <code>toYaml</code> 函数来解析 annotations，labels，和 node selectors 时派上用场。<code>--set nodeSelector.&quot;kubernetes\.io/role&quot;=master</code> 语法就变成了：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">nodeSelector</span><span class="token punctuation">:</span>
  <span class="token key atrule">kubernetes.io/role</span><span class="token punctuation">:</span> master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>深层嵌套的数据结构可能会很难用 <code>--set</code> 表达。我们希望 Chart 的设计者们在设计 <code>values.yaml</code> 文件的格式时，考虑到 <code>--set</code> 的使用。（更多内容请查看 <a href="https://helm.sh/docs/chart_template_guide/values_files/" target="_blank" rel="noopener noreferrer">Values 文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</p> <h4 id="更多安装方法"><a href="#更多安装方法" class="header-anchor">#</a> 更多安装方法</h4> <p><code>helm install</code> 命令可以从多个来源进行安装：</p> <ul><li>chart 的仓库（如上所述）</li> <li>本地 chart 压缩包（<code>helm install foo foo-0.1.1.tgz</code>）</li> <li>解压后的 chart 目录（<code>helm install foo path/to/foo</code>）</li> <li>完整的 URL（<code>helm install foo https://example.com/charts/foo-1.2.3.tgz</code>）</li></ul> <h3 id="helm-upgrade-和-helm-rollback-升级-release-和失败时恢复"><a href="#helm-upgrade-和-helm-rollback-升级-release-和失败时恢复" class="header-anchor">#</a> 'helm upgrade' 和 'helm rollback'：升级 release 和失败时恢复</h3> <p>当你想升级到 chart 的新版本，或是修改 release 的配置，你可以使用 <code>helm upgrade</code> 命令。</p> <p>一次升级操作会使用已有的 release 并根据你提供的信息对其进行升级。由于 Kubernetes 的 chart 可能会很大而且很复杂，Helm 会尝试执行最小侵入式升级。即它只会更新自上次发布以来发生了更改的内容。</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm upgrade -f panda.yaml happy-panda bitnami/wordpress
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在上面的例子中，<code>happy-panda</code> 这个 release 使用相同的 chart 进行升级，但是使用了一个新的 YAML 文件：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mariadb.auth.username</span><span class="token punctuation">:</span> user1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们可以使用 <code>helm get values</code> 命令来看看配置值是否真的生效了：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm get values happy-panda
mariadb:
  auth:
    username: user1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>helm get</code> 是一个查看集群中 release 的有用工具。正如我们上面所看到的，<code>panda.yaml</code> 中的新值已经被部署到集群中了。</p> <p>现在，假如在一次发布过程中，发生了不符合预期的事情，也很容易通过 <code>helm rollback [RELEASE] [REVISION]</code> 命令回滚到之前的发布版本。</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm rollback happy-panda 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上面这条命令将我们的 <code>happy-panda</code> 回滚到了它最初的版本。release 版本其实是一个增量修订（revision）。 每当发生了一次安装、升级或回滚操作，revision 的值就会加1。第一次 revision 的值永远是1。我们可以使用 <code>helm history [RELEASE]</code> 命令来查看一个特定 release 的修订版本号。</p> <p><strong>安装、升级、回滚时的有用选项</strong></p> <p>你还可以指定一些其他有用的选项来自定义 Helm 在安装、升级、回滚期间的行为。请注意这并不是 cli 参数的完整列表。 要查看所有参数的说明，请执行 <code>helm --help</code> 命令。</p> <ul><li><code>--timeout</code>：一个 <a href="https://golang.org/pkg/time/#ParseDuration" target="_blank" rel="noopener noreferrer">Go duration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 类型的值， 用来表示等待 Kubernetes 命令完成的超时时间，默认值为 <code>5m0s</code>。</li> <li><code>--wait</code>：表示必须要等到所有的 Pods 都处于 ready 状态，PVC 都被绑定，Deployments 都至少拥有最小 ready 状态 Pods 个数（<code>Desired</code>减去 <code>maxUnavailable</code>），并且 Services 都具有 IP 地址（如果是<code>LoadBalancer</code>， 则为 Ingress），才会标记该 release 为成功。最长等待时间由 <code>--timeout</code> 值指定。如果达到超时时间，release 将被标记为 <code>FAILED</code>。注意：当 Deployment 的 <code>replicas</code> 被设置为1，但其滚动升级策略中的 <code>maxUnavailable</code> 没有被设置为0时，<code>--wait</code> 将返回就绪，因为已经满足了最小 ready Pod 数。</li> <li><code>--no-hooks</code>：不运行当前命令的钩子。</li> <li><code>--recreate-pods</code>（仅适用于 <code>upgrade</code> 和 <code>rollback</code>）：这个参数会导致重建所有的 Pod（deployment中的Pod 除外）。（在 Helm 3 中已被废弃）</li></ul> <h3 id="helm-uninstall-卸载-release"><a href="#helm-uninstall-卸载-release" class="header-anchor">#</a> 'helm uninstall'：卸载 release</h3> <p>使用 <code>helm uninstall</code> 命令从集群中卸载一个 release：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm uninstall happy-panda
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>该命令将从集群中移除指定 release。你可以通过 <code>helm list</code> 命令看到当前部署的所有 release：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm list
NAME            VERSION UPDATED                         STATUS          CHART
inky-cat        1       Wed Sep 28 12:59:46 2016        DEPLOYED        alpine-0.1.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>从上面的输出中，我们可以看到，<code>happy-panda</code> 这个 release 已经被卸载。</p> <p>在上一个 Helm 版本中，当一个 release 被删除，会保留一条删除记录。而在 Helm 3 中，删除也会移除 release 的记录。 如果你想保留删除记录，使用 <code>helm uninstall --keep-history</code>。使用 <code>helm list --uninstalled</code> 只会展示使用了 <code>--keep-history</code> 删除的 release。</p> <p><code>helm list --all</code> 会展示 Helm 保留的所有 release 记录，包括失败或删除的条目（指定了 <code>--keep-history</code>）：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$  helm list --all
NAME            VERSION UPDATED                         STATUS          CHART
happy-panda     2       Wed Sep 28 12:47:54 2016        UNINSTALLED     wordpress-10.4.5.6.0
inky-cat        1       Wed Sep 28 12:59:46 2016        DEPLOYED        alpine-0.1.0
kindred-angelf  2       Tue Sep 27 16:16:10 2016        UNINSTALLED     alpine-0.1.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意，因为现在默认会删除 release，所以你不再能够回滚一个已经被卸载的资源了。</p> <h3 id="helm-repo-使用仓库"><a href="#helm-repo-使用仓库" class="header-anchor">#</a> 'helm repo'：使用仓库</h3> <p>Helm 3 不再附带一个默认的 chart 仓库。<code>helm repo</code> 提供了一组命令用于添加、列出和移除仓库。</p> <p>使用 <code>helm repo list</code> 来查看配置的仓库：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm repo list
NAME            URL
stable          https://charts.helm.sh/stable
mumoshu         https://mumoshu.github.io/charts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用 <code>helm repo add</code> 来添加新的仓库：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm repo add dev https://example.com/dev-charts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>因为 chart 仓库经常在变化，在任何时候你都可以通过执行 <code>helm repo update</code> 命令来确保你的 Helm 客户端是最新的。</p> <p>使用 <code>helm repo remove</code> 命令来移除仓库。</p> <h2 id="创建自己的-charts"><a href="#创建自己的-charts" class="header-anchor">#</a> 创建自己的 charts</h2> <h3 id="简单入门"><a href="#简单入门" class="header-anchor">#</a> 简单入门</h3> <p><a href="https://helm.sh/zh/docs/topics/charts" target="_blank" rel="noopener noreferrer">chart 开发指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 介绍了如何开发你自己的chart。 但是你也可以通过使用 <code>helm create</code> 命令来快速开始：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm create deis-workflow
Creating deis-workflow
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>现在，<code>./deis-workflow</code> 目录下已经有一个 chart 了。你可以编辑它并创建你自己的模版。</p> <ul><li>Chart.yaml：用于描述这个 Chart 的基本信息，包括名字、描述信息以及版本等。</li> <li>values.yaml ：用于存储 templates 目录中模板文件中用到变量的值。</li> <li>Templates： 目录里面存放所有 yaml 模板文件。</li> <li>charts：目录里存放这个 chart 依赖的所有子 chart。</li> <li>NOTES.txt ：用于介绍 Chart 帮助信息， helm install 部署后展示给用户。例如： 如何使用这个 Chart、列出缺省的设置等。</li> <li>helpers.tpl：放置模板助手的地方，可以在整个 chart 中重复使用</li></ul> <p>在编辑 chart 时，可以通过 <code>helm lint</code> 验证格式是否正确。</p> <p>2 在templates文件夹下创建两个yaml文件</p> <p>deployment.yaml</p> <p><img src="./assets/img/d585df95383b44a7ab4df6abe7eb5aac.3399d22e.png" alt="img"></p> <p>service.yaml<br> <img src="./assets/img/5dbb97c542e845e68a5e8f6f533c6848.9e56d0bd.png" alt="img"></p> <p>3 安装mychart</p> <p><img src="./assets/img/3ec84769767a40529920fe72a1e4fe9c.2f032bdb.png" alt="img"></p> <p>4 应用升级<br>
helm upgrade [chart名称] 目录</p> <p><img src="./assets/img/12d1d07635574e898d10bc33be073e77.ce5f1ffa.png" alt="img"></p> <p>5 chart模板使用<br>
通过传递参数，动态渲染模板，yaml内容动态传入参数生成，实现yaml高效复用。chart中有values.vaml文件，定义yaml全局变量<br>
yaml文件大体有如下几个地方不同</p> <p>image<br>
tag<br>
label<br>
port<br>
replicas<br>
1 在values.yaml文件定义变量</p> <p><img src="data:image/png;base64,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" alt="img"></p> <p>2 在templates的yaml文件引用变量</p> <p><img src="./assets/img/image-20230714195936190.45fdb7a5.png" alt="image-20230714195936190"></p> <p>通过Values前缀引用值，通过Release动态生成名字</p> <p><strong>如果需要打包，也可以通过打包安装</strong></p> <p>当准备将 chart 打包分发时，你可以运行 <code>helm package</code> 命令：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm package deis-workflow
deis-workflow-0.1.0.tgz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后这个 chart 就可以很轻松的通过 <code>helm install</code> 命令安装：</p> <div class="language-console line-numbers-mode"><pre class="language-text"><code>$ helm install deis-workflow ./deis-workflow-0.1.0.tgz
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>打包好的 chart 可以上传到 chart 仓库中</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2023-7-19 7:18:59 ├F10: PM┤</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/./2023/06/10/helm/#介绍" class="sidebar-link reco-side-介绍" data-v-b57cc07c>介绍</a></li><li class="level-2" data-v-b57cc07c><a href="/./2023/06/10/helm/#安装helm" class="sidebar-link reco-side-安装helm" data-v-b57cc07c>安装Helm</a></li><li class="level-2" data-v-b57cc07c><a href="/./2023/06/10/helm/#轻松入门" class="sidebar-link reco-side-轻松入门" data-v-b57cc07c>轻松入门</a></li><li class="level-2" data-v-b57cc07c><a href="/./2023/06/10/helm/#helm-命令的详细指南" class="sidebar-link reco-side-helm-命令的详细指南" data-v-b57cc07c>Helm 命令的详细指南</a></li><li class="level-3" data-v-b57cc07c><a href="/./2023/06/10/helm/#三大概念" class="sidebar-link reco-side-三大概念" data-v-b57cc07c>三大概念</a></li><li class="level-3" data-v-b57cc07c><a href="/./2023/06/10/helm/#helm-search-查找-charts" class="sidebar-link reco-side-helm-search-查找-charts" data-v-b57cc07c>'helm search'：查找 Charts</a></li><li class="level-3" data-v-b57cc07c><a href="/./2023/06/10/helm/#helm-install" class="sidebar-link reco-side-helm-install" data-v-b57cc07c>'helm install'：</a></li><li class="level-3" data-v-b57cc07c><a href="/./2023/06/10/helm/#helm-upgrade-和-helm-rollback-升级-release-和失败时恢复" class="sidebar-link reco-side-helm-upgrade-和-helm-rollback-升级-release-和失败时恢复" data-v-b57cc07c>'helm upgrade' 和 'helm rollback'：升级 release 和失败时恢复</a></li><li class="level-3" data-v-b57cc07c><a href="/./2023/06/10/helm/#helm-uninstall-卸载-release" class="sidebar-link reco-side-helm-uninstall-卸载-release" data-v-b57cc07c>'helm uninstall'：卸载 release</a></li><li class="level-3" data-v-b57cc07c><a href="/./2023/06/10/helm/#helm-repo-使用仓库" class="sidebar-link reco-side-helm-repo-使用仓库" data-v-b57cc07c>'helm repo'：使用仓库</a></li><li class="level-2" data-v-b57cc07c><a href="/./2023/06/10/helm/#创建自己的-charts" class="sidebar-link reco-side-创建自己的-charts" data-v-b57cc07c>创建自己的 charts</a></li><li class="level-3" data-v-b57cc07c><a href="/./2023/06/10/helm/#简单入门" class="sidebar-link reco-side-简单入门" data-v-b57cc07c>简单入门</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----></div></div>
    <script src="./assets/js/app.764dede6.js" defer></script><script src="./assets/js/13.20e964b9.js" defer></script><script src="./assets/js/1.8757f81f.js" defer></script><script src="./assets/js/26.2296389e.js" defer></script><script src="./assets/js/34.ec572062.js" defer></script>
  </body>
</html>
